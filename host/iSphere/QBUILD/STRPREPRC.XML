<?xml version="1.0" encoding="ISO-8859-1"?>
     <!-- Embedded DTD for validation -->
     <!DOCTYPE upload [
     <!ELEMENT compile (#PCDATA)>
     <!ATTLIST compile
      condition CDATA #REQUIRED
     >
     <!ELEMENT copysrc (#PCDATA)>
     <!ELEMENT install_instructions (#PCDATA)>
     <!ELEMENT install_program (#PCDATA)>
     <!ELEMENT mbr (copysrc)>
     <!ATTLIST mbr
      mbrname CDATA #REQUIRED
      mbrtype CDATA #REQUIRED
      mbrtext CDATA #REQUIRED
      srcfile CDATA #REQUIRED
      srclib CDATA #REQUIRED
      srclen CDATA #REQUIRED
      srccssid CDATA #REQUIRED
     >
     <!ELEMENT qcmdexc (#PCDATA)>
     <!ATTLIST qcmdexc
      condition CDATA #REQUIRED
      release CDATA #REQUIRED
      dltsplf CDATA #REQUIRED
     >
     <!ELEMENT qrycond (#PCDATA)>
     <!ATTLIST qrycond
      msg CDATA #REQUIRED
      values CDATA #REQUIRED
      var CDATA #REQUIRED
     >
     <!ELEMENT sendmsg (#PCDATA)>
     <!ATTLIST sendmsg
      sendmsgid CDATA #REQUIRED
      sendmsgtype CDATA #REQUIRED
     >
     <!ELEMENT rtvobjd (#PCDATA)>
     <!ATTLIST rtvobjd
      condition CDATA #REQUIRED
      obj CDATA #REQUIRED
      lib CDATA #REQUIRED
      objtype CDATA #REQUIRED
      rtnlib CDATA #IMPLIED
     >
     <!ELEMENT upload (install_instructions | install_program | qrycond |
                       qcmdexc | sendmsg | mbr | compile | rtvobjd | chgvar)+>
     <!ATTLIST upload
      appname CDATA #REQUIRED
      appauthor CDATA #REQUIRED
      appblddate CDATA #REQUIRED
     >
     ]>
<upload  appname="STRPREPRC"  appauthor="Thomas Raddatz"  appblddate=" 1/12/2023">
<install_instructions><![CDATA[
     *----------------------------------------------------------------      ------
     *  1. Upload entire XML to your AS/400 to a source file 112 long, into any mbr
     *     name not in this XML (suggest member name like ABCX or XYZX). The source
     *     file must be in the library where source and objects are to be installed.
     *
     *  2. If you have XMLPREVIEW installed, skip to step 3.
     *
     *     Copy the text between the start tag <install_program> and the end
     *     tag </install_program> into any member name (your choice)
     *     in file QRPGLESRC member type RPGLE.   CRTBNDRPG to compile.
     *     NOTE: You need extract the install program only once, this same program
     *           will install any upload on this page.
     *
     *  3. Call the install program (or execute XmlPrevew) passing these 3 parms.
     *       'your-member-name you uploaded this text into'
     *       'your-source-file-name the member is in'
     *       'your-library-name the source file is in'
     *
     *  The various source members will be extracted and the objects required
     *   for the application will be created in your-library-name.
     *----------------------------------------------------------------      ------
]]>  </install_instructions>
<install_program><![CDATA[
      * /// START OF INSTALL PGM HERE   ************************** ///
      *---------------------------------------------------------------------------------------
      * CRTBNDRPG PGM(QTEMP/XMLINST) SRCFILE(ISPHERE/QBUILD) SRCMBR(*PGM)
      *---------------------------------------------------------------------------------------
      * Parse / Install from xml text into source members and objects.
      * Copyright (C) 2001    Craig Rutledge    <craig_rutledge@mohawkind.com>
      * Martin Rowe    <Martin@dbg400.net>          scripting cmd prompts
      * David George   <webmaster@400times.co.uk>   intellectual input
      * Thomas Raddatz <thomas.raddatz@tools400.de> execute SQL statements
      * Thomas Raddatz <thomas.raddatz@tools400.de> conditions
      * Thomas Raddatz <thomas.raddatz@tools400.de> release
      * Thomas Raddatz <thomas.raddatz@tools400.de> retrieve object description
      *
      * Use xml tags in text to trigger:
      * 1. Parse text into source members (create srcfile & member if required).
      * 2. Compile source into objects.
      * 3. Send installation progress user messages.
      * 4. Execute qcmdexc as required.
      * 5. Execute SQL statements as required.
      *
      * This program is free software, you can redistribute it and/or modify it
      * under the terms of the GNU General Public License as published by
      * the Free Software Foundation.  See GNU General Public License for details
      *---------------------------------------------------------------------------------------
      * >>PRE-COMPILER<<
      *   >>CRTCMD<< CRTBNDRPG    PGM(&LI/&OB) SRCFILE(&SL/&SF) SRCMBR(*PGM) +
      *                           DBGVIEW(*LIST) OPTION(*EVENTF);
      *   >>EXECUTE<<
      * >>END-PRE-COMPILER<<
      *---------------------------------------------------------------------------------------
     H DFTACTGRP(*NO) ACTGRP(*CALLER) BNDDIR('QC2LE')
      *---------------------------------------------------------------------------------------
     Fxmlinput  if   f  112        disk    usropn                               uploaded text
     Fqxxxsrc   o    f  112        disk    usropn                               parsed out
      *--------------------------------------------------------------------
      * create parm prototypes
      *--------------------------------------------------------------------
      *  Tokenize String
     D strtok          PR              *          extproc('strtok')
     D  i_string                       *   value  options(*string)
     D  i_token                        *   value  options(*string)
      * retrieve member description
     D qusrmbrd        PR                  ExtPgm('QUSRMBRD')                   MEMBER DESCRIPTION
     D  o_rcvVar                  32767a          options(*varsize)             RECEIVER
     D  i_lenRcvVar                  10i 0 const                                LENGTH OF RECVR
     D  i_format                      8    const                                UPLOAD TYPE
     D  i_qFile                      20    const                                FILE   LIB
     D  i_mbr                        10    const                                MEMBER NAME
     D  i_ovverride                   1    const                                PROCESS OVERIDE
     D  io_errCode                32767a          options(*varsize)             ERROR CODE
      * retrieve object description
     D QUSROBJD...
     D                 PR                         extpgm('QUSROBJD')
     D  o_rcvVar                  65535A          options(*varsize)
     D  i_lenRcvVar                  10I 0 const
     D  i_format                      8A   const
     D  i_qObj                       20A   const
     D  i_type                       10A   const
     D  io_errCode                65535A          options(*nopass: *varsize)    | OptGrp 1
      * send program message
     D qmhsndpm        PR                  ExtPgm('QMHSNDPM')                   SEND MESSAGES
     D  i_msgID                       7a   const                                ID
     D  i_qMsgF                      20a   const                                FILE
     D  i_msgText                 32767a   const  options(*varsize)             TEXT
     D  i_lenMsgText                 10i 0 const                                LENGTH
     D  i_msgType                    10a   const                                TYPE
     D  i_callStackE                 10a   const                                STACK ENTRY
     D  i_callStackC                 10i 0 const                                STACK COUNTER
     D  i_msgKey                      4a   const                                KEY
     D  io_errCode                32767a          options(*varsize)             ERROR CODE
      * execute cl command
     D  qcmdexc        PR                  ExtPgm('QCMDEXC')
     D  i_cmd                        50a   Const
     D  i_lenCmd                     15p 5 Const
      *  Allocate Environment Handle
     D SQLAllocEnv...
     D                 PR                         extproc('SQLAllocEnv')
     D                                     like(SQLRETURN_t )
     D  o_phenv                        *   value
      *  Allocate Connection Handle
     D SQLAllocConnect...
     D                 PR                         extproc('SQLAllocConnect')
     D                                     like(SQLRETURN_t )
     D  i_henv                             value  like(SQLHENV_t   )
     D  o_phdbc                        *   value
      *  Connect to a Data Source
     D SQLConnect...
     D                 PR                         extproc('SQLConnect')
     D                                     like(SQLRETURN_t )
     D  i_hdbc                             value  like(SQLHDBC_t   )
     D  i_szDSN                        *   value  options(*string)
     D  i_cbDSN                            value  like(SQLSMALLINT_t)
     D  i_szUID                        *   value  options(*string)
     D  i_cbUID                            value  like(SQLSMALLINT_t)
     D  i_szAuthStr                    *   value  options(*string)
     D  i_cbAuthStr                        value  like(SQLSMALLINT_t)
      *  Set Connection Option
     D SQLSetConnectOption...
     D                 PR                         extproc('SQLSetConnectOption')
     D                                     like(SQLRETURN_t )
     D  i_hdbc                             value  like(SQLHDBC_t   )
     D  i_fOption                          value  like(SQLSMALLINT_t)
     D  i_vParam                           value  like(SQLPOINTER_t )
      *  Allocate a Statement Handle
     D SQLAllocStmt...
     D                 PR                         extproc('SQLAllocStmt')
     D                                     like(SQLRETURN_t )
     D  i_hdbc                             value  like(SQLHDBC_t   )
     D  o_phstmt                       *   value
      *  Execute a Statement Directly
     D SQLExecDirect...
     D                 PR                         extproc('SQLExecDirect')
     D                                     like(SQLRETURN_t )
     D  i_hstmt                            value  like(SQLHSTMT_t  )
     D  i_szSqlStr                     *   value  options(*string)
     D  i_cbSqlStr                         value  like(SQLINTEGER_t)
      *  Free (or Reset) a Statement Handle
     D SQLFreeStmt...
     D                 PR                         extproc('SQLFreeStmt')
     D                                     like(SQLRETURN_t )
     D  i_hstmt                            value  like(SQLHSTMT_t  )
     D  i_fOption                          value  like(SQLSMALLINT_t)
      *  Disconnect from a Data Source
     D SQLDisconnect...
     D                 PR                         extproc('SQLDisconnect')
     D                                     like(SQLRETURN_t )
     D  i_hdbc                             value  like(SQLHDBC_t   )
      *  Free Connection Handle
     D SQLFreeConnect...
     D                 PR                         extproc('SQLFreeConnect')
     D                                     like(SQLRETURN_t )
     D  i_hdbc                             value  like(SQLHDBC_t   )
      *  Free Environment Handle
     D SQLFreeEnv...
     D                 PR                         extproc('SQLFreeEnv')
     D                                     like(SQLRETURN_t )
     D  i_henv                             value  like(SQLHENV_t   )
      *--------------------------------------------------------------------
     D long_t          S             10I 0                    based(pDummy)
     D short_t         S              5I 0                    based(pDummy)
      *
     D SQLINTEGER_t    S                   like(long_t      ) based(pDummy)
     D SQLSMALLINT_t   S                   like(short_t     ) based(pDummy)
      *
     D PTR_t           S               *                      based(pDummy)
     D SQLPOINTER_t    S                   like(PTR_t       ) based(pDummy)
     D HENV_t          S                   like(long_t      ) based(pDummy)
     D HDBC_t          S                   like(long_t      ) based(pDummy)
     D HSTMT_t         S                   like(long_t      ) based(pDummy)
     D RETCODE_t       S                   like(SQLINTEGER_t) based(pDummy)
      *
     D SQLHENV_t       S                   like(HENV_t      ) based(pDummy)
     D SQLHDBC_t       S                   like(HDBC_t      ) based(pDummy)
     D SQLHSTMT_t      S                   like(HSTMT_t     ) based(pDummy)
     D SQLRETURN_t     S                   like(RETCODE_t   ) based(pDummy)
      *
     D retCode         S                   like(SQLRETURN_t) inz
     D hdbc            S                   like(SQLHDBC_t  ) inz
     D hstmt           S                   like(SQLHSTMT_t ) inz
     D henv            S                   like(SQLHENV_t  ) inz
     D sqlInit         S              1A                     inz(*off)
     D cOptVal         S             10I 0                   inz
      *
     D SQL_NTS         C                   const( -3)
     D SQL_COMMIT_NONE...
     D                 C                   const(  1)
     D SQL_ATTR_COMMIT...
     D                 C                   const(  0)
     D SQL_DROP        C                   const(  1)
      *--------------------------------------------------------------------
      * Read element
      *--------------------------------------------------------------------
     D readElement     PR                        like(bldexc)
     D  i_element                     9A   value varying
      *--------------------------------------------------------------------
      * Define function prototype to double quotes in a string
      *--------------------------------------------------------------------
     D dblQuotes       PR          2048A         varying
     D  i_string                   2048A   value varying
      *--------------------------------------------------------------------
      * Define function prototype to get attribute data from a string
      *--------------------------------------------------------------------
     D getAttrData...
     D                 PR          2000A          varying                       like(string_t)
     D  i_attr                       10a   value
     D  i_string                   2000A   value  varying                       like(string_t)
     D  i_default                  2000A   value  varying                       like(string_t)
      *--------------------------------------------------------------------
      * Define function prototype to check for a condition
      *--------------------------------------------------------------------
     D isCondition...
     D                 PR              n
     D  i_condList                 2000A   value
      *---------------------------------------------------------------------------------------
     D loadConditions...
     D                 PR                  dim(32) like(condition)
     D  i_conditions                128A   value
      *--------------------------------------------------------------------
     D getCurrentRelease...
     D                 PR            10A
      *--------------------------------------------------------------------
     D isRelease...
     D                 PR              n
     D  i_os_release                  6A   value
     D  i_release                    10A   value
      *--------------------------------------------------------------------
     D setTargetRelease...
     D                 PR          2000A          varying
     D  i_keyword                    10A   value  varying
     D  i_string                   2000A   value  varying
     D  i_value                      10A   value  varying
      *--------------------------------------------------------------------
     D setVariable...
     D                 PR
     D  i_fldName                    10A   value  varying
     D  i_value                      64A   value  varying
      *---------------------------------------------------------------------------------------------
     D getVarName...
     D                 PR            11a          varying
     D  i_bldexc                           value  like(bldexc)
     D  i_pos                        10i 0 value
      *---------------------------------------------------------------------------------------------
     D getVarValue...
     D                 PR            64a          varying
     D  i_name                       11a   value  varying
      *---------------------------------------------------------------------------------------------
     D uCase...
     D                 PR          2000A          varying
     D  i_string                   2000A   value  varying
      *--------------------------------------------------------------------
     D vrcvar          s            145
     D qm_msgid        s              7
     D qm_msgtxt       s            500
     D qm_msgq         s             10
     D qm_msgtyp       s             10
     D mbrname         s             10
     D mbrtype         s             10
     D mbrtext         s             50
     D srcfile         s             10
     D srclen          s              5
     D srclenN         s              5  0   inz(0)
     D srccssid        s              5
     D bldexc          s           2000
     D write_flag      s              1n   inz(*off)
     D srcSeqno        s              6s 2 inz(0)
     D aa              s              5u 0 inz(0)
     D ll              s              5u 0 inz(0)
     D qs              c                   ''''
     D qd              c                   '"'
     D errFLag         s              1    inz(*off)
     D cnd_msg         s             42
     D cnd_values      s            110
     D cnd_var         s             10
     D cnd_rtnVal      s             10
     D cnd_array       s                   dim(32) inz like(condition)
     D cnd_ptr         s             10i 0 inz
     D condition       s             10a
     D condList        s           2000a
     D release         s             10a
     D dltsplf         s             10a
     D objd_obj        s             10a
     D objd_lib        s             10a
     D objd_objtype    s             10a
     D objd_rtnlib     s             10a
     D objd0100        ds
     D  od_bytRet              1      4i 0
     D  od_bytAvl              5      8i 0
     D  od_name                9     18a
     D  od_lib                19     28a
     D  od_type               29     38a
     D  od_rtnLib             39     48a
     D fld_array       ds
     D  fld_x                        10i 0 inz
     D  fld_name                     11a   inz dim(64) varying
     D  fld_value                    64a   inz dim(64) varying
     D var_name        s             11a   inz varying
     D var_value       s             64a   inz varying
      * Error return code parm for APIs.
     D errCode         DS
     D  errCode_bytPrv...
     D                               10i 0 inz(%size(errCode))
     D  errCode_bytAvl...
     D                               10i 0 inz(0)
     D  errCode_excID...
     D                                7a   inz
     D  errCode_reserved...
     D                                1a   inz
     D  errCode_escData...
     D                              256a   inz
      * Optional parameters
     D OvrSrcFile      s                   like(i_OvrSrcFile) inz
     D isPreDefCond    s               N   inz(*off)
     D TgtRls          s                   like(i_TgtRls    ) inz
      *
      * Program status data structure.
     D sds            sds
     D  sds_pgmName                  10A
     D  sds_status                    5S 0
     D  sds_prvStat                   5S 0
     D  sds_lastSeq                   8A
     D  sds_lastSubR                  8A
     D  sds_numParm                   3S 0
     D  sds_msgID                     7A
     D  sds_MiInstr                   4A
     D  sds_wrkArea                  30A
     D  sds_lib                      10A
     D  sds_msgText                  80A
      *--------------------------------------------------------------------
     Ixmlinput  ns
     I                                 13   21  xmltag1
     I                                 18   27  xmltag2
     I                                 13  112  xmlcode
      *--------------------------------------------------------------------
     C     *entry        plist
     C                   parm                    ParseSrcMbr      10            source member
     C                   parm                    ParseSrcFile     10            source file
     C                   parm                    ParseSrcLib      10            source lib
      *  optional parameters:
     C                   parm                    i_OvrSrcFile     10            override to src
     C                   parm                    i_Conditions    128            pre-def conditions
     C                   parm                    i_TgtRls         10            target release
      *
      *  get optional parameter: Overrride to Source File
     C                   if        %parms() >= 4
     C                   eval      OvrSrcFile = i_OvrSrcFile
     C                   else
     C                   eval      OvrSrcFile = ''
     C                   endif
      *
      *  get optional parameter: Conditions
     C                   if        %parms() >= 5
     C                   if        %subst(i_Conditions:1:32) <> ''
     C                   eval      cnd_array = loadConditions(i_Conditions)
     C                   eval      isPreDefCond = *on
     C                   else
     C                   eval      isPreDefCond = *off
     C                   endif
     C                   endif
      *
      *  get optional parameter: Target Release
     C                   if        %parms() >= 6
     C                   eval      TgtRls = i_TgtRls
     C                   else
     C                   eval      TgtRls = getCurrentRelease()
     C                   endif
      *
     C                   exsr      srValidate                                   make sure exist
      *
      * Set user selected library *first for remainder of program
     C                   eval      bldexc = 'RMVLIBLE LIB('+
     C                             %trimr(ParseSrcLib) + ')'
     C                   callp(e)  qcmdexc(bldexc:%len(%trimr(bldexc)))
      *
     C                   eval      bldexc = 'ADDLIBLE LIB('+
     C                             %trimr(ParseSrcLib) + ') POSITION(*FIRST)'
     C                   callp(e)  qcmdexc(bldexc:%len(%trimr(bldexc)))
      *
      *       CPF2103 - Library &1 already exists in library list.
     C                   if        %error and sds_msgID <> 'CPF2103'
     C                   eval      qm_msgtxt = '0000 ' + sds_msgText
     C                   exsr      srKill
     C                   endif
      *
      * Set variable &TOLIB
     C                   callp     setVariable('tolib': ParseSrcLib)
      *
      * Set variable &TGTRLS
     C                   callp     setVariable('tgtrls': TgtRls)
      *
      * Set variable &XMLFILE
     C                   callp     setVariable('xmlfile': ParseSrcFile)
      *
      * Set variable &XMLLIB
     C                   callp     setVariable('xmllib': ParseSrcFile)
      *
      * Set variable &XMLMBR
     C                   callp     setVariable('xmlmbr': ParseSrcFile)
      *
      * Override Input file to uploaded text file
     C                   eval      bldexc = 'OVRDBF FILE(XMLINPUT) TOFILE(' +
     C                             %trimr(ParseSrcLib)+'/'+
     C                             %trimr(ParseSrcFile) + ') MBR(' +
     C                             %trimr(ParseSrcMbr) + ')'
     C                   callp     qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   open      xmlinput
     C                   read      xmlinput
     C                   dow       not %eof
      * write records to outfile if flag is on
     C                   select
     C                   when      write_flag = *on
     C                   if        xmltag2<>'</copysrc>'
     C                   eval      srcSeqno=srcSeqno+1
     C                   except    write_one
     C                   else
     C                   eval      write_flag=*off
     C                   close     qxxxsrc
     C                   endif
      *
      * Extract values based on xml tags.
     C                   when      xmltag1 = 'mbrname ='
     C                   eval      mbrname = %subst(xmlcode:13:10)
     C                   when      xmltag1 = 'mbrtype ='
     C                   eval      mbrtype =%subst(xmlcode:13:10)
     C                   when      xmltag1 = 'mbrtext ='
     C                   eval      mbrtext =dblQuotes(%subst(xmlcode:13:50))
     C                   when      xmltag1 = 'srcfile ='
     C                   if        OvrSrcFile <> ''
     C                   eval      srcfile =OvrSrcFile
     C                   else
     C                   eval      srcfile =%subst(xmlcode:13:10)
     C                   endif
     C                   when      xmltag1 = 'srclen  ='
     C                   eval      srclen  =%subst(xmlcode:13:5)
     C                   when      xmltag1 = 'srccssid='
     C                   eval      srccssid=%subst(xmlcode:13:5)
      *--------------------------------------------------------------------
      * Start of data to copy.  Create source files/mbrs as required.
      *--------------------------------------------------------------------
     C                   when      xmltag1='<copysrc>'
     C                   move      srclen        srclenN
      * crtsrcpf
     C                   eval      bldexc = 'CRTSRCPF FILE(' +
     C                             %trimr(ParseSrcLib)+'/'+
     C                             %trimr(srcfile) + ') RCDLEN(' +
     C                             srclen + ') CCSID(' +
     C                             srccssid + ')'
     C                   callp(e)  qcmdexc(bldexc:%len(%trimr(bldexc)))
      * addpfm
     C                   eval      bldexc = 'ADDPFM   FILE(' +
     C                             %trimr(ParseSrcLib)+'/'+
     C                             %trimr(srcfile) + ') MBR(' +
     C                             %trimr(mbrname) + ') SRCTYPE(' +
     C                             %trimr(mbrtype) + ') TEXT(' +
     C                             qs+%trimr(mbrtext)+qs + ')'
     C                   callp(e)  qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   if        %error
      * chgpfm
     C                   eval      bldexc = 'CHGPFM   FILE(' +
     C                             %trimr(ParseSrcLib)+'/'+
     C                             %trimr(srcfile) + ') MBR(' +
     C                             %trimr(mbrname) + ') TEXT(' +
     C                             qs+%trimr(mbrtext)+qs + ')'
     C                   callp     qcmdexc(bldexc:%len(%trimr(bldexc)))
      * clr mbr
     C                   eval      bldexc = 'CLRPFM   FILE(' +
     C                             %trimr(ParseSrcLib)+'/'+
     C                             %trimr(srcfile) + ') MBR(' +
     C                             %trimr(mbrname) + ')'
     C                   callp     qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   endif
      * ovr to outfile mbr
     C                   eval      bldexc = 'OVRDBF QXXXSRC ' +
     C                             %trimr(ParseSrcLib) + '/' +
     C                             %trimr(srcfile) + ' ' +
     C                             mbrname
     C                   callp     qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   clear                   srcSeqno
     C                   open      qxxxsrc
     C                   eval      write_flag = *on
      *--------------------------------------------------------------------
      * Compile statement.  Read next record and execute it.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<compile '
     C                   eval      condList= getAttrData('condition':xmlcode:'')
     C                   read      xmlinput
     C                   eval      bldexc = readElement('compile')
     C                   if        isCondition(condList)
     C                   exsr      RplVars
     C                   exsr      SetTgtRls
     C                   callp     qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   endif
      *--------------------------------------------------------------------
      * qcmdexc statement. Build statement from each record between start
      * and stop tags.  When stop tag is found, execute statement.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<qcmdexc '
     C                   eval      condList = getAttrData('condition'
     C                                                    :xmlcode:'')
     C                   eval      release  = getAttrData('release'
     C                                                    :xmlcode:'*CURRENT')
     C                   eval      dltsplf  = getAttrData('dltsplf'
     C                                                    :xmlcode:'*NONE')
     C                   read      xmlinput
     C                   eval      bldexc = readElement('qcmdexc')
     C                   if        isCondition(condList) and
     C                             isRelease(tgtRls: release)
     C                   exsr      RplVars
     C                   exsr      SetTgtRls
     C                   if        %subst(bldexc: 1: 3) = 'DLT'
     C                   callp (e) qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   else
     C                   callp (e) qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   if        %error()
     C                   eval      qm_msgtxt = '0000 Failed to execute: '+bldexc
     C                   exsr      srKill
     C                   endif
     C                   if        dltsplf <> '' and dltsplf <> '*NONE'
     C                   eval      bldexc = 'DLTSPLF FILE(' + dltsplf +
     C                                      ') JOB(*) SPLNBR(*LAST)'
     C                   callp (e) qcmdexc(bldexc:%len(%trimr(bldexc)))
     C                   endif
     C                   endif
     C                   endif
      *--------------------------------------------------------------------
      * SQL statement. Build statement from each record between start
      * and stop tags.  When stop tag is found, execute SQL statement.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<execsql '
     C                   eval      condList = getAttrData('condition'
     C                                                    :xmlcode:'')
     C                   read      xmlinput
     C                   eval      bldexc = readElement('execsql')
     C                   if        isCondition(condList)
     C                   exsr      RplVars
     C                   exsr      srSQLExecute
     C                   endif
      *--------------------------------------------------------------------
      * Send messages to user as program executes
      * Extract message ID, Message Type, from <sendmsg>
      * read a record and get the single line of message text.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<sendmsg '
     C                   eval      qm_msgid = %subst(xmlcode:22:7)
     C                   eval      qm_msgtyp = %subst(xmlcode:46:10)
     C                   read      xmlinput
     C                   eval      qm_msgq   = '*EXT   '
     C                   eval      qm_msgtxt = xmlcode
     C                   exsr      srSndMessage
      *--------------------------------------------------------------------
      * rtvobjd statement. retrieve object description of the specified
      * object. Store attributes in specified fields.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<rtvobjd '
     C                   eval      condList = getAttrData('condition'
     C                                                    :xmlcode:'')
     C                   eval      bldexc = readElement('rtvobjd')
     C                   eval      objd_obj    =getAttrData('obj'    :bldexc:'')
     C                   eval      objd_lib    =getAttrData('lib'    :bldexc:'')
     C                   eval      objd_objtype=getAttrData('objtype':bldexc:'')
     C                   eval      objd_rtnlib =getAttrData('rtnlib' :bldexc:'')
     C                   if        isCondition(condList)
     C                   exsr      srRtvObjD
     C                   endif
      *--------------------------------------------------------------------
      * chgvar statement.
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<chgvar  '
     C                   eval      condList = getAttrData('condition'
     C                                                    :xmlcode:'')
     C                   eval      bldexc = readElement('chgvar')
     C                   eval      var_name  = getAttrData('var'    :bldexc:'')
     C                   eval      var_value = getAttrData('value'  :bldexc:'')
     C                   if        isCondition(condList)
     C                   exsr      srChgVar
     C                   endif
      *--------------------------------------------------------------------
      * Query condition
      *--------------------------------------------------------------------
     C                   when      xmltag1 = '<qrycond '
     C                   eval      bldexc = readElement('qrycond')
     C                   eval      cnd_msg = getAttrData('msg'   : bldexc: '')
     C                   eval      cnd_values = getAttrData('values': bldexc:'')
     C                   eval      cnd_var = getAttrData('var': bldexc: '*NONE')
     C                   exsr      srQueryCond
     C                   endsl
      *
     C                   read      xmlinput
     C                   enddo
      *
     C                   exsr      srSQLEnd
     C                   eval      *inlr=*on
     C                   return
      *--------------------------------------------------------------------
      * Replace variable names with their associated values.
      *--------------------------------------------------------------------
     C     RplVars       begsr
     C                   eval      aa=%scan('&':bldexc)
     C                   dow       aa>0
     C                   eval      var_name=getVarName(bldexc:aa)
     C                   eval      var_value=getVarValue(var_name)
     C                   eval      bldexc=%replace(var_value:bldexc:aa
     C                                             :%len(var_name))
     C                   eval      aa=%scan('&':bldexc)
     C                   enddo
     C                   endsr
      *--------------------------------------------------------------------
      * Sets the target release according to the optional parameter
      * i_TgtRls.
      *--------------------------------------------------------------------
     C     SetTgtRls     begsr
     C                   if        TgtRls = getCurrentRelease()
     C                   leavesr
     C                   endif
     C                   eval      bldexc =
     C                                setTargetRelease('TGTRLS': bldexc: TgtRls)
     C                   endsr
      *--------------------------------------------------------------------
      * Check of file, lib, member exist.
      *--------------------------------------------------------------------
     C     srValidate    begsr
     C                   callp     QUSRMBRD(
     C                             vrcvar:
     C                             145:
     C                             'MBRD0100':
     C                             ParseSrcFile + ParseSrcLib:
     C                             ParseSrcMbr:
     C                             '0':
     C                             errCode)
      *   --------------------------------------------------------------------------------
      *   If error occurred on call, send appropriate message back to user.
      *   ---------------------------------------------------------------------------------
     C                   if        errCode_bytAvl <> 0                          error occurred
     C                   select
      * lib not found
     C                   when      errCode_excID = 'CPF9810'
     C                   eval      qm_msgtxt = '0000 Library ' +
     C                             %trimr(ParseSrcLib) + ' was not found.'
      * src file not found
     C                   when      errCode_excID = 'CPF9812'
     C                   eval      qm_msgtxt = '0000 Source file ' +
     C                             %trimr(ParseSrcFile)+' was not found in ' +
     C                             %trimr(ParseSrcLib) + '.'
      * member not found
     C                   when      errCode_excID = 'CPF9815'
     C                   eval      qm_msgtxt = '0000 Member ' +
     C                             %trimr(ParseSrcMbr)+' was not found in ' +
     C                             %trimr(ParseSrcLib)+'/'+ %trimr(ParseSrcFile)
      * unexpected
     C                   other
     C                   eval      qm_msgtxt = '0000 Unexpected message ' +
     C                             errCode_excID + ' received. '
     C                   endsl
      * send message
     C                   exsr      srKill
     C                   eval      *inlr=*on
     C                   return
     C                   endif
     C                   endsr
      *--------------------------------------------------------------------
      * kill application
      *--------------------------------------------------------------------
     C     srKill        begsr
     C                   eval      qm_msgid  = 'CPD0006'
     C                   eval      qm_msgtyp = '*DIAG'
     C                   eval      qm_msgq   = '*CTLBDY'
     C                   exsr      srSndMessage
     C                   eval      qm_msgtxt = *blanks
     C                   eval      qm_msgid  = 'CPF0002'
     C                   eval      qm_msgtyp = '*ESCAPE'
     C                   exsr      srSndMessage
     C                   endsr
      *--------------------------------------------------------------------
      * call send program message api
      *--------------------------------------------------------------------
     C     srSndMessage  begsr
     C                   callp     QMHSNDPM(
     C                             qm_msgid:
     C                             'QCPFMSG   *LIBL     ':
     C                             qm_msgtxt:
     C                             %size(qm_msgtxt):
     C                             qm_msgtyp:
     C                             qm_msgq:
     C                             1:
     C                             '    ':
     C                             errCode)
     C                   endsr
      *--------------------------------------------------------------------
      * retrieve object description and store attributes
      *--------------------------------------------------------------------
     C     srRtvObjD     begsr
     C                   callp     QUSROBJD(objd0100
     C                                      : %size(objd0100)
     C                                      : 'OBJD0100'
     C                                      : objd_obj + objd_lib
     C                                      : objd_objtype
     C                                      : errCode)
     C                   if        errCode_bytAvl <> 0                          error occurred
     C                   eval      qm_msgtxt = '0000 Failed to retrieve +
     C                             object description of object ' +
     C                             %trim(objd_lib) + '/' + %trim(objd_obj) +
     C                             ' type ' + %trim(objd_objtype) + '.'
      * send message
     C                   exsr      srKill
     C                   else
     C                   callp     setVariable(objd_rtnlib: od_rtnlib)
     C                   endif
     C                   endsr
      *--------------------------------------------------------------------
      * change variable
      *--------------------------------------------------------------------
     C     srChgVar      begsr
     C                   callp     setVariable(var_name: var_value)
     C                   endsr
      *--------------------------------------------------------------------
      * execute SQL statement.
      *--------------------------------------------------------------------
     C     srSQLExecute  begsr
     C                   exsr      srSQLInit
     C                   Eval      retCode = SQLExecDirect(hstmt    :
     C                                                     bldexc   :
     C                                                     SQL_NTS  )
     C                   endsr
      *--------------------------------------------------------------------
      * query condition.
      *--------------------------------------------------------------------
     C     srQueryCond   begsr
     C                   if        isPreDefCond = *off
     C                   eval      cnd_values = uCase(cnd_values)
     C                   dou       (%scan(cnd_rtnVal: cnd_values) > 0) and
     C                             (cnd_rtnval <> ''                 )
     C                   eval      cnd_rtnval = ' '
     C     cnd_msg       dsply                   cnd_rtnval
     C                   eval      cnd_rtnVal = uCase(cnd_rtnVal)
     C                   enddo
     C                   eval      cnd_ptr = cnd_ptr + 1
     C                   eval      cnd_array(cnd_ptr) = cnd_rtnVal
     C                   endif
     C                   if        (cnd_var <> '*NONE')
     C                   callp     setVariable(cnd_var: cnd_rtnval)
     C                   endif
     C                   endsr
      *--------------------------------------------------------------------
      * initialize SQL.
      *--------------------------------------------------------------------
     C     srSQLInit     begsr
      *
     C                   if        sqlInit = *off
     C                   Eval      retCode = SQLAllocEnv(%addr(henv))
     C                   Eval      retCode = SQLAllocConnect(henv: %addr(hdbc))
     C                   Eval      retCode = SQLConnect(hdbc      :
     C                                                  '*LOCAL'  :
     C                                                  SQL_NTS   :
     C                                                  *null     :
     C                                                  SQL_NTS   :
     C                                                  *null     :
     C                                                  SQL_NTS   )
     C                   Eval      cOptVal = SQL_COMMIT_NONE
     C                   Eval      retCode = SQLSetConnectOption(hdbc          :
     C                                                          SQL_ATTR_COMMIT:
     C                                                          %addr(cOptVal) )
     C                   Eval      retCode = SQLAllocStmt(hdbc       :
     C                                                  %addr(hstmt) )
     C                   eval      sqlInit = *on
     C                   endif
     C                   endsr
      *--------------------------------------------------------------------
      * end SQL.
      *--------------------------------------------------------------------
     C     srSQLEnd      begsr
     C                   if        sqlInit = *on
     C                   Eval      retCode = SQLFreeStmt(hstmt    :
     C                                                   SQL_DROP )
     C                   Eval      retCode = SQLDisconnect(hdbc)
     C                   Eval      retCode = SQLFreeConnect(hdbc)
     C                   Eval      retCode = SQLFreeEnv(henv)
     C                   eval      sqlInit = *off
     C                   endif
     C                   endsr
      *--------------------------------------------------------------------
      * error handler
      *--------------------------------------------------------------------
     C     *pssr         begsr
     C                   if        errFLag = *off
     C                   eval      errFlag = *on
     C                   exsr      srSQLEnd
     C                   endif
     C                   endsr     '*CANCL'
     Oqxxxsrc   e            write_one
     O                       srcSeqno             6
     O                                           12 '000000'
     O                       xmlcode            112
      *--------------------------------------------------------------------
      * Read element
      *--------------------------------------------------------------------
     P readElement...
     P                 B
     D                 PI                        like(bldexc)
     D  i_element                     9A   value varying
      *
     D i               S             10I 0 inz
     D value           S                   like(bldexc ) inz
     D endTag          S                   like(xmlTag2) inz
      *
     C                   eval      i = 1
     C                   eval      endTag = '</' + i_element + '>'
     C                   dow       xmltag2 <> endTag
     C                   eval      %subst(value: i: %len(xmlcode)) = xmlcode
     C                   eval      i = i + %len(xmlcode)
     C                   read      xmlinput
     C                   enddo
      *
     C                   Return    value
      *
     P                 E
      *--------------------------------------------------------------------
      * Double quotes
      *--------------------------------------------------------------------
     P dblQuotes...
     P                 B
     D                 PI          2048A         varying
     D  i_string                   2048A   value varying
      *
     D x               S             10I 0         inz
     D string          S           2048A   varying inz
      *
     C                   For       x = 1 to %len(i_string)
     C                   Eval      string = string + %subst(i_string: x:1)
     C                   If        %subst(i_string: x : 1) = qs
     C                   Eval      string = string + qs
     C                   Endif
     C                   Endfor
      *
     C                   Return    string
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Get Attribute Data from String
      *---------------------------------------------------------------------------------------------
     P getAttrData...
     P                 B
     D                 PI          2000A          varying                       like(string_t)
     D  i_attr                       10a   value
     D  i_string                   2000A   value  varying                       like(string_t)
     D  i_default                  2000A   value  varying                       like(string_t)
      *
      *  return value
     D attrData        S           2000A   varying inz                          like(string_t)
      *
      *  local fields
     D attr            S             20a   varying inz
     D lenAttr         S             10i 0 inz
     D aa              S             10i 0 inz
     D cc              S             10i 0 inz
      *
     D Qd              C                   const('"')
      *-------------------------------------------------------------------*
      *
      *  find the keyword
     C                   eval      attr = %trim(i_attr) + '=' + Qd
      *
     C                   eval      aa   = %scan(attr: i_string)
     C                   if        aa = 0
     C                   return    i_default
     C                   endif
      *
     C                   eval      aa   = aa + %len(attr)
     C                   eval      cc   = %scan(Qd: i_string: aa+1)
      *
      *  return the data between the double-quotes
     C                   if        (cc-aa) > 0
     C                   eval      attrData = %subst(i_string: aa: cc-aa)
     C                   endif
      *
     C                   Return    attrData
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Load condition array
      *---------------------------------------------------------------------------------------------
     P loadConditions...
     P                 B
     D                 PI                  dim(32) like(condition)
     D  i_conditions                128A   value
      *
      *  return value
     D cnd_array       s                   dim(32) inz like(condition)
     D pValue          s               *   inz
     D x               s             10i 0 inz
     D i               s             10i 0 inz
     D cnd_value       s            128a   varying
     D var_name        s             64a   varying
     D var_value       s             64a   varying
      *-------------------------------------------------------------------*
      /FREE

         i_conditions = uCase(i_conditions);

         pValue = strtok(i_conditions: ';');
         dow (pValue <> *null);
            x = x + 1;
            cnd_value = %str(pValue);
            i = %scan('=': cnd_value);
            if (i = 0);
               cnd_array(x) = cnd_value;
            else;
               var_name = %subst(cnd_value: 1: i-1);
               if (%subst(var_name: 1: 1) = '&');
                  var_name = %subst(var_name: 2);
               endif;
               var_value = %subst(cnd_value: i+1);
               setVariable(var_name: var_value);
               cnd_array(x) = var_value;
            endif;
            pValue = strtok(*null: ';');
         enddo;

         return cnd_array;
      /END-FREE
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Check for a condition
      *---------------------------------------------------------------------------------------------
     P isCondition...
     P                 B
     D                 PI              n
     D  i_condList                 2000A   value
      *
      *  return value
     D isCondition     S               n   inz
     D pValue          S               *   inz
     D aCondition      S             10a   inz
      *-------------------------------------------------------------------*
      *
     C                   eval      i_condList = uCase(i_condList)
      *
     C                   if        (i_condList = '*NONE')  or
     C                             (i_condList = ''     )
     C                   eval      *in01 = *on
     C                   else
      *
     C                   eval      pValue = strtok(i_condList: ' ')
     C                   dow       pValue <> *null
     C                   eval      aCondition = %str(pValue)
     C     aCondition    lookup    cnd_array                              01
     C                   if        not *in01
     C                   leave
     C                   endif
     C                   eval      pValue = strtok(*null     : ' ')
     C                   enddo
      *
     C                   endif
      *
     C                   if        *in01
     C                   eval      isCondition = *on
     C                   else
     C                   eval      isCondition = *off
     C                   endif
      *
     C                   Return    isCondition
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Get the current release level of the operation system
      *---------------------------------------------------------------------------------------------
     P getCurrentRelease...
     P                 B
     D                 PI            10A
      *
      *  QSZRTVPR API
     D QSZRTVPR...
     D                 PR                  extpgm('QSZRTVPR')
     D  o_rcvVar                  65535A          options(*varsize)
     D  i_lenRcvVar                  10I 0 const
     D  i_format                      8A   const
     D  o_prodInf                 65535A   const  options(*varsize)
     D  io_errCode                65535A          options(*varsize)
      *
     D prdi0100        DS                  qualified
     D  productID              1      7A   inz('*OPSYS')
     D  releaseLvl             8     13A   inz('*CUR'  )
     D  productOpt            14     17A   inz('0000'  )
     D  loadID                18     27A   inz('*CODE' )
      *  Shortened!:
     D prdr0100        DS                  qualified
     D  bytRet                 1      4I 0
     D  bytAvl                 5      8I 0
     D  reserved_1             9     12I 0
     D  productID             13     19A
     D  releaseLvl            20     25A
      *  API error code
     D errCode         DS
     D  bytPrv                       10i 0 inz(0)
     D  bytAvl                       10i 0 inz(0)
      *-------------------------------------------------------------------*
      *
     C                   Callp     QSZRTVPR(prdr0100: %size(prdr0100):
     C                                      'PRDR0100': prdi0100: errCode)
     C                   Return    prdr0100.releaseLvl
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Check the release level
      *---------------------------------------------------------------------------------------------
     P isRelease...
     P                 B
     D                 PI              n
     D  i_os_release                  6A   value
     D  i_release                    10A   value
      *
      *  return value
     D isRelease       S               n   inz(*off)
      *  Release
     D release         DS
     D  r_operator             1      3a
     D  r_space                4      4a
     D  r_level                5     10a
      *-------------------------------------------------------------------*
      *
     C                   If        i_release = '*CURRENT'
     C                   Eval      isRelease = *on
     C                   Else
     C                   Eval      release = i_release
     C                   Select
     C                   When      r_operator = '*LT' and
     C                             i_os_release < r_level
     C                   Eval      isRelease = *on
     C                   When      r_operator = '*EQ' and
     C                             i_os_release = r_level
     C                   Eval      isRelease = *on
     C                   When      r_operator = '*GT' and
     C                             i_os_release > r_level
     C                   Eval      isRelease = *on
     C                   When      r_operator = '*LE' and
     C                             i_os_release <= r_level
     C                   Eval      isRelease = *on
     C                   When      r_operator = '*GE' and
     C                             i_os_release >= r_level
     C                   Eval      isRelease = *on
     C                   Other
     C                   Eval      isRelease = *off
     C                   Endsl
     C                   Endif
      *
     C                   Return    isRelease
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Replaces the value of a given keyword.
      *---------------------------------------------------------------------------------------------
     P setTargetRelease...
     P                 B
     D                 PI          2000A          varying
     D  i_keyword                    10A   value  varying
     D  i_string                   2000A   value  varying
     D  i_value                      10A   value  varying
      *
      *  return value
     D string          S           2000A   varying inz
      *
      *  helper fields
     D x               S             10I 0 inz
     D l               S             10I 0 inz
     D tmpKeyword      S                   like(i_keyword) inz
     D tmpString       S                   like(i_string ) inz
     D tmpCmd          S             10A   inz
      *-------------------------------------------------------------------*
      /FREE

         tmpKeyword = uCase(%trimR(i_keyword));
         tmpString  = uCase(%trimR(i_string ));
         x = %scan(' ': tmpString);
         if x = 0;
            return i_string;
         endif;
         tmpCmd = %subst(tmpString: 1: x);
         if tmpCmd <> 'CRTRPGMOD' and
            tmpCmd <> 'CRTRPGPGM' and
            tmpCmd <> 'CRTCLMOD'  and
            tmpCmd <> 'CRTCLPGM'  and
            tmpCmd <> 'CRTCBLMOD' and
            tmpCmd <> 'CRTCBLPGM' and
            tmpCmd <> 'CRTCMOD'   and
            tmpCmd <> 'CRTCPPMOD' and
            tmpCmd <> 'CRTBNDC'   and
            tmpCmd <> 'CRTBNDCBL' and
            tmpCmd <> 'CRTBNDCL'  and
            tmpCmd <> 'CRTBNDCPP' and
            tmpCmd <> 'CRTBNDDIR' and
            tmpCmd <> 'CRTBNDRPG' and
            tmpCmd <> 'CRTPGM'    and
            tmpCmd <> 'CRTSRVPGM' ;
            return i_string;
         endif;
         x = %scan(tmpKeyword + '(': tmpString);
         if x = 0;
            return %trimR(i_string) +
                   ' ' + tmpKeyword + '(' + %trimR(i_value) + ')';
         endif;
         l = %scan(')': tmpString: x + %len(i_keyword) + 1);
         if l = 0;
            return i_string;
         endif;
         l = l - x + 1;
         string = %replace(tmpKeyword + '(' + %trimR(i_value) + ')'
                           : i_string: x: l);
         Return string;

      /END-FREE
     P                 E
      *---------------------------------------------------------------------------------------------
      *  Store field value.
      *---------------------------------------------------------------------------------------------
     P setVariable...
     P                 B
     D                 PI
     D  i_fldName                    10A   value  varying
     D  i_value                      64A   value  varying
     D i               s             10I 0 inz
      *-------------------------------------------------------------------*
      /FREE

         if (i_fldName = '');
            return;
         endif;

         for i = 1 to fld_x;
            if (uCase('&' + %trim(i_fldName)) = uCase(fld_name(i)));
               fld_value(i) = i_value;
               return;
            endif;
         endfor;

         if (fld_x >= %elem(fld_name));
            return;
         endif;

         fld_x = fld_x + 1;
         fld_name(fld_x)  = uCase('&' + %trim(i_fldName));
         fld_value(fld_x) = i_value;

      /END-FREE
     P                 E
      *---------------------------------------------------------------------------------------------
      *  get variable name from statement.
      *---------------------------------------------------------------------------------------------
     P getVarName...
     P                 B
     D                 PI            11a          varying
     D  i_bldexc                           value  like(bldexc)
     D  i_pos                        10i 0 value
     D name            s             11a   varying inz
     D CHARS           c                   '&ABCDEFGHIJKLMNOPQRSTUVWXYZ+
     D                                      abcdefghijklmnopqrstuvwxyz+
     D                                      1234567890_'
      *-------------------------------------------------------------------*
      /FREE

         dow (i_pos<=%len(i_bldexc) and
              %check(CHARS:%subst(i_bldexc:i_pos:1))=0);
            name = name+%subst(i_bldexc:i_pos:1);
            i_pos=i_pos+1;
         enddo;

         return name;

      /END-FREE
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  get variable value.
      *---------------------------------------------------------------------------------------------
     P getVarValue...
     P                 B
     D                 PI            64a          varying
     D  i_name                       11a   value  varying
     D i               s             10i 0 inz
     D value           s             64a   varying inz('?')
      *-------------------------------------------------------------------*
      /FREE

         for i=1 to fld_x;
            if (ucase(fld_name(i))=uCase(i_name));
               value=%trimR(fld_value(i));
               leave;
            endif;
         endfor;

         return value;

      /END-FREE
      *
     P                 E
      *---------------------------------------------------------------------------------------------
      *  convert to upper case
      *---------------------------------------------------------------------------------------------
     P uCase...
     P                 B
     D                 PI          2000A          varying
     D  i_string                   2000A   value  varying
     D uCase           s           2000A   inz varying
     D LC              C                   const('abcdefghijklmnopqrstuvwxyz')
     D UC              C                   CONST('ABCDEFGHIJKLMNOPQRSTUVWXYZ')
      *-------------------------------------------------------------------*
      /FREE

         uCase = %xlate(LC:UC:i_string);

         return uCase;

      /END-FREE
     P                 E
      * /// END   OF INSTALL PGM HERE   ****************************************** ///
      * /// do not copy past this point ///
]]>  </install_program>
<qrycond
  msg="'Select language (GER, ENG)'"
  values="GER        ENG"
  var="LANG">
<![CDATA[
]]>  </qrycond>
<qrycond
  msg="'Default for TAGSREQ(*NO|*YES) Dft: NO'"
  values="NO         YES"
  var="TAGSREQ">
<![CDATA[
]]>  </qrycond>
<chgvar   condition="*NONE" var="SRCFILE" value="QSTRPREPRC">
<![CDATA[
]]>  </chgvar>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing A_INSTALL  type CLLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "A_INSTALL "
mbrtype =  "CLLE      "
mbrtext =  "STRPREPRC - Installer                             "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /* =================================================================== */
     /*                                                                     */
     /*  Documentation:                                                     */
     /*                                                                     */
     /*  Utility . . . : STRPREPRC                                          */
     /*  Object  . . . : A_INSTALL  (PGM)                                   */
     /*  Source member : A_INSTALL                                          */
     /*  Source type . : CLLE                                               */
     /*  Description   : STRPREPRC - Installer                              */
     /*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      */
     /*  Created . . . :                                                    */
     /*                                                                     */
     /* =================================================================== */
     /*                                                                     */
     /*  This software is free software, you can redistribute it and/or     */
     /*  modify it under the terms of the GNU General Public License (GPL)  */
     /*  as published by the Free Software Foundation.                      */
     /*                                                                     */
     /*  See GNU General Public License for details.                        */
     /*          http://www.opensource.org                                  */
     /*          http://www.opensource.org/licenses/gpl-license.html        */
     /*                                                                     */
     /* =================================================================== */
     /*  History:                                                           */
     /*                                                                     */
     /*  Datum       Name          nderung                                 */
     /*  ----------  ------------  ---------------------------------------  */
     /*                                                                     */
     /* =================================================================== */
     /*   >>PRE-COMPILER<<                                                  */
     /*     >>CRTCMD<<    CRTBNDCL  PGM(QTEMP/&OB) +                        */
     /*                             SRCFILE(&SL/&SF) SRCMBR(&SM);           */
     /*     >>IMPORTANT<<                                                   */
     /*       >>PARM<<    OPTION(*EVENTF);                                  */
     /*     >>END-IMPORTANT<<                                               */
     /*     >>EXECUTE<<                                                     */
     /*     >>CMD<<       CALL   PGM(QTEMP/A_INSTALL) +                     */
     /*                          PARM('*CURRENT' '&SF' '&LI' 'GER' 'NO');   */
     /*     >>CMD<<       DLTPGM PGM(QTEMP/A_INSTALL);                      */
     /*   >>END-PRE-COMPILER<<                                              */
     /* =================================================================== */
             PGM        PARM(&TGTRLS &SRCFILE &TOLIB &LNG &TAGSREQ)

             DCL        VAR(&TGTRLS   ) TYPE(*CHAR) LEN(10)
             DCL        VAR(&SRCFILE  ) TYPE(*CHAR) LEN(10)
             DCL        VAR(&TOLIB    ) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LNG      ) TYPE(*CHAR) LEN( 3)
             DCL        VAR(&TAGSREQ  ) TYPE(*CHAR) LEN(10)

             DCL        VAR(&SRCLIB   ) TYPE(*CHAR) LEN(10)

             DCL        VAR(&CRTMSGF  ) TYPE(*CHAR) LEN(10)
             DCL        VAR(&MSGF     ) TYPE(*CHAR) LEN(10) VALUE('STRPREPRC')
             DCL        VAR(&PNLGRP   ) TYPE(*CHAR) LEN(10)
             DCL        VAR(&CMD      ) TYPE(*CHAR) LEN(10)

             DCL        VAR(&CMDSTR   ) TYPE(*CHAR) LEN(500)
             DCL        VAR(&CMDLEN   ) TYPE(*DEC ) LEN(15 5) VALUE(500)

             CHGVAR     VAR(&SRCLIB) VALUE(&TOLIB   )

     /* -------------------------------- */
     /*  Delete old objects              */
     /* -------------------------------- */
             DLTCMD    CMD(&TOLIB/STRPREPRC)
             MONMSG     MSGID(CPF2105)

             DLTPGM    PGM(&TOLIB/STRPREPRC)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC1)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC2)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC3)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC4)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC5)
             MONMSG     MSGID(CPF2105)

             DLTMOD    MODULE(&TOLIB/STRPREPRC6)
             MONMSG     MSGID(CPF2105)

             DLTPNLGRP PNLGRP(&TOLIB/STRPREPRCP)
             MONMSG     MSGID(CPF2105)

             DLTF    FILE(&TOLIB/STRPRE1)
             MONMSG     MSGID(CPF2105)

             DLTF    FILE(&TOLIB/STRPRE2)
             MONMSG     MSGID(CPF2105)

             DLTMSGF    MSGF(&TOLIB/&MSGF)
             MONMSG     MSGID(CPF2105)

             RMVMSG     PGMQ(*SAME (*)) CLEAR(*ALL)

     /* -------------------------------- */
     /*  Create message file             */
     /* -------------------------------- */
             IF         COND(&LNG *EQ 'ENG') THEN(DO)
                CHGVAR     VAR(&CRTMSGF) VALUE('A_MSG_ENG')
                CHGVAR     VAR(&PNLGRP ) VALUE('STRPREPRCQ')
                CHGVAR     VAR(&CMD    ) VALUE('STRPREPRCE')
             ENDDO
             ELSE       CMD(DO)
                CHGVAR     VAR(&CRTMSGF) VALUE('A_MSG_GER')
                CHGVAR     VAR(&PNLGRP ) VALUE('STRPREPRCP')
                CHGVAR     VAR(&CMD    ) VALUE('STRPREPRCG')
             ENDDO

             CRTMSGF    MSGF(&TOLIB/&MSGF) +
                          TEXT('Tool: STRPREPRC  (Start Pre-Processor) Ger')

             CRTCLPGM   PGM(QTEMP/&CRTMSGF) +
                          SRCFILE(&SRCLIB/&SRCFILE) SRCMBR(*PGM) +
                          OPTION(*LSTDBG) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(&CRTMSGF  ) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CALL       PGM(QTEMP/&CRTMSGF) PARM(&TOLIB)
             DLTPGM     PGM(QTEMP/&CRTMSGF)

     /* -------------------------------- */
     /*  Create files                    */
     /* -------------------------------- */
             CRTPF      FILE(&TOLIB/STRPRE1) +
                          SRCFILE(&SRCLIB/&SRCFILE) SRCMBR(STRPRE1) +
                          MAXMBRS(1)
             DLTSPLF    FILE(STRPRE1   ) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTPF      FILE(&TOLIB/STRPRE2) +
                          SRCFILE(&SRCLIB/&SRCFILE) SRCMBR(STRPRE2) +
                          MAXMBRS(1)
             DLTSPLF    FILE(STRPRE2   ) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

     /* -------------------------------- */
     /*  Create modules                  */
     /* -------------------------------- */
             CRTCLMOD MODULE(&TOLIB/STRPREPRC1) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(*MODULE) TEXT(*SRCMBRTXT) +
                          DBGVIEW(*LIST) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC1) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTRPGMOD  MODULE(&TOLIB/STRPREPRC2) +
                          SRCFILE(&SRCLIB/&SRCFILE) SRCMBR(*MODULE) +
                          TEXT(*SRCMBRTXT) DBGVIEW(*LIST) +
                          TRUNCNBR(*NO) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC2) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTRPGMOD MODULE(&TOLIB/STRPREPRC3) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(*MODULE) TEXT(*SRCMBRTXT) +
                          DBGVIEW(*LIST) TRUNCNBR(*NO) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC3) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTRPGMOD MODULE(&TOLIB/STRPREPRC4) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(*MODULE) TEXT(*SRCMBRTXT) +
                          DBGVIEW(*LIST) TRUNCNBR(*NO) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC4) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTRPGMOD MODULE(&TOLIB/STRPREPRC5) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(*MODULE) TEXT(*SRCMBRTXT) +
                          DBGVIEW(*LIST) TRUNCNBR(*NO) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC5) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             CRTRPGMOD MODULE(&TOLIB/STRPREPRC6) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(*MODULE) TEXT(*SRCMBRTXT) +
                          DBGVIEW(*LIST) TRUNCNBR(*NO) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC5) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

     /* -------------------------------- */
     /*  Create programs                 */
     /* -------------------------------- */
             CRTPGM     PGM(&TOLIB/STRPREPRC) +
                          MODULE(&TOLIB/STRPREPRC1  +
                                 &TOLIB/STRPREPRC2  +
                                 &TOLIB/STRPREPRC3  +
                                 &TOLIB/STRPREPRC4  +
                                 &TOLIB/STRPREPRC5  +
                                 &TOLIB/STRPREPRC6) +
                          ENTMOD(&TOLIB/STRPREPRC1) +
                          BNDSRVPGM(&TOLIB/BASICS1  +
                                    &TOLIB/EVENTF   +
                                    &TOLIB/JOBLOG)  +
                          DETAIL(*BASIC)            +
                          ACTGRP(*NEW) +
                          TGTRLS(&TGTRLS)
             DLTSPLF    FILE(STRPREPRC ) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

     /* -------------------------------- */
     /*  Create panel groups             */
     /* -------------------------------- */
             CRTPNLGRP PNLGRP(&TOLIB/STRPREPRCP) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(&PNLGRP)
             DLTSPLF    FILE(STRPREPRCP) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

     /* -------------------------------- */
     /*  Create commands                 */
     /* -------------------------------- */
             CRTCMD     CMD(&TOLIB/STRPREPRC) PGM(&TOLIB/STRPREPRC) +
                          SRCFILE(&SRCLIB/&SRCFILE) +
                          SRCMBR(&CMD) MSGF(&TOLIB/STRPREPRC) +
                          HLPPNLGRP(&TOLIB/STRPREPRCP) +
                          HLPID(STRPREPRC) PRDLIB(&TOLIB)
             DLTSPLF    FILE(&CMD      ) JOB(*) SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)

             IF         COND(&TAGSREQ *EQ 'YES') THEN(DO)
                CHGVAR     VAR(&TAGSREQ) VALUE('*YES')
             ENDDO
             ELSE       CMD(DO)
                CHGVAR     VAR(&TAGSREQ) VALUE('*NO')
             ENDDO

             CHGVAR     VAR(&CMDSTR) +
                          VALUE('CHGCMDDFT +
                                 CMD(' *CAT &TOLIB *TCAT '/STRPREPRC) +
                                 NEWDFT(''TAGSREQ(' *CAT &TAGSREQ *TCAT ')'')')
             CALL       PGM(QCMDEXC) PARM(&CMDSTR &CMDLEN)

     /* -------------------------------- */
     /*  Delete obsolete objects         */
     /* -------------------------------- */
             DLTMOD    MODULE(&TOLIB/STRPREPRC1)
             DLTMOD    MODULE(&TOLIB/STRPREPRC2)
             DLTMOD    MODULE(&TOLIB/STRPREPRC3)
             DLTMOD    MODULE(&TOLIB/STRPREPRC4)
             DLTMOD    MODULE(&TOLIB/STRPREPRC5)
             DLTMOD    MODULE(&TOLIB/STRPREPRC6)

             ENDPGM
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing A_MSG_ENG  type CLP - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "A_MSG_ENG "
mbrtype =  "CLP       "
mbrtext =  "MSG: PRZ0001 - PRZ0027                            "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /*-----------------------------------------------------------------------*/
     /* STRPREPRC Compile Options:                                            */
     /* >>PRE-COMPILER<<                                                      */
     /*   >>CRTCMD<<  CALL       PGM(QTEMP/&OB) PARM(&LI);                    */
     /*   >>CMD<<     CRTBNDCL   PGM(QTEMP/&OB) +                             */
     /*                          SRCFILE(&SL/&SF) SRCMBR(&SM) +               */
     /*               TEXT('Tool: STRPREPRC  (Start Pre-Processor) Eng');     */
     /*   >>EXECUTE<<                                                         */
     /*   >>CMD<<     DLTPGM PGM(QTEMP/&OB);                                  */
     /* >>END-PRE-COMPILER<<                                                  */
     /*-----------------------------------------------------------------------*/
             PGM        PARM(&LIB)

             DCL        VAR(&LIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&OBJ) TYPE(*CHAR) LEN(10) VALUE('STRPREPRC')

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0001                    */
     /* Wrong mode sequence.                                        */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0001) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0001) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Wrong mode sequence.'                                                +
                ) +
                SECLVL( +
'Cause  . . . . . :  It is not possible to  switch from mode &1 to mod-
e &2 directly. Before changing to mode &2 mode &1 must be ended with t-
he corresponding END-xxx tag.'                                        +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 30) +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0002                    */
     /* Execution canceled in line &1.                              */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0002) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0002) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Execution canceled in line &1.'                                      +
                ) +
                SECLVL( +
'Information  . . :  If the line number is 0,00, then the error occure-
d during the creation command was checked.'                           +
                ) +
                SEV(50) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0003                    */
     /* Parameter tags are not allowed in mode &1.                  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0003) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0003) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter tags are not allowed in mode &1.'                          +
                ) +
                SEV(0) +
                FMT( +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0004                    */
     /* The tag &1 is not allowed outside mode &2.                  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0004) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0004) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'The tag &1 is not allowed outside mode &2.'                          +
                ) +
                SEV(0) +
                FMT( +
                    (*CHAR 30) +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0005                    */
     /* Unkown continuation character &1 in line &2.                */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0005) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0005) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Unkown continuation character &1 in line &2.'                        +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0006                    */
     /* End of keyword &1 not found.                                */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0006) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0006) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'End of keyword &1 not found.'                                        +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0007                    */
     /* Creation command too long.                                  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0007) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0007) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Creation command too long.'                                          +
                ) +
                SECLVL( +
'Information  . . :  The maximum length of the creation command is  &1-
 byte.'                                                               +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0008                    */
     /* The end-of-line character could not be found.               */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0008) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0008) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'The end-of-line character could not be found.'                       +
                ) +
                SECLVL( +
'Recovery . . . . :  Add an end-of-line character in line &1.&N &N Val-
id end-of-line characters are: &B &B '';'' = End-of-line &B ''+'' = co-
ntinuation without blanks &B ''-'' = Continuation with blanks.'       +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0009                    */
     /* Unknown continuation character "&1".                        */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0009) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0009) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Unknown continuation character "&1".'                                +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0010                    */
     /* Mode for tag &1 not defined.                                */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0010) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0010) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Mode for tag &1 not defined.'                                        +
                ) +
                SECLVL( +
'Recovery . . . . :  Define a mode for tag &1 inthe internal functiono-
 f_tagToMode.'                                                        +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0011                    */
     /* Record length of source file exceeds maximum.               */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0011) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0011) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Record length of source file exceeds maximum.'                       +
                ) +
                SECLVL( +
'Cause  . . . . . :  The record length of file &3/&4 is &1 yyte. The m-
aximum record length is &2 byte. &N Recovery . . . . :   Reduce the re-
cord length of the source file.'                                      +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*DEC 10 0) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0012                    */
     /* Error when opening source file &2/&1, source member &3.     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0012) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0012) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Error when opening source file &2/&1, source member &3.'             +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0013                    */
     /* Error when opening control file &2/&1, member &3.           */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0013) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0013) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Error when opening control file &2/&1, member &3.'                   +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0014                    */
     /* Missing creation command.                                   */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0014) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0014) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Missing creation command.'                                           +
                ) +
                SECLVL( +
'Cause  . . . . . :  There was no creation command passed to STRPREPRC-
 and there is no >>CRTCMD<< tag in the source member. &N Recovery . . -
. . :  Pass a creation command to STRPREPRC or add a >>CRTCMD<< tag to-
 the source file.'                                                    +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0015                    */
     /* Error in the creation command. Execution ended in error.    */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0015) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0015) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Error in the creation command. Execution ended in error.'            +
                ) +
                SECLVL( +
'Creation command :  &1'                                              +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 512) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0016                    */
     /* Parameter 'OBJSRCFILE' not allowed if CHGOBJD(*NO) has been */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0016) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0016) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter ''OBJSRCFILE'' not allowed if CHGOBJD(*NO) has been specifi-
ed.'                                                                  +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0017                    */
     /* Parameter 'OBJSRCLIB' not allowed if CHGOBJD(*NO) has been  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0017) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0017) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter ''OBJSRCLIB'' not allowed if CHGOBJD(*NO) has been specifie-
d.'                                                                   +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0018                    */
     /* Parameter 'OBJSRCMBR' not allowed if CHGOBJD(*NO) has been  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0018) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0018) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter ''OBJSRCMBR'' not allowed if CHGOBJD(*NO) has been specifie-
d.'                                                                   +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0019                    */
     /* Parameter 'OBJTYPE' not allowed if CHGOBJD(*NO) has been sp */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0019) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0019) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter ''OBJTYPE'' not allowed if CHGOBJD(*NO) has been specified.-
'                                                                     +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0020                    */
     /* Parameter 'OBJTYPE' must be entered if CHGOBJD(*YES) has be */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0020) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0020) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameter ''OBJTYPE'' must be entered if CHGOBJD(*YES) has been speci-
fied.'                                                                +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0021                    */
     /* Command CHGOBJDA not found.                                 */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0021) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0021) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Command CHGOBJDA not found.'                                         +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0022                    */
     /* Execution canceled. See joblog for details.                 */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0022) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0022) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Execution canceled. See joblog for details.'                         +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0023                    */
     /* Missing value for replacement variable at position &1 of co */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0023) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0023) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Missing value for replacement variable at position &1 of command stri-
ng.'                                                                  +
                ) +
                SECLVL( +
'Creation command :  &2'                                              +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*CHAR 512) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0024                    */
     /* No Pre-Compiler instructions found in source file &2/&1, so */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0024) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0024) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'No Pre-Compiler instructions found in source file &2/&1, source membe-
r &3.'                                                                +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0025                    */
     /* Could not open EVFEVENT file in library &1 or job log.      */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0025) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0025) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Could not open EVFEVENT file in library &1 or job log.'              +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0026                    */
     /* Could not prepare the event file.                           */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0026) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0026) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Could not prepare the event file.'                                   +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0027                    */
     /* When option '*EVENTF' is specified, parameters LIB() and OB */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0027) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0027) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'When option ''*EVENTF'' is specified, parameters LIB() and OBJ() must-
 be specified, too.'                                                  +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0028                    */
     /* Object creation command not found in member &3 of file &2/& */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0028) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0028) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Object creation command not found in member &3 of file &2/&1.'       +
                ) +
                SECLVL( +
'Cause  . . . . . :  The source member does not contain pre-compiler t-
ags and no creation command had been specified at parameter ''Creation-
 command'' (CMD).'                                                    +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0029                    */
     /* &1                                                          */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0029) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0029) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'&1'                                                                  +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0030                    */
     /* Option *ADDJOBLOG can only be used in conjunction with *EVE */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0030) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0030) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Option *ADDJOBLOG can only be used in conjunction with *EVENTF.'     +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0031                    */
     /* Invalid INCLUDE tag found in line &1.                       */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0031) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0031) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Invalid INCLUDE tag found in line &1.'                               +
                ) +
                SECLVL( +
'Cause  . . . . . :  Either the file or der member name is missing. Th-
e expected format is: &P >>INCLUDE<< [Library]/File Member;'          +
                ) +
                SEV(30) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0032                    */
     /* Nested INCLUDE tag found in line &4 of file &2/&3, member & */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0032) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0032) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Nested INCLUDE tag found in line &4 of file &2/&3, member &3.'       +
                ) +
                SECLVL( +
'Cause  . . . . . :  Nested INCLUDE tags are not allowed.'            +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0033                    */
     /* STRPREPRC: Object created.                                  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0033) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0033) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'STRPREPRC: Object created.'                                          +
                ) +
                SEV(10) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0034                    */
     /* STRPREPRC: Error message &1 ignored due to MONMSG.          */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0034) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0034) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'STRPREPRC: Error message &1 ignored due to MONMSG.'                  +
                ) +
                SEV(10) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0035                    */
     /* Library &1 not found.                                       */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0035) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0035) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Library &1 not found.'                                               +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0036                    */
     /* File &1 in library &2 not found.                            */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0036) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0036) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'File &1 in library &2 not found.'                                    +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0037                    */
     /* Member &3 file &1 in library &2 not found.                  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0037) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0037) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Member &3 file &1 in library &2 not found.'                          +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0038                    */
     /* The USESRCFILE and USESRCMBR parameters cannot be specified */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0038) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0038) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'The USESRCFILE and USESRCMBR parameters cannot be specified with the -
USESRCSTMF parameter.'                                                +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0039                    */
     /* Either USESRCFILE and USESRCMBR or USESRCSTMF must be speci */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0039) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0039) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Either USESRCFILE and USESRCMBR or USESRCSTMF must be specified.'    +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0040                    */
     /* Value *DFT is not allowed for SRCFILE, SRCLIB and SRCMBR wh */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0040) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0040) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Value *DFT is not allowed for SRCFILE, SRCLIB and SRCMBR when USESRCS-
TMF is specified.'                                                    +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0041                    */
     /* Unable to open file &1.                                     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0041) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0041) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Unable to open file &1.'                                             +
                ) +
                SECLVL( +
'Cause  . . . . . :  &2 - &3'                                         +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 512) +
                    (*CHAR 10) +
                    (*CHAR 50) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0042                    */
     /* Record length of IFS source file exceeds maximum.           */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0042) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0042) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Record length of IFS source file exceeds maximum.'                   +
                ) +
                SECLVL( +
'Cause  . . . . . :  The record length of file &3/&4 is &1 byte. The m-
aximum record length is &2 byte. &N Recovery   . . . :  Select an inpu-
t file whose record length does not exceed &2 byte. &N File . . . . . -
. :  &4 &N Folder . . . . . :  &3'                                    +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*DEC 10 0) +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0043                    */
     /* Stream file not found: &1                                   */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0043) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0043) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Stream file not found &1.'                                           +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0044                    */
     /* Object creation command not found in stream file: &2        */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0044) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0044) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Object creation command not found in stream file: &2'                +
                ) +
                SECLVL( +
'Recovery   . . . :  Add object creation command. &N File . . . . . . -
:  &2 &N Folder . . . . . :  &1'                                      +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0045                    */
     /* Keine Pre-Compiler Anweisungen in Quellendatei &2           */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0045) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0045) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'No Pre-Compiler instructions found in source file &2'                +
                ) +
                SECLVL( +
'Recovery . . . . :  Add pre-compiler instructions. &N File  . . . . .-
 :  &2 &N Folder . . . . . :  &1'                                     +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

             RCLRSC LVL(*)

             ENDPGM
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing A_MSG_GER  type CLP - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "A_MSG_GER "
mbrtype =  "CLP       "
mbrtext =  "MSG: PRZ0001 - PRZ0027                            "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /*-----------------------------------------------------------------------*/
     /* STRPREPRC Compile Options:                                            */
     /* >>PRE-COMPILER<<                                                      */
     /*   >>CRTCMD<<  CALL       PGM(QTEMP/&OB) PARM(&LI);                    */
     /*   >>CMD<<     CRTBNDCL   PGM(QTEMP/&OB) +                             */
     /*                          SRCFILE(&SL/&SF) SRCMBR(&SM) +               */
     /*               TEXT('Tool: STRPREPRC  (Start Pre-Processor) Ger');     */
     /*   >>EXECUTE<<                                                         */
     /*   >>CMD<<     DLTPGM PGM(QTEMP/&OB);                                  */
     /* >>END-PRE-COMPILER<<                                                  */
     /*-----------------------------------------------------------------------*/
             PGM        PARM(&LIB)

             DCL        VAR(&LIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&OBJ) TYPE(*CHAR) LEN(10) VALUE('STRPREPRC')

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0001                    */
     /* Falsche Reihenfolge im Betriebsmodus.                       */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0001) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0001) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Falsche Reihenfolge im Betriebsmodus.'                               +
                ) +
                SECLVL( +
'Hinweis  . . . . :  Aus der Betriebsart &1 kann nicht in die Betriebs-
art &2 umgeschaltet werden.'                                          +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 30) +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0002                    */
     /* Verarbeitung in Zeile &1 abgebrochen.                       */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0002) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0002) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Verarbeitung in Zeile &1 abgebrochen.'                               +
                ) +
                SECLVL( +
'Hinweis  . . . . :  Ist als fehlerhafte Programmzeilenummer 0,00 ange-
geben, so trat der Fehler bei der Prfung der ber gebenen Befehlszeic-
henkette auf.'                                                        +
                ) +
                SEV(50) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0003                    */
     /* Parameteranweisung in der Betriebsart &1 unzulssig.        */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0003) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0003) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Parameteranweisung in der Betriebsart &1 unzulssig.'                +
                ) +
                SEV(0) +
                FMT( +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0004                    */
     /* Die Marke &1 ist auerhalb der Betriebsart &2 nicht erlaubt */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0004) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0004) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Die Marke &1 ist auerhalb der Betriebsart &2 nicht erlaubt.'        +
                ) +
                SEV(0) +
                FMT( +
                    (*CHAR 30) +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0005                    */
     /* Ungltiges Fortsetzungszeichen &1 in Zeile &2 gefunden.     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0005) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0005) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Ungltiges Fortsetzungszeichen &1 in Zeile &2 gefunden.'             +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0006                    */
     /* Das Ende des Schlsselwortes &1 konnte nicht gefunden werde */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0006) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0006) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Das Ende des Schlsselwortes &1 konnte nicht gefunden werden.'       +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0007                    */
     /* Befehlszeichenfolge ist zu lang.                            */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0007) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0007) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Befehlszeichenfolge ist zu lang.'                                    +
                ) +
                SECLVL( +
'Hinweis  . . . . :  Die maximale Lnge einer Befehlszeichenfolge darf-
 &1 Zeichen nicht berschreiten.'                                     +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0008                    */
     /* Das Zeilenendekennzeichen konnte nicht gefunden werden.     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0008) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0008) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Das Zeilenendekennzeichen konnte nicht gefunden werden.'             +
                ) +
                SECLVL( +
'Fehlerbeseitigung:  Fgen Sie ein Zeilenendekennzeichen in die Zeile -
&1 ein. &N &N Gltige Zeilendenekennzeichen sind: &B &B '';'' = Zeilen-
ende &B ''+'' = Fortsetzungszeile ohne Leerzeichen &B ''-'' = Fortsetz-
ungszeile mit Leerzeichen.'                                           +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0009                    */
     /* Unbekannter Wert "&1" fr Fortsetzungszeichen gefunden.     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0009) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0009) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Unbekannter Wert "&1" fr Fortsetzungszeichen gefunden.'             +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0010                    */
     /* Modus fr Marke &1 nicht definiert.                         */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0010) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0010) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Modus fr Marke &1 nicht definiert.'                                 +
                ) +
                SECLVL( +
'Fehlerbeseitigung:  Definieren des Betriebsmodus fr die Marke &1 in -
der Funktion f_tagToMode.'                                            +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 30) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0011                    */
     /* Die Datensatzlnge der Eingabedatei ist zu lang.            */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0011) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0011) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Die Datensatzlnge der Eingabedatei ist zu lang.'                    +
                ) +
                SECLVL( +
'Ursache  . . . . :  Die Datensatzlnge der Datei &3/&4 betrgt &1 Byt-
e. Die maximale Datensatzlnge ist auf &2 Byte begrenzt. &N Fehlerbese-
itigung:  Whlen Sie eine Eingabedatei aus, deren Datensatzlnge nicht-
 grer als &2 Byte ist.'                                             +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*DEC 10 0) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0012                    */
     /* Fehler beim ffnen der Quellendatei &2/&1, Teildatei &3.    */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0012) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0012) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Fehler beim ffnen der Quellendatei &2/&1, Teildatei &3.'            +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0013                    */
     /* Fehler beim ffnen der Steuerdatei &2/&1, Teildatei &3.     */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0013) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0013) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Fehler beim ffnen der Steuerdatei &2/&1, Teildatei &3.'             +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0014                    */
     /* Auszufhrender Befehl fehlt. Weitere Verarbeitung nicht mg */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0014) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0014) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Auszufhrender Befehl fehlt. Weitere Verarbeitung nicht mglich.'    +
                ) +
                SECLVL( +
'Ursache  . . . . :  Der Parameter CMD() wurde mit Leerzeichen bergeb-
en und es wurde kein Schlsselwort >>CRTCMD<< in der Quellenteildatei -
gefunden.  &N Fehlerbeseitigung:  Angeben Parameter CMD() oder einfge-
n Schlsselwort >>CRTCMD<< in der Quellenteildatei.'                  +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0015                    */
     /* Fehler im Erstellungsbefehl gefunden.                       */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0015) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0015) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Fehler im Erstellungsbefehl gefunden.'                               +
                ) +
                SECLVL( +
'Befehl . . . . . :  &1'                                              +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 512) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0016                    */
     /* Der Parameter 'OBJSRCFILE' ist nicht zulssig, wenn CHGOBJD */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0016) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0016) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Der Parameter ''OBJSRCFILE'' ist nicht zulssig, wenn CHGOBJD(*NO) an-
gegeben ist.'                                                         +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0017                    */
     /* Der Parameter 'OBJSRCLIB' ist nicht zulssig, wenn CHGOBJD( */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0017) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0017) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Der Parameter ''OBJSRCLIB'' ist nicht zulssig, wenn CHGOBJD(*NO) ang-
egeben ist.'                                                          +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0018                    */
     /* Der Parameter 'OBJSRCMBR' ist nicht zulssig, wenn CHGOBJD( */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0018) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0018) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Der Parameter ''OBJSRCMBR'' ist nicht zulssig, wenn CHGOBJD(*NO) ang-
egeben ist.'                                                          +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0019                    */
     /* Der Parameter 'OBJTYPE' ist nicht zulssig, wenn CHGOBJD(*N */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0019) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0019) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Der Parameter ''OBJTYPE'' ist nicht zulssig, wenn CHGOBJD(*NO) angeg-
eben ist.'                                                            +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0020                    */
     /* Der Parameter 'OBJTYPE' muss angegeben werden, wenn CHGOBJD */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0020) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0020) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Der Parameter ''OBJTYPE'' muss angegeben werden, wenn CHGOBJD(*YES) a-
ngegeben ist.'                                                        +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0021                    */
     /* Befehl CHGOBJDA nicht gefunden oder unvollstndig.          */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0021) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0021) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Befehl CHGOBJDA nicht gefunden oder unvollstndig.'                  +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0022                    */
     /* Verarbeitung abgebrochen.                                   */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0022) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0022) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Verarbeitung abgebrochen.'                                           +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0023                    */
     /* Fehlender Wert fr Variable an Position &1 des auszufhrend */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0023) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0023) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Fehlender Wert fr Variable an Position &1 des auszufhrenden Befehls-
.'                                                                    +
                ) +
                SECLVL( +
'Befehl . . . . . :  &2'                                              +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*CHAR 512) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0024                    */
     /* Keine Pre-Compiler Anweisungen in Quellendatei &2/&1, Teild */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0024) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0024) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Keine Pre-Compiler Anweisungen in Quellendatei &2/&1, Teildatei &3 ge-
funden.'                                                              +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0025                    */
     /* EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konn */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0025) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0025) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konnte nicht g-
effnet werden.'                                                      +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0026                    */
     /* EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden. */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0026) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0026) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.'         +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0027                    */
     /* Wenn die Option '*EVENTF' angegeben ist, mssen auch die Pa */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0027) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0027) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Wenn die Option ''*EVENTF'' angegeben ist, mssen auch die Parameter -
LIB() und OBJ() angegeben werden.'                                    +
                ) +
                SEV(40) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0028                    */
     /* Erstellungsbefehl nicht gefunden in Quellendatei &2/&1, Tei */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0028) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0028) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Erstellungsbefehl nicht gefunden in Quellendatei &2/&1, Teildatei &3.-
'                                                                     +
                ) +
                SECLVL( +
'Ursache  . . . . :  Die Teildatei enthlt keine Pre-Compiler Anweisun-
gen und es wurde kein Erstellungsbefehl im Parameter ''Auszufhrender -
Befehl'' (CMD) angegeben.'                                            +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0029                    */
     /* &1                                                          */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0029) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0029) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'&1'                                                                  +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0030                    */
     /* Die Option *ADDJOBLOG ist nur in Verbindung mit *EVENTF zul */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0030) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0030) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Die Option *ADDJOBLOG ist nur in Verbindung mit *EVENTF zulssig.'   +
                ) +
                SEV(30) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0031                    */
     /* Ungltige INCLUDE Marke in Zeile &1 gefunden.               */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0031) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0031) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Ungltige INCLUDE Marke in Zeile &1 gefunden.'                       +
                ) +
                SECLVL( +
'Ursache  . . . . :  Es fehlt entweder die Datei oder die Teildatei. D-
as richtige Format ist:&P >>INCLUDE<< [Bibliothek]/Datei Teildatei;'  +
                ) +
                SEV(30) +
                FMT( +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0032                    */
     /* Verschachtelte INCLUDE Marke in Zeile &4 der Datei &2/&1, T */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0032) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0032) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Verschachtelte INCLUDE Marke in Zeile &4 der Datei &2/&1, Teildatei &-
3 gefunden.'                                                          +
                ) +
                SECLVL( +
'Ursache  . . . . :  Mehrfach verschachtelte INCLUDE Marken sind nicht-
 erlaubt.'                                                            +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*DEC 6 2) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0033                    */
     /* STRPREPRC: Objekt erstellt.                                 */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0033) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0033) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'STRPREPRC: Objekt erstellt.'                                         +
                ) +
                SEV(10) +
     /*   No replacement variables defined!                         */ +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0034                    */
     /* STRPREPRC: Fehlernachricht &1 wurde aufgrund von MONMSG ign */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0034) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0034) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'STRPREPRC: Fehlernachricht &1 wurde aufgrund von MONMSG ignoriert.'  +
                ) +
                SEV(10) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0035                    */
     /* Bibliothek &1 nicht gefunden.                               */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0035) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0035) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Bibliothek &1 nicht gefunden.'                                       +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0036                    */
     /* Datei &1 in Bibliothek &2 nicht gefunden.                   */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0036) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0036) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Datei &1 in Bibliothek &2 nicht gefunden.'                           +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0037                    */
     /* Teildatei &3 von Datei &1 in Bibliothek &2 nicht gefunden.  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0037) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0037) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Teildatei &3 von Datei &1 in Bibliothek &2 nicht gefunden.'          +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 10) +
                    (*CHAR 10) +
                    (*CHAR 10) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0038                    */
     /* Die Parameter USESRCFILE und USESRCMBR knnen nicht mit dem */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0038) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0038) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Die Parameter USESRCFILE und USESRCMBR knnen nicht mit dem Parameter-
 USESRCSTMF angegeben werden.'                                        +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0039                    */
     /* Entweder USESRCFILE und USESRCMBR oder USESRCSTMF angeben.  */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0039) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0039) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Entweder USESRCFILE und USESRCMBR oder USESRCSTMF angeben.'          +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0040                    */
     /* Wert *DFT ist unzulssig fr SRCFILE, SRCLIB und SRCMBR, we */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0040) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0040) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Wert *DFT ist unzulssig fr SRCFILE, SRCLIB und SRCMBR, wenn USESRCS-
TMF angegeben ist.'                                                   +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 70) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0041                    */
     /* Datei &1 kann nicht geffnet werden.                        */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0041) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0041) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Datei &1 kann nicht geffnet werden.'                                +
                ) +
                SECLVL( +
'Hinweis  . . . . :  &2 - &3'                                         +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 512) +
                    (*CHAR 10) +
                    (*CHAR 50) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0042                    */
     /* Die Datensatzlnge der IFS Datei ist zu lang.               */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0042) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0042) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Die Datensatzlnge der IFS Datei ist zu lang.'                       +
                ) +
                SECLVL( +
'Ursache  . . . . :  Die Datensatzlnge der IFS Datei betrgt &1 Byte.-
 Die maximale Datensatzlnge ist auf &2 Byte begrenzt. &N Fehlerbeseit-
igung:  Whlen Sie eine Eingabedatei aus, deren Datensatzlnge nicht g-
rer als &2 Byte ist. Der Name der Datei ist: &N Datei  . . . . . :  -
&4 &N Verzeichnis  . . :  &4'                                         +
                ) +
                SEV(40) +
                FMT( +
                    (*DEC 10 0) +
                    (*DEC 10 0) +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0043                    */
     /* Datei nicht gefunden: &1                                    */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0043) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0043) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Datei nicht gefunden: &1.'                                           +
                ) +
                SEV(30) +
                FMT( +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

             RCLRSC LVL(*)

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0044                    */
     /* Erstellungsbefehl nicht gefunden in Quellendatei &1         */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0044) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0044) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Erstellungsbefehl nicht gefunden in Quellendatei &1'                 +
                ) +
                SECLVL( +
'Fehlerbeseitigung:  Hinzufgen Erstellungsbefehl. &N Datei  . . . . .-
 :  &2 &N Verzeichnis  . . :  &1'                                     +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

     /*-------------------------------------------------------------*/
     /*   Cmd-ADDMSGD fr Message-ID :   PRZ0045                    */
     /* Keine Pre-Compiler Anweisungen in Quellendatei &2           */
     /*-------------------------------------------------------------*/

             RMVMSGD MSGID(PRZ0045) MSGF(&LIB/&OBJ)
             MONMSG  MSGID(CPF2419)     /* MsgID nicht gefunden */

             ADDMSGD +
                MSGID(PRZ0045) +
                MSGF(&LIB/&OBJ) +
                MSG( +
'Keine Pre-Compiler Anweisungen in Quellendatei &2'                   +
                ) +
                SECLVL( +
'Fehlerbeseitigung:  Hinzufgen Pre-Compiler Anweisungen. &N Datei  . -
. . . . :  &2 &N Verzeichnis  . . :  &1'                              +
                ) +
                SEV(40) +
                FMT( +
                    (*CHAR 256) +
                    (*CHAR 256) +
                ) +
                ALROPT(*NO) +
                CCSID(65535) +
                /*  -EOF-  */

             ENDPGM
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing A_README  type TXT - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "A_README  "
mbrtype =  "TXT       "
mbrtext =  "Readme of STRPREPRC                               "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
STRPREPRC - A Tools/400 Utility
-------------------------------

STRPREPRC is utility for retrieving object creation parameters from the
source member that is compiled and building and executing the final
object creation command.

Dependencies: BASICS1, EVENTF, JOBLOG

Compile members with the following PDM option:

   STRPREPRC USESRCFILE(&L/&F) USESRCMBR(&N) OPTION(*EVENTF) CHGOBJD(*NO)
     LIB(&O) OBJ(&N) SRCLIB(&L) SRCFILE(&F) SRCMBR(&N) USER0(&X)
     USER1(*LIST) USER2(*FULL)

Members of type MAKPGM or BND are used for linking programs (MAKPGM)
and service programs (BND).

2018, Thomas Raddatz
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing COPYRIGHT  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "COPYRIGHT "
mbrtype =  "RPGLE     "
mbrtext =  "Tool: STRPREPRC  (Starten Pre-Proz.  ) Srv-Modul  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(COPYRIGHT_DSPEC)
     h COPYRIGHT('V2.2 - 12.01.2023 - mailto: thomas.raddatz@tools400.de')
      /eof
      /endif
     d STRPREPRC_VERSION...
     d                 C                   '2.2'
     d STRPREPRC_DATE...
     d                 C                   '12.01.2023'
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing H_SPEC  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "H_SPEC    "
mbrtype =  "RPGLE     "
mbrtext =  "H-Specifications                                  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     H DEBUG
     H OPTION(*SRCSTMT : *NODEBUGIO)
      /IF NOT DEFINED(NO_DECEDIT)
     H DECEDIT('0,')
      /ENDIF
     H DATEDIT(*DMY.)
     H DATFMT(*ISO )
     H TIMFMT(*ISO )
     H EXPROPTS(*RESDECPOS)
     H EXTBININT(*YES)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing TYPES_H  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "TYPES_H   "
mbrtype =  "RPGLE     "
mbrtext =  "Tool: STRPREPRC - Global Types and Constants      "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(types_h)
      /define types_h

      /include QBASICS1,FDMSG
      /include QBASICS1,FDQOBJ

      // must be equal to size of srcDta_t
     D MAX_RCD_LEN     c                   244

     D cERROR          c                   -1

     D cTYPE_DIAG      c                   '*DIAG'
     D cTYPE_ESCAPE    c                   '*ESCAPE'

     D cBACKSLASH      c                   '\'
     D cSLASH          c                   '/'
     D cDELIMITER      c                   ':/\'

     D int4_t          s             10i 0 template
     D cmd_t           s           8192a   template
     D cmdLong_t       s          32702a   template varying
     D cmdLongFixLen_t...
     D                 s          32702a   template
     D bool_t          s               n   template
     D mode_t          s             30a   template
     D module_t        s             10a   template
     D pgm_t           s             10a   template
     D proc_t          s             64a   template
     D tag_t           s             30a   template
     D continue_t      s              1a   template
     D keyData_t       s           4096a   template varying
     D obj_t           s             10a   template
     D tgtRls_t        s             10a   template
     D typeCode_t      s              6a   template
     D userParm_t      s             50a   template
     D chgObjD_t       s              4a   template
     D objType_t       s             10a   template
     D cErrorText_t    s            128a   template varying

     D file_t          s             10a   template
     D lib_t           s             10a   template
     D mbr_t           s             10a   template
     D path_t          s           4096a   varying template
     D fd_t            s             10i 0 template

     D srcSeq_t        s              6s 2 template
     D srcDat_t        s              6s 0 template
     D srcDta_t        s            244a   template

     D ds_srcFile_t    ds                  qualified template
     D  srcSeq                             like(srcSeq_t)
     D  srcDat                             like(srcDat_t)
     D  srcDta                             like(srcDta_t)
      *
     D DIM_OPTIONS     c                   5
      *
     D option_t        ds                  template qualified
     D  numE                          5i 0
     D  option                       10a   dim(DIM_OPTIONS)
      *
     D DIM_USRDEFVARS  c                   20
      *
     D inpUsrDefVars_t...
     D                 ds          2282    qualified template
     D  numElem                       5i 0
     D  offsItems                     5i 0 dim(DIM_USRDEFVARS)
      *
     D inpUsrDefVar_t...
     D                 ds                  qualified template
     D  numE                          5i 0
     D  name                         10a
     D  value                       100a
      *
     D DIM_EXECOPTS    c                   3
      *
     D execOpt_t       ds                  qualified template
     D  numElem                       5i 0
     D  execOpt                      10a   dim(DIM_EXECOPTS)
      *
     D DIM_LIBLIST     c                   250
      *
     D inpLibList_t    ds                  qualified template
     D  numElem                       5i 0
     D  curLib                       10a
     D  offsUsrLibl                   5i 0
     D  numUsrLiblE                   5i 0
     D  lib                          10a   dim(DIM_LIBLIST)
      *
     D libl_t          ds                  qualified template
     D  numE                          5i 0
     D  name                               like(lib_t) dim(DIM_LIBLIST)
      *
     D liblList_t      ds                  qualified template
     D  curLib                             like(lib_t)
     D  usrLibl                            likeds(libl_t)
      *
     D usrDefVars_t    ds                  qualified template
     D  numE                          5i 0
     D  var                                likeds(usrDefVar_t)
     D                                     dim(DIM_USRDEFVARS)
      *
     D usrDefVar_t     ds                  qualified template
     D  name                         10a
     D  value                       100a
      *
     D lineData_t      ds                  qualified template
     D  continue                           like(continue_t)
     D  keyData                            like(keyData_t)
      *
     D monMsgIds_t     ds                  qualified template
     D  item                               like(msgId_t) dim(50)
      *
     D variables_t     ds                  qualified template
     D  lib                                like(lib_t)
     D  obj                                like(obj_t)
     D  typeCode                           like(typeCode_t)
     D  srcLib                             like(lib_t)
     D  srcFile                            like(file_t)
     D  srcMbr                             like(mbr_t)
     D  testLib                            like(lib_t)
     D  testObj                            like(obj_t)
     D  tgtRls                             like(tgtRls_t)
     D  frmSrcLib                          like(lib_t)
     D  frmSrcFile                         like(file_t)
     D  frmSrcMbr                          like(mbr_t)
     D  user0                              like(userParm_t)
     D  user1                              like(userParm_t)
     D  user2                              like(userParm_t)
     D  user3                              like(userParm_t)
     D  user4                              like(userParm_t)
     D  user5                              like(userParm_t)
     D  user6                              like(userParm_t)
     D  user7                              like(userParm_t)
     D  user8                              like(userParm_t)
     D  user9                              like(userParm_t)
     D  stmf                               like(path_t)
     D  folder                             like(path_t)
     D  file                               like(path_t)
     D  libl                               likeds(liblList_t)
     D  usrDefVars                         likeds(usrDefVars_t)
     D  useLibl                            like(bool_t)
     D  prvLibl                            likeds(liblList_t)

      /endif
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0001  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0001   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Falsche Reihenfolge im Betriebsmodus.        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0001
      *
      * Falsche Reihenfolge im Betriebsmodus.
      *
     D PRZ0001         DS
     D  PRZ00011                    030A   INZ(*BLANKS)
     D  PRZ00012                    030A   INZ(*BLANKS)
     D PRZ0001_LEN     S              8B 0 INZ(0060)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0002  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0002   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Verarbeitung in Zeile  1 abgebrochen.        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0002
      *
      * Verarbeitung in Zeile &1 abgebrochen.
      *
     D PRZ0002         DS
     D  PRZ00021                    006P 2 INZ(*ZEROS )
     D PRZ0002_LEN     S              8B 0 INZ(0004)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0003  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0003   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Parameteranweisung in der Betriebsart  1 unzu"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0003
      *
      * Parameteranweisung in der Betriebsart &1 unzulssig.
      *
     D PRZ0003         DS
     D  PRZ00031                    030A   INZ(*BLANKS)
     D PRZ0003_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0004  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0004   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Die Marke  1 ist auerhalb der Betriebsart  2"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0004
      *
      * Die Marke &1 ist auerhalb der Betriebsart &2 nicht erlaubt
      *
     D PRZ0004         DS
     D  PRZ00041                    030A   INZ(*BLANKS)
     D  PRZ00042                    030A   INZ(*BLANKS)
     D PRZ0004_LEN     S              8B 0 INZ(0060)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0005  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0005   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Ungltiges Fortsetzungszeichen  1 in Zeile  2"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0005
      *
      * Ungltiges Fortsetzungszeichen &1 in Zeile &2 gefunden.
      *
     D PRZ0005         DS
     D  PRZ00051                    010A   INZ(*BLANKS)
     D  PRZ00052                    006P 2 INZ(*ZEROS )
     D PRZ0005_LEN     S              8B 0 INZ(0014)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0006  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0006   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Das Ende des Schlsselwortes  1 konnte nicht "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0006
      *
      * Das Ende des Schlsselwortes &1 konnte nicht gefunden werde
      *
     D PRZ0006         DS
     D  PRZ00061                    010A   INZ(*BLANKS)
     D PRZ0006_LEN     S              8B 0 INZ(0010)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0007  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0007   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Befehlszeichenfolge ist zu lang.             "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0007
      *
      * Befehlszeichenfolge ist zu lang.
      *
     D PRZ0007         DS
     D  PRZ00071                    010P 0 INZ(*ZEROS )
     D PRZ0007_LEN     S              8B 0 INZ(0006)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0008  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0008   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Das Zeilenendekennzeichen konnte nicht gefund"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0008
      *
      * Das Zeilenendekennzeichen konnte nicht gefunden werden.
      *
     D PRZ0008         DS
     D  PRZ00081                    006P 2 INZ(*ZEROS )
     D PRZ0008_LEN     S              8B 0 INZ(0004)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0009  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0009   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Unbekannter Wert   1  fr Fortsetzungszeichen"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0009
      *
      * Unbekannter Wert "&1" fr Fortsetzungszeichen gefunden.
      *
     D PRZ0009         DS
     D  PRZ00091                    010A   INZ(*BLANKS)
     D PRZ0009_LEN     S              8B 0 INZ(0010)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0010  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0010   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Modus fr Marke  1 nicht definiert.          "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0010
      *
      * Modus fr Marke &1 nicht definiert.
      *
     D PRZ0010         DS
     D  PRZ00101                    030A   INZ(*BLANKS)
     D PRZ0010_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0011  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0011   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Die Datensatzlnge der Eingabedatei ist zu la"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0011
      *
      * Die Datensatzlnge der Eingabedatei ist zu lang.
      *
     D PRZ0011         DS
     D  PRZ00111                    010P 0 INZ(*ZEROS )
     D  PRZ00112                    010P 0 INZ(*ZEROS )
     D  PRZ00113                    010A   INZ(*BLANKS)
     D  PRZ00114                    010A   INZ(*BLANKS)
     D PRZ0011_LEN     S              8B 0 INZ(0032)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0012  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0012   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Fehler beim ffnen der Quellendatei  2/ 1, Te"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0012
      *
      * Fehler beim ffnen der Quellendatei &2/&1, Teildatei &3.
      *
     D PRZ0012         DS
     D  PRZ00121                    010A   INZ(*BLANKS)
     D  PRZ00122                    010A   INZ(*BLANKS)
     D  PRZ00123                    010A   INZ(*BLANKS)
     D PRZ0012_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0013  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0013   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Fehler beim ffnen der Steuerdatei  2/ 1, Tei"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0013
      *
      * Fehler beim ffnen der Steuerdatei &2/&1, Teildatei &3.
      *
     D PRZ0013         DS
     D  PRZ00131                    010A   INZ(*BLANKS)
     D  PRZ00132                    010A   INZ(*BLANKS)
     D  PRZ00133                    010A   INZ(*BLANKS)
     D PRZ0013_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0014  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0014   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Auszufhrender Befehl fehlt. Weitere Verarbei"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0014
      *
      * Auszufhrender Befehl fehlt. Weitere Verarbeitung nicht mg
      *
     D PRZ0014         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0014_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0015  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0015   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Fehler im Erstellungsbefehl gefunden.        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0015
      *
      * Fehler im Erstellungsbefehl gefunden.
      *
     D PRZ0015         DS
     D  PRZ00151                    512A   INZ(*BLANKS)
     D PRZ0015_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0016  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0016   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Der Parameter  OBJSRCFILE  ist nicht zulss  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0016
      *
      * Der Parameter 'OBJSRCFILE' ist nicht zulssig, wenn CHGOBJD
      *
     D PRZ0016         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0016_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0017  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0017   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Der Parameter  OBJSRCLIB  ist nicht zulssi  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0017
      *
      * Der Parameter 'OBJSRCLIB' ist nicht zulssig, wenn CHGOBJD(
      *
     D PRZ0017         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0017_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0018  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0018   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Der Parameter  OBJSRCMBR  ist nicht zulssi  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0018
      *
      * Der Parameter 'OBJSRCMBR' ist nicht zulssig, wenn CHGOBJD(
      *
     D PRZ0018         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0018_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0019  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0019   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Der Parameter  OBJTYPE  ist nicht zulssig,  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0019
      *
      * Der Parameter 'OBJTYPE' ist nicht zulssig, wenn CHGOBJD(*N
      *
     D PRZ0019         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0019_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0020  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0020   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Der Parameter  OBJTYPE  muss angegeben werd  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0020
      *
      * Der Parameter 'OBJTYPE' muss angegeben werden, wenn CHGOBJD
      *
     D PRZ0020         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0020_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0021  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0021   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Befehl CHGOBJDA nicht gefunden oder unvollst"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0021
      *
      * Befehl CHGOBJDA nicht gefunden oder unvollstndig.
      *
     D PRZ0021         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0021_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0022  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0022   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Verarbeitung abgebrochen.                    "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0022
      *
      * Verarbeitung abgebrochen.
      *
     D PRZ0022         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0022_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0023  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0023   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Fehlender Wert fr Variable an Position  1 de"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0023
      *
      * Fehlender Wert fr Variable an Position &1 des auszufhrend
      *
     D PRZ0023         DS
     D  PRZ00231                    010P 0 INZ(*ZEROS )
     D  PRZ00232                    512A   INZ(*BLANKS)
     D PRZ0023_LEN     S              8B 0 INZ(0518)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0024  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0024   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Keine Pre-Compiler Anweisungen in Quellendate"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0024
      *
      * Keine Pre-Compiler Anweisungen in Quellendatei &2/&1, Teildatei &3 gefunden.
      *
     D PRZ0024         DS
     D  PRZ00241                    010A   INZ(*BLANKS)
     D  PRZ00242                    010A   INZ(*BLANKS)
     D  PRZ00243                    010A   INZ(*BLANKS)
     D PRZ0024_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0025  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0025   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: EVFEVENT Datei in Bibliothek  1 oder das Job "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0025
      *
      * EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konnte nicht geffne
      *
     D PRZ0025         DS
     D  PRZ00251                    010A   INZ(*BLANKS)
     D PRZ0025_LEN     S              8B 0 INZ(0010)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0026  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0026   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: EVFEVENT Datei konnte nicht zur Ausgabe vorbe"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0026
      *
      * EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      *
     D PRZ0026         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0026_LEN     S              8B 0 INZ(0512)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0027  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0027   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Wenn die Option  *EVENTF  angegeben ist, mss"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0027
      *
      * Wenn die Option '*EVENTF' angegeben ist, mssen auch die Pa
      *
     D PRZ0027         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0027_SIZE    S              8B 0 INZ(0000)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0028  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0028   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Erstellungsbefehl nicht gefunden in Quellenda"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0028
      *
      * Erstellungsbefehl nicht gefunden in Quellendatei &2/&1, Teildatei &3.
      *
     D PRZ0028         DS
     D  PRZ00281                    010A   INZ(*BLANKS)
     D  PRZ00282                    010A   INZ(*BLANKS)
     D  PRZ00283                    010A   INZ(*BLANKS)
     D PRZ0028_LEN     S              8B 0 INZ(0030)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0029  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0029   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG:  1.                                          "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0029
      *
      * &1.
      *
     D PRZ0029         DS
     D  PRZ00291                     70A   INZ(*BLANKS)
     D PRZ0029_LEN     S              8B 0 INZ(0070)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0030  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0030   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Die Option *JOBLOG ist nur in Verbindung mit "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0030
      *
      * Wenn die Option '*EVENTF' angegeben ist, mssen auch die Pa
      * Die Option *ADDJOBLOG ist nur in Verbindung mit *EVENTF zul
      *
     D PRZ0030         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0030_SIZE    S              8B 0 INZ(0000)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0031  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0031   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Ungltige INCLUDE Marke in Zeile  1 gefunden."
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0031

      //  Ungltige INCLUDE Marke in Zeile &1 gefunden.

     d PRZ0031         ds
     d  PRZ00311                    006P 2 INZ(*ZEROS )
     d PRZ0031_SIZE    s              8B 0 INZ(0004)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0032  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0032   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Verschachtelte INCLUDE Marke in Zeile  4 der "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0031

      //  Verschachtelte INCLUDE Marke in Zeile &4 der Datei &2/&1, Teil

     d PRZ0032         ds
     d  PRZ00321                    010A   INZ(*BLANKS)
     d  PRZ00322                    010A   INZ(*BLANKS)
     d  PRZ00323                    010A   INZ(*BLANKS)
     d  PRZ00324                    006P 2 INZ(*ZEROS )
     d PRZ0032_SIZE    s              8B 0 INZ(0036)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0033  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0033   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: STRPREPRC: Objekt erstellt.                  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *---------------------------------------------------------------
      * Datenstruktur fr Message-ID : PRZ0033
      *
      * STRPREPRC: Objekt erstellt.
      *
     D PRZ0033         DS
      *   Keine Ersatzvariablen definiert!
     D PRZ0033_SIZE    S              8B 0 INZ(0000)
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0034  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0034   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: STRPREPRC: Fehlernachricht  1 wurde aufgrund "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0034

      //  STRPREPRC: Fehlernachricht &1 wurde aufgrund von MONMSG ignoriert.

     d PRZ0034         ds
     d  PRZ00341                     10A   inz(*BLANKS)
     d PRZ0034_SIZE    s             10I 0 inz(10)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0035  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0035   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Bibliothek  1 nicht gefunden.                "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0035

      //  Bibliothek &1 nicht gefunden.

     d PRZ0035         ds
     d  PRZ00351                     10A   inz(*BLANKS)
     d PRZ0035_SIZE    s             10I 0 inz(10)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0036  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0036   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Datei  1 in Bibliothek  2 nicht gefunden.    "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0036

      //  Datei &1 in Bibliothek &2 nicht gefunden.

     d PRZ0036         ds
     d  PRZ00361                     10A   inz(*BLANKS)
     d  PRZ00362                     10A   inz(*BLANKS)
     d PRZ0036_SIZE    s             10I 0 inz(20)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0037  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0037   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Teildatei  3 von Datei  1 in Bibliothek  2 ni"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0037

      //  Teildatei &3 von Datei &1 in Bibliothek &2 nicht gefunden.

     d PRZ0037         ds
     d  PRZ00371                     10A   inz(*BLANKS)
     d  PRZ00372                     10A   inz(*BLANKS)
     d  PRZ00373                     10A   inz(*BLANKS)
     d PRZ0037_SIZE    s             10I 0 inz(30)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0038  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0038   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Die Parameter USESRCFILE und USESRCMBR knnen"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0038
      //  Die Parameter USESRCFILE und USESRCMBR knnen nicht mit dem
     d PRZ0038         ds
     d  PRZ00381                     70A   inz(*BLANKS)
     d PRZ0038_SIZE    s             10I 0 inz(70)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0039  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0039   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Entweder USESRCFILE und USESRCMBR oder USESRC"
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0039
      //  Entweder USESRCFILE und USESRCMBR oder USESRCSTMF angeben.
     d PRZ0039         ds
     d  PRZ00391                     70A   inz(*BLANKS)
     d PRZ0039_SIZE    s             10I 0 inz(70)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0040  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0040   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Wert *DFT ist unzulssig fr SRCFILE, SRCLIB "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0040
      //  Wert *DFT ist unzulssig fr SRCFILE, SRCLIB und SRCMBR, we
     d PRZ0040         ds
     d  PRZ00401                     70A   inz(*BLANKS)
     d PRZ0040_SIZE    s             10I 0 inz(70)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0041  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0041   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Datei  1 kann nicht geffnet werden.         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0041
      //  Datei &1 kann nicht geffnet werden.
     d PRZ0041         ds
     d  PRZ00411                    512A   inz(*BLANKS)
     d  PRZ00412                     10A   inz(*BLANKS)
     d  PRZ00413                     50A   inz(*BLANKS)
     d PRZ0041_SIZE    s             10I 0 inz(572)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0042  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0042   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Die Datensatzlnge der IFS Datei ist zu lang."
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0042
      //  Record length of IFS source file exceeds maximum.
     d PRZ0042         ds
     d  PRZ00421                     10P 0 inz(*ZEROS )
     d  PRZ00422                     10P 0 inz(*ZEROS )
     d  PRZ00423                    256A   inz(*BLANKS)
     d  PRZ00424                    256A   inz(*BLANKS)
     d PRZ0042_SIZE    s             10I 0 inz(524)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0043  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0043   "
mbrtype =  "RPGLE     "
mbrtext =  "MSG: Datei nicht gefunden:  1                     "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0043
      //  Datei nicht gefunden: &1
     d PRZ0043         ds
     d  PRZ00431                    256A   inz
     d PRZ0043_SIZE    s             10I 0 inz(256)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0044  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0044   "
mbrtype =  "RPGLE     "
mbrtext =  "Erstellungsbefehl nicht gefunden in Quellendatei  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0044
      //  Erstellungsbefehl nicht gefunden in Quellendatei &
     d PRZ0044         ds
     d  PRZ00441                    256A   inz
     d  PRZ00442                    256A   inz
     d PRZ0044_SIZE    s             10I 0 inz(512)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PRZ0045  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PRZ0045   "
mbrtype =  "RPGLE     "
mbrtext =  "Erstellungsbefehl nicht gefunden in Quellendatei  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      // ---------------------------------------------------------------
      //  Data structure for message ID: PRZ0045
      //  Erstellungsbefehl nicht gefunden in Quellendatei &
     d PRZ0045         ds
     d  PRZ00451                    256A   inz
     d  PRZ00452                    256A   inz
     d PRZ0045_SIZE    s             10I 0 inz(512)
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PSTRPREPR2  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PSTRPREPR2"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Services Prototypes         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if defined(PSTRPREPR2)
      /eof
      /endif
      /define PSTRPREPR2

      /include QBASICS1,FDMSG
      /include QBASICS1,FDQOBJ
      /include QSTRPREPRC,TYPES_H

     D run...
     D                 pr
     D                                     extproc('STRPREPRC2_+
     D                                     run+
     D                                     ')
     D  i_useSrcFile                       const  like(file_t)
     D  i_useSrcLib                        const  like(lib_t)
     D  i_useSrcMbr                        const  like(mbr_t)
     D  i_useStmf                          const  like(path_t)
     D  i_cmd                              const  like(cmd_t)
     D  i_chgObjD                          const  like(chgObjD_t)
     D  i_objType                          const  like(objType_t)
     D  i_objSrcFile                       const  like(file_t)
     D  i_objSrcLib                        const  like(lib_t)
     D  i_objSrcMbr                        const  like(mbr_t)
     D  i_lib                              const  like(lib_t)
     D  i_obj                              const  like(obj_t)
     D  i_typeCode                         const  like(typeCode_t)
     D  i_srcLib                           const  like(lib_t)
     D  i_srcFile                          const  like(file_t)
     D  i_srcMbr                           const  like(mbr_t)
     D  i_testLib                          const  like(lib_t)
     D  i_testObj                          const  like(obj_t)
     D  i_tgtRls                           const  like(tgtRls_t)
     D  i_frmSrcLib                        const  like(lib_t)
     D  i_frmSrcFile                       const  like(file_t)
     D  i_frmSrcMbr                        const  like(mbr_t)
     D  i_user0                            const  like(userParm_t)
     D  i_user1                            const  like(userParm_t)
     D  i_user2                            const  like(userParm_t)
     D  i_user3                            const  like(userParm_t)
     D  i_user4                            const  like(userParm_t)
     D  i_user5                            const  like(userParm_t)
     D  i_user6                            const  like(userParm_t)
     D  i_user7                            const  like(userParm_t)
     D  i_user8                            const  like(userParm_t)
     D  i_user9                            const  like(userParm_t)
     D  i_stmf                             const  like(path_t)
     D  i_tagsReq                          const  like(bool_t)
     D  i_msgFile                          const  like(msg_t.file)
     D  i_msgFileLib                       const  like(msg_t.lib)
     D  i_pgmCmdExc...
     D                                     const  like(pgm_t)
     D  i_libPgmCmdExc...
     D                                     const  like(lib_t)
     D  i_option                           const  likeds(option_t)
     D  i_libl                             const  likeds(inpLibList_t)
     D  i_useLibl                          const  like(bool_t)
     D  i_usrDefVars                       const  likeds(inpUsrDefVars_t)
     D  i_execOpt                          const  likeds(execOpt_t)

     D sendMsg...
     D                 PR
     D                                     extproc('STRPREPRC2_+
     D                                     sendMsg+
     D                                     ')
     D  i_msg                              value  likeds(msg_t)

     D endAbnormal...
     D                 pr
     D                                     extproc('STRPREPRC2_+
     D                                     endAbnormal+
     D                                     ')
     D  i_qEventf                          const  likeds(qObj_t)
     D                                     options(*nopass)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PSTRPREPR3  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PSTRPREPR3"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Init Prototypes             "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if defined(PSTRPREPR3)
      /eof
      /endif
      /define PSTRPREPR3

      *  Initialisieren Pre-Prozessor
     D initialize...
     D                 pr
     D                                     extproc('STRPREPRC3_+
     D                                     initialize+
     D                                     ')

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PSTRPREPR4  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PSTRPREPR4"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Event File Properties       "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if defined(PSTRPREPR4)
      /eof
      /endif
      /define PSTRPREPR4

     D enableEventFile...
     D                 pr
     D                                     extproc('STRPREPRC4_+
     D                                     enableEventFile+
     D                                     ')

     D isEmptyEventFile...
     D                 pr              n
     D                                     extproc('STRPREPRC4_+
     D                                     isEmptyEventFile+
     D                                     ')
     D  i_lib                        10a   const
     D  i_obj                        10a   const

     D clearEventFile...
     D                 pr
     D                                     extproc('STRPREPRC4_+
     D                                     clearEventFile+
     D                                     ')
     D  i_obj                        10a   const
     D  i_lib                        10a   const

     D prepareEventFile...
     D                 pr
     D                                     extproc('STRPREPRC4_+
     D                                     prepareEventFile+
     D                                     ')

     D openEventFile...
     D                 pr              n
     D                                     extproc('STRPREPRC4_+
     D                                     openEventFile+
     D                                     ')
     D  i_obj                        10a   const
     D  i_lib                        10a   const
     D  i_append                       n   const

     D updateLDA...
     D                 pr                  extproc('STRPREPRC4_+
     D                                     updateLDA')
     D  i_lib                        10a   const
     D  i_obj                        10a   const

     D writeEventFile...
     D                 pr                  extproc('STRPREPRC4_+
     D                                     writeEventFile+
     D                                     ')
     D  i_srcFile                          const  like(path_t)
     D  i_srcLib                     10a   const
     D  i_srcMbr                     10a   const
     D  i_lineNumber                 10i 0 const
     D  i_isAbnEnd                     n   const

     D closeEventFile...
     D                 pr                  extproc('STRPREPRC4_+
     D                                     closeEventFile+
     D                                     ')

     D copyEventFile...
     D                 pr                  extproc('STRPREPRC4_+
     D                                     copyEventFile+
     D                                     ')
     D  i_fromLib                    10a   const
     D  i_fromMbr                    10a   const
     D  i_toLib                      10a   const
     D  i_toMbr                      10a   const

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PSTRPREPR5  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PSTRPREPR5"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - QSYS Files Prototypes       "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if defined(PSTRPREPR5)
      /eof
      /endif
      /define PSTRPREPR5

      *  Opens an given source file.
     D SourceFile_open...
     D                 pr
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_open+
     D                                     ')
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)

      *  Returns the open status of the source file.
     D SourceFile_isOpen...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_isOpen+
     D                                     ')

      *  Returns the current line number of the source file.
     D SourceFile_getLineNbr...
     D                 pr            10i 0
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_getLineNbr+
     D                                     ')

      *  Returns the length of the data field of the source file.
     D SourceFile_getDtaLength...
     D
     D                 pr            10i 0
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_getDtaLength+
     D                                     ')

      *  Returns the library name of the source file.
     D SourceFile_getLibrary...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_getLibrary+
     D                                     ')

      *  Returns the file name of the source file.
     D SourceFile_getFile...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_getFile+
     D                                     ')

      *  Returns the member name of the source file.
     D SourceFile_getMember...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_getMember+
     D                                     ')

      *  Reads the next line from the source file.
     D SourceFile_readLine...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_readLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Reads the previous line from the source file.
     D SourceFile_readPrvLine...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_readPrvLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Closes the source file.
     D SourceFile_close...
     D                 pr
     D                                     extproc('STRPREPRC5_+
     D                                     SourceFile_close+
     D                                     ')

      *  Opens an given include file.
     D IncludeFile_open...
     D                 pr
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_open+
     D                                     ')
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)

      *  Returns the open status of the include file.
     D IncludeFile_isOpen...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_isOpen+
     D                                     ')

      *  Returns the current line number of the include file.
     D IncludeFile_getLineNbr...
     D                 pr            10i 0
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_getLineNbr+
     D                                     ')

      *  Returns the length of the data field of the include file.
     D IncludeFile_getDtaLength...
     D
     D                 pr            10i 0
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_getDtaLength+
     D                                     ')

      *  Returns the library name of the include file.
     D IncludeFile_getLibrary...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_getLibrary+
     D                                     ')

      *  Returns the file name of the include file.
     D IncludeFile_getFile...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_getFile+
     D                                     ')

      *  Returns the member name of the include file.
     D IncludeFile_getMember...
     D                 pr            10a
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_getMember+
     D                                     ')

      *  Reads the next line from the include file.
     D IncludeFile_readLine...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_readLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Reads the previous line from the include file.
     D IncludeFile_readPrvLine...
     D                 pr              n
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_readPrvLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Closes the include file.
     D IncludeFile_close...
     D                 pr
     D                                     extproc('STRPREPRC5_+
     D                                     IncludeFile_close+
     D                                     ')

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing PSTRPREPR6  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "PSTRPREPR6"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - QSYS Files Prototypes       "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if defined(PSTRPREPR6)
      /eof
      /endif
      /define PSTRPREPR6

      /copy QSTRPREPRC,TYPES_H

      *  Opens an given source file.
     D SourceStreamFile_open...
     D                 pr
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_open+
     D                                     ')
     D  i_stmf                             const  like(path_t)

      *  Returns the open status of the source file.
     D SourceStreamFile_isOpen...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_isOpen+
     D                                     ')

      *  Returns the current line number of the source file.
     D SourceStreamFile_getLineNbr...
     D                 pr            10i 0
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_getLineNbr+
     D                                     ')

      *  Returns the length of the data field of the source file.
     D SourceStreamFile_getDtaLength...
     D
     D                 pr            10i 0
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_getDtaLength+
     D                                     ')

      *  Returns the folder name of the source file.
     D SourceStreamFile_getFolder...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_getFolder+
     D                                     ')

      *  Returns the file name of the source file.
     D SourceStreamFile_getFile...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_getFile+
     D                                     ')

      *  Returns the path (folder + file name) of the source file.
     D SourceStreamFile_getPath...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_getPath+
     D                                     ')

      *  Reads the next line from the source file.
     D SourceStreamFile_readLine...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_readLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Reads the previous line from the source file.
     D SourceStreamFile_readPrvLine...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_readPrvLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Closes the source file.
     D SourceStreamFile_close...
     D                 pr
     D                                     extproc('STRPREPRC6_+
     D                                     SourceStreamFile_close+
     D                                     ')

      *  Opens an given include file.
     D IncludeStreamFile_open...
     D                 pr
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_open+
     D                                     ')
     D  i_stmf                             const  like(path_t)

      *  Returns the open status of the include file.
     D IncludeStreamFile_isOpen...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_isOpen+
     D                                     ')

      *  Returns the current line number of the include file.
     D IncludeStreamFile_getLineNbr...
     D                 pr            10i 0
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_getLineNbr+
     D                                     ')

      *  Returns the length of the data field of the include file.
     D IncludeStreamFile_getDtaLength...
     D
     D                 pr            10i 0
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_getDtaLength+
     D                                     ')

      *  Returns the folder name of the include file.
     D IncludeStreamFile_getFolder...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_getFolder+
     D                                     ')

      *  Returns the file name of the include file.
     D IncludeStreamFile_getFile...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_getFile+
     D                                     ')

      *  Returns the path (folder + file name) of the include file.
     D IncludeStreamFile_getPath...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_getPath+
     D                                     ')

      *  Reads the next line from the include file.
     D IncludeStreamFile_readLine...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_readLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Reads the previous line from the include file.
     D IncludeStreamFile_readPrvLine...
     D                 pr              n
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_readPrvLine+
     D                                     ')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

      *  Closes the include file.
     D IncludeStreamFile_close...
     D                 pr
     D                                     extproc('STRPREPRC6_+
     D                                     IncludeStreamFile_close+
     D                                     ')

      *  Returns the folder name of a given path.
     D Path_getFolder...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     Path_getFolder+
     D                                     ')
     D  i_path                             const like(path_t) options(*trim)

      *  Returns the file name of a given path.
     D Path_getFile...
     D                 pr                  like(path_t)
     D                                     extproc('STRPREPRC6_+
     D                                     Path_getFile+
     D                                     ')
     D  i_path                             const  like(path_t) options(*trim)

      *  Check existence of a stream file.
     D StreamFile_exists...
     D                 pr
     D                                     extproc('STRPREPRC6_+
     D                                     StreamFile_exists+
     D                                     ')
     D  i_stmf                             const  like(path_t) options(*trim)

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QCAPCMD  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QCAPCMD   "
mbrtype =  "RPGLE     "
mbrtext =  "Process Commands (QCAPCMD) API                    "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /IF NOT DEFINED(QCAPCMD)
      /DEFINE QCAPCMD
      *
      *  Process Commands (QCAPCMD) API
     D QCAPCMD...
     D                 PR                         extpgm('QCAPCMD')
     D  i_cmd                     32702A   const  options(*varsize)
     D  i_cmdLen                     10I 0 const
     D  i_ctrlBlk                 32767A   const  options(*varsize)
     D  i_ctrlBlkLen                 10I 0 const
     D  i_ctrlBlkFmt                  8A   const
     D  o_chgCmd                  32702A          options(*varsize)
     D  i_chgCmdLnPrv                10I 0 const
     D  o_chgCmdLnAvl                10I 0
     D  io_errorCode              32767A          options(*varsize)
      *
      *  Option control block
     D cpop0100_t      DS                  qualified               based(pDummy)
     D  typeCmdPrc             1      4I 0
     D  DBCS_data              5      5A
     D  prmtAction             6      6A
     D  cmdStrSyntax           7      7A
     D  msgRtvKey              8     11A
     D  ccsidCmdStr           12     15I 0                                      new V5R4
     D  res_01                16     20A
      *
      *  Type of command processing.
      *  The type of command processing to be performed by the system.
     D cQCAPCMD_PRC_EXC_QCMDEXC...
     D                 C                   0
     D cQCAPCMD_PRC_CHK_QCMDCHK...
     D                 C                   1
     D cQCAPCMD_PRC_EXC_CMDLINE...
     D                 C                   2
     D cQCAPCMD_PRC_CHK_CMDLINE...
     D                 C                   3
     D cQCAPCMD_PRC_CHK_CL_STMT...
     D                 C                   4
     D cQCAPCMD_PRC_CHK_SEU_CL...
     D                 C                   5
     D cQCAPCMD_PRC_CHK_SEU_CMD...
     D                 C                   6
     D cQCAPCMD_PRC_CHK_SEU_BND...
     D                 C                   7
     D cQCAPCMD_PRC_CHK_UDO...
     D                 C                   8
     D cQCAPCMD_PRC_CHK_SEU_CLLE...
     D                 C                   9
      *
      *  DBCS data handling.
      *  Whether the command analyzer should handle the SO/SI
      *  characters as DBCS delimiters.
     D cQCAPCMD_DBCS_IGNORE...
     D                 C                   '0'
     D cQCAPCMD_DBCS_HANDLE...
     D                 C                   '1'
      *
      *  Prompter action.
      *  Indicates whether the prompter should be called on a command string.
     D cQCAPCMD_PROMPT_NEVER...
     D                 C                   '0'
     D cQCAPCMD_PROMPT_ALWAYS...
     D                 C                   '1'
     D cQCAPCMD_PROMPT_SELECTIVE...
     D                 C                   '2'
     D cQCAPCMD_PROMPT_HELP...
     D                 C                   '3'
      *
      *  Command string syntax.
      *  Whether command processing should be done in i5/OS mode or System/38 mode.
     D cQCAPCMD_SYNTAX_SYSTEM...
     D                 C                   '0'
     D cQCAPCMD_SYNTAX_SYSTEM38...
     D                 C                   '1'
      *
      *  CCSID of command string.
      *  CCSID of the command string.
     D cQCAPCMD_CCSID_JOB...
     D                 C                   0
     D cQCAPCMD_CCSID_UTF8...
     D                 C                   1208
     D cQCAPCMD_CCSID_UTF16...
     D                 C                   1200
      *
      /ENDIF
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QMHRCVPM  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QMHRCVPM  "
mbrtype =  "RPGLE     "
mbrtext =  "Receive Program Message (QMHRCVPM) API            "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /IF NOT DEFINED(QMHRCVPM)
      /DEFINE QMHRCVPM
      *
      *  Receive Program Message (QMHRCVPM) API
     D QMHRCVPM...
     D                 PR                  extpgm('QMHRCVPM')
     D  o_msgInf                  65535A          options(*varsize)
     D  i_msgInfLen                  10I 0 const
     D  i_format                      8A   const
     D  i_callStkE                  256A   const
     D  i_callStkC                   10I 0 const
     D  i_msgType                    10A   const
     D  i_msgKey                      4A   const
     D  i_wait                       10I 0 const
     D  i_action                     10A   const
     D  io_ErrCode                65535A          options(*varsize)
     D  i_lenStkE                    10I 0 const  options(*nopass )             | optGrp 1
     D  i_callStkEQ                  20A   const  options(*nopass )             |
     D  i_callStkEDT                 10A   const  options(*nopass )             | optGrp 2
     D  i_ccsid                      10I 0 const  options(*nopass )             |
     D  i_alwDfRpyRjc                10A   const  options(*nopass )             | optGrp 3
      *
     D rcvm0100_t...
     D                 DS                  qualified               based(pDummy)
     D  bytRet                       10I 0                                      Bytes ret.
     D  bytAvl                       10I 0                                      Bytes avail.
     D  msgSev                       10I 0                                      Msg Severty
     D  msgID                         7A                                        Msg ID
     D  msgType                       2A                                        Msg Type
     D  msgKey                        4A                                        Msg Key
     D  reserved_1                    7A                                        Reserved
     D  ccsidCnvStsDtaTxt...                                                    Conv. Status
     D                               10I 0
     D  ccsidRplDtaTxt...                                                       Ccsid Dta/Txt
     D                               10I 0
     D  lenRplDtaRet                 10I 0                                      Len.RplDta Ret
     D  lenRplDtaAvl                 10I 0                                      Len.RplDta Avl
     D  varLenData                 3136
      * Replacement data or impromptu message text    CHAR(*)
      *
      /IF NOT DEFINED(rcvm0200_t)
      /DEFINE rcvm0200_t
      *
     D rcvm0200_t...
     D                 DS                  qualified               based(pDummy)
     D  bytRet                       10I 0                                      Bytes ret.
     D  bytAvl                       10I 0                                      Bytes avail.
     D  msgSev                       10I 0                                      Msg Severty
     D  msgID                         7A                                        Msg ID
     D  msgType                       2A                                        Msg Type
     D  msgKey                        4A                                        Msg Key
     D  msgF                         10A                                        Msg File
     D  msgFLib                      10A                                        Msg File Lib
     D  msgFLibRet                   10A                                        Msg File Lib
     D  sndJob                       10A                                        Snd.Job
     D  sndUser                      10A                                        Snd.User
     D  sndNbr                        6A                                        Snd.JobNbr
     D  sndPgm                       12A                                        Snd.Pgm
     D  sndPgmInstr                   4A                                        Snd.Pgm Instr#
     D  sndDate                       7A                                        Snd.Date
     D  sndTime                       6A                                        Snd.Time
     D  rcvPgm                       10A                                        Rcv.Pgm
     D  rcvPgmInstr                   4A                                        Rcv.Pgm Instr#
     D  sndType                       1A                                        Snd.Type
     D  rcvType                       1A                                        Rcv.Type
     D  reserved_01                   1A                                        reserved
     D  ccsidCnvStsTxt...
     D                               10I 0                                      Conv.Sts.Text
     D  ccsidCnvStsDta...
     D                               10I 0                                      Conv.Sts.Data
     D  alrOpt                        9A                                        Alert Option
     D  ccsidText                    10I 0                                      Ccsid Text
     D  ccsidRplDta                  10I 0                                      Ccsid Data
     D  lenRplDtaRet                 10I 0                                      Len.RplDta Ret
     D  lenRplDtaAvl                 10I 0                                      Len.RplDta Avl
     D  lenMsgRet                    10I 0                                      Len.Msg Avl
     D  lenMsgAvl                    10I 0                                      Len.Msg Ret
     D  lenMsgHlpRet                 10I 0                                      Len.Help Ret
     D  lenMsgHlpAvl                 10I 0                                      Len.Help Avl
     D  varLenData                 3136
      * Replacement data or impromptu message text    CHAR(*)
      * Message                                       CHAR(*)
      * Message help                                  CHAR(*)
      *
      /ENDIF
      *
      /IF NOT DEFINED(rcvm0300_t)
      /DEFINE rcvm0300_t
      *
     D rcvm0300_t...
     D                 DS                  qualified               based(pDummy)
     D  bytRet                       10I 0                                      Bytes ret.
     D  bytAvl                       10I 0                                      Bytes avail.
     D  msgSev                       10I 0                                      Msg Severty
     D  msgID                         7A                                        Msg ID
     D  msgType                       2A                                        Msg Type
     D  msgKey                        4A                                        Msg Key
     D  msgF                         10A                                        Msg File
     D  msgFLib                      10A                                        Msg File Lib
     D  msgFLibRet                   10A                                        Msg File Lib
     D  alrOpt                        9A                                        Alert Option
     D  ccsidCnvStsTxt...
     D                               10I 0                                      Conv.Sts.Text
     D  ccsidCnvStsDta...
     D                               10I 0                                      Conv.Sts.Data
     D  ccsidRplDta                  10I 0                                      Ccsid Data
     D  ccsidText                    10I 0                                      Ccsid Text
     D  lenRplDtaRet                 10I 0                                      Len.RplDta Ret
     D  lenRplDtaAvl                 10I 0                                      Len.RplDta Avl
     D  lenMsgRet                    10I 0                                      Len.Msg Avl
     D  lenMsgAvl                    10I 0                                      Len.Ms
     D  lenMsgHlpRet                 10I 0                                      Len.Help Ret
     D  lenMsgHlpAvl                 10I 0                                      Len.Help Avl
     D  lenSndInfRet                 10I 0                                      Len.SndInf Ret
     D  lenSndInfAvl                 10I 0                                      Len.SndInf Avl
     D  varLenData                 3136
      * Replacement data or impromptu message text    CHAR(*)
      * Message                                       CHAR(*)
      * Message help                                  CHAR(*)
      * Sender information                            CHAR(*)
      *
      /ENDIF
      *
      * --------------------------------------------
      *  QMHRCVM API - Sender Information Format
      * --------------------------------------------
     D rcvm_sndInf_t...
     D                 DS                  qualified               based(pDummy)
     D  sndJob                 1     10A                                        Snd.Job
     D  sndUser               11     20A                                        Snd.User
     D  sndNbr                21     26A                                        Snd.JobNbr
     D  sndDate               27     33A                                        Snd.Data
     D  sndTime               34     39A                                        Snd.Time
     D  sndType               40     40A                                        Snd.Type
     D  rcvType               41     41A                                        Rcv.Type
     D  sndPgm                42     53A                                        Snd.Pgm
     D  sndMod                54     63A                                        Snd.Module
     D  sndProc               64    319A                                        Snd.Procedure
     D  reserved_01          320    320A                                        reserved
     D  sndPgmNumStmt        321    324I 0                                      Num Stmt/Instr
     D  sndPgmStmts          325    354A                                        Stmts/Instr.
     D   sndPgmStmt                  10A   dim(3) overlay(sndPgmStmts)
     D  rcvPgm               355    364A                                        Rcv.Pgm
     D  rcvMod               365    374A                                        Rcv.Module
     D  rcvProc              375    630A                                        Rcv.Procedure
     D  reserved_02          631    640A                                        reserved
     D  rcvPgmNumStmt        641    644I 0                                      Num Stmt/Instr
     D  rcvPgmStmts          645    674A                                        Stmts/Instr.
     D   rcvPgmStmt                  10A   dim(3) overlay(rcvPgmStmts)
     D  reserved_03          675    676A                                        reserved
     D  ofsSndPgmName        677    680I 0                                      Ofs.Long Name
     D  lenSndPgmName        681    684I 0                                      Len.Long Name
     D  ofsSndPrcName        685    688I 0                                      Ofs.Long Name
     D  lenSndPrcName        689    692I 0                                      Len.Long Name
     D  ofsRcvPrcName        693    696I 0                                      Ofs.Long Name
     D  lenRcvPrcName        697    700I 0                                      Len.Long Name
     D  microSecs            701    706A                                        Microseconds
     D  sndUsrPrf            707    716A                                        Snd.User
      * Reserved                                      CHAR(*)
      * Long sending program name                     CHAR(*)
      * Long sending procedure name                   CHAR(*)
      * Long receiving procedure name                 CHAR(*)
      *
      * ---------------------------------------------------
      *  Call stack entry
      * ---------------------------------------------------
      /IF NOT DEFINED(cQMSG_CALLSTACK_ENTRY_SAME)
      /DEFINE cQMSG_CALLSTACK_ENTRY_SAME
     D cQMSG_CALLSTACK_ENTRY_SAME...
     D                 C                   '*'
      /ENDIF
      *
      /IF NOT DEFINED(cQMSG_CALLSTACK_ENTRY_EXT)
      /DEFINE cQMSG_CALLSTACK_ENTRY_EXT
     D cQMSG_CALLSTACK_ENTRY_EXT...
     D                 C                   '*EXT'
      /ENDIF
      *
      * ---------------------------------------------------
      *  Message action
      * ---------------------------------------------------
     D cQMSG_ACTION_OLD...
     D                 C                   '*OLD'
      *
     D cQMSG_ACTION_REMOVE...
     D                 C                   '*REMOVE'
      *
     D cQMSG_ACTION_SAME...
     D                 C                   '*SAME'
      *
      * ---------------------------------------------------
      *  Call stack entry qualification
      * ---------------------------------------------------
      /IF NOT DEFINED(cQMSG_CALLSTACK_ENTRY_QUALIFIER_NONE)
      /DEFINE cQMSG_CALLSTACK_ENTRY_QUALIFIER_NONE
     D cQMSG_CALLSTACK_ENTRY_QUALIFIER_NONE...
     D                 C                   '*NONE'
      /ENDIF
      *
      * ---------------------------------------------------
      *  Call stack entry data type
      * ---------------------------------------------------
      /IF NOT DEFINED(cQMSG_CALLSTACK_ENTRY_DATATYPE_CHAR)
      /DEFINE cQMSG_CALLSTACK_ENTRY_DATATYPE_CHAR
     D cQMSG_CALLSTACK_ENTRY_DATATYPE_CHAR...
     D                 C                   '*CHAR'
      /ENDIF
      *
      /IF NOT DEFINED(cQMSG_CALLSTACK_ENTRY_DATATYPE_PTR)
      /DEFINE cQMSG_CALLSTACK_ENTRY_DATATYPE_PTR
     D cQMSG_CALLSTACK_ENTRY_DATATYPE_PTR...
     D                 C                   '*PTR'
      /ENDIF
      *
      * ---------------------------------------------------
      *  Allow default reply rejection
      * ---------------------------------------------------
     D cQMSG_ALLOW_DFT_REPLY_REJECT_NO...
     D                 C                   '*NO'
      *
     D cQMSG_ALLOW_DFT_REPLY_REJECT_YES...
     D                 C                   '*YES'
      *
      /ENDIF
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QMHRMVPM  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QMHRMVPM  "
mbrtype =  "RPGLE     "
mbrtext =  "Remove Program Message (QMHRMVPM) API             "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(QMHRMVPM)
      /define QMHRMVPM
      *
      *  Remove Program Message (QMHRMVPM) API
     d QMHRMVPM...
     d                 PR                         extpgm('QMHRMVPM')
     d  i_callStackE                 10a   const
     d  i_callStackC                 10i 0 const
     d  i_msgKey                      4a   const
     d  i_msgToRmv                   10a   const
     d  i_errCode                 32767a         options(*varsize)
     d  i_lenCalStkE                 10i 0       options(*nopass)
     d  i_calStkEQual                20a         options(*nopass)
     d  i_rmvExcp                    10a         options(*nopass)
     d  i_calStkeDTyp                10a         options(*nopass)
      /endif
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QMHRTVM  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QMHRTVM   "
mbrtype =  "RPGLE     "
mbrtext =  "Retrieve Message (QMHRTVM) API                    "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /IF NOT DEFINED(QMHRTVM)
      /DEFINE QMHRTVM
      *
      *  Retrieve Message (QMHRTVM) API
     D QMHRTVM...
     D                 PR                  extpgm('QMHRTVM')
     D  o_msgInf                  65535A          options(*varsize)
     D  i_msgInfLen                  10I 0 const
     D  i_format                      8A   const
     D  i_msgID                       7A   const
     D  i_qMsgF                      20A   const
     D  i_rplData                 65535A   const  options(*varsize )
     D  i_rpldataLen                 10I 0 const
     D  i_rplVars                    10A   const
     D  i_rtnCtrlChrs                10A   const
     D  io_ErrCode                65535A          options(*varsize )
     D  i_rtvOpt                     10A   const  options(*nopass  )            | OptGrp 1
     D  i_toCcsid                    10I 0 const  options(*nopass  )            |
     D  i_ccsidRplDta                10I 0 const  options(*nopass  )            |
      *
      /if not defined(rtvm0100_t)
      /define rtvm0100_t
     D rtvm0100_t      DS                  qualified           based(pDummy)
      *  Bytes returned
     D  BYTRET                        9B 0
      *  Bytes available
     D  BYTAVL                        9B 0
      *  Length of message returned
     D  LENMSGRET                     9B 0
      *  Length of message available
     D  LENMSGAVL                     9B 0
      *  Length of msg help returned
     D  LENHLPRET                     9B 0
      *  Length of msg help available
     D  LENHLPAVL                     9B 0
      *  Msg text and data of varying length!
     D  DATA                       2048A
      *
      /endif
      /if not defined(rtvm0200_t)
      /define rtvm0200_t
     D rtvm0200_t      DS                  qualified           based(pDummy)
      *  Bytes returned
     D  bytRet                       10I 0
      *  Bytes available
     D  bytAvl                       10I 0
      *  Message severity
     D  msgSev                       10I 0
      *  Alert index
     D  altIdx                       10I 0
      * Alert Option
     D  altOpt                        9A
      * Log indicator
     D  logInd                        1A
      * Reserved
     D  reserved_1                    2A
      * Length of default reply ret.
     D  lenDftRpyR                   10I 0
      * Length of default reply avl.
     D  lenDftRpyA                   10I 0
      * Length of message returned
     D  lenMsgR                      10I 0
      * Length of message available
     D  lenMsgA                      10I 0
      * Length of message help ret.
     D  lenMsgHlpR                   10I 0
      * Length of message help avl.
     D  lenMsgHlpA                   10I 0
      *                       CHAR(*)  Default reply
      *                       CHAR(*)  Message
      *                       CHAR(*)  Message help
      *
      /endif
      /if not defined(rtvm0300_t)
      /define rtvm0300_t
     D rtvm0300_t      DS                  qualified           based(pDummy)
      *  Bytes returned
     D  bytRet                       10I 0
      *  Bytes available
     D  bytAvl                       10I 0
      *  Message severity
     D  msgSev                       10I 0
      *  Alert index
     D  altIdx                       10I 0
      * Alert Option
     D  altOpt                        9A
      * Log indicator
     D  logInd                        1A
      * Message ID
     D  msgID                         7A
      * Reserved
     D  reserved_01                   3A
      * Nbr. of subst. var. formats
     D  numVarFmt                    10I 0
      * CCSID conv. stat. ind. text
     D  csIndTxt                     10I 0
      * CCSID conv. stat. ind. data
     D  csIndDta                     10I 0
      * CCSID of Text returned
     D  ccsidTxt                     10I 0
      * Offset of default reply
     D  ofsDftR                      10I 0
      * Length of default reply ret.
     D  lenDftRpyR                   10I 0
      * Length of default reply avl.
     D  lenDftRpyA                   10I 0
      * Offset of message
     D  ofsMsg                       10I 0
      * Length of message returned
     D  lenMsgR                      10I 0
      * Length of message available
     D  lenMsgA                      10I 0
      * Offset of message help
     D  ofsMsgHlp                    10I 0
      * Length of message help ret.
     D  lenMsgHlpR                   10I 0
      * Length of message help avl.
     D  lenMsgHlpA                   10I 0
      * Ofs. of subst. var. formats
     D  ofsVarFmt                    10I 0
      * Length subst. var. fmt. ret.
     D  lenVarFmtR                   10I 0
      * Length subst. var. fmt. avl.
     D  lenVarFmtA                   10I 0
      * Length subst. var. element
     D  lenVarFmtE                   10I 0
      * Data
     D  data                       4096A
      *                       CHAR(*)  Default reply
      *                       CHAR(*)  Message
      *                       CHAR(*)  Message help
      *                       CHAR(*)  Substitution variable formats
      *
      /endif
      /if not defined(rtvm0400_t)
      /define rtvm0400_t
     D rtvm0400_t      DS                  qualified           based(pDummy)
      *  Bytes returned
     D  bytRet                       10I 0
      *  Bytes available
     D  bytAvl                       10I 0
      *  Message severity
     D  msgSev                       10I 0
      *  Alert index
     D  altIdx                       10I 0
      * Alert Option
     D  altOpt                        9A
      * Log indicator
     D  logInd                        1A
      * Message ID
     D  msgID                         7A
      * Reserved
     D  reserved_01                   3A
      * Nbr. of subst. var. formats
     D  numVarFmt                    10I 0
      * CCSID conv. stat. ind. text
     D  csIndTxt                     10I 0
      * CCSID conv. stat. ind. data
     D  csIndDta                     10I 0
      * CCSID of Text returned
     D  ccsidTxt                     10I 0
      * Offset of default reply
     D  ofsDftR                      10I 0
      * Length of default reply ret.
     D  lenDftRpyR                   10I 0
      * Length of default reply avl.
     D  lenDftRpyA                   10I 0
      * Offset of message
     D  ofsMsg                       10I 0
      * Length of message returned
     D  lenMsgR                      10I 0
      * Length of message available
     D  lenMsgA                      10I 0
      * Offset of message
     D  ofsMsgHlp                    10I 0
      * Length of message help ret.
     D  lenMsgHlpR                   10I 0
      * Length of message help avl.
     D  lenMsgHlpA                   10I 0
      * Ofs. of subst. var. formats
     D  ofsVarFmt                    10I 0
      * Length subst. var. fmt. ret.
     D  lenVarFmtR                   10I 0
      * Length subst. var. fmt. avl.
     D  lenVarFmtA                   10I 0
      * Length subst. var. element
     D  lenVarFmtE                   10I 0
      * Reply type
     D  rpyType                      10A
      * Reserved
     D  reserved_02                   2A
      * Maximum reply length
     D  maxRpyLen                    10I 0
      * Maximum reply decimal positions
     D  maxRpyDecPos                 10I 0
      * Offset of valid reply value entries
     D  ofsRpyE                      10I 0
      * Number of valid reply values entries returned
     D  numRpyER                     10I 0
      * Length of valid reply value entries returned
     D  lenRpyER                     10I 0
      * Length of valid reply value entries available
     D  lenRpyEA                     10I 0
      * Length of valid reply value entry
     D  lenRpyE                      10I 0
      * Offset of special reply value entries
     D  ofsSpcRpyE                   10I 0
      * Number of special reply values returned
     D  numSpcRpyER                  10I 0
      * Length of special reply value entries returned
     D  lenSpcRpyER                  10I 0
      * Length of special reply value entries available
     D  lenSpcRpyEA                  10I 0
      * Length of special reply value entry
     D  lenSpcRpyE                   10I 0
      * Offset of lower range reply value
     D  ofsLowRpyE                   10I 0
      * Length of lower range reply value returned
     D  lenLowRpyER                  10I 0
      * Length of lower range reply value available
     D  lenLowRpyEA                  10I 0
      * Offset of upper range reply value
     D  ofsUpRpyE                    10I 0
      * Length of upper range reply value returned
     D  ofsUpRpyER                   10I 0
      * Length of upper range reply value available
     D  ofsUpRpyEA                   10I 0
      * Offset of relational test entry
     D  ofsRelTestE                  10I 0
      * Length of relational test entry returned
     D  lenRelTestER                 10I 0
      * Length of relational test entry available
     D  lenRelTestEA                 10I 0
      * Message creation date
     D  crtDate                       7A
      * Reserved
     D  reserved_03                   1A
      * Message creation level number
     D  crtLvlNbr                    10I 0
      * Message modification date
     D  modDate                       7A
      * Reserved
     D  reserved_04                   1A
      * Message modification level number
     D  modLvlNbr                    10I 0
      * Stored CCSID of message
     D  storedCCSID                  10I 0
      * Offset of dump list entries
     D  ofsDmpListE                  10I 0
      * Number of dump list entries returned
     D  numDmpListER                 10I 0
      * Length of dump list entries returned
     D  lenDmpListER                 10I 0
      * Length of dump list entries available
     D  lenDmpListEA                 10I 0
      * Default program name
     D  dftPgmName                   10A
      * Default program library name
     D  dftPgmLib                    10A
      * Data
     D  data                       4096A
      *                       CHAR(*)  Default reply
      *                       CHAR(*)  Message
      *                       CHAR(*)  Message help
      *                       CHAR(*)  Substitution variable formats
      *                       CHAR(*)  Valid reply value entries
      *                       CHAR(*)  Special reply value entries
      *                       CHAR(*)  Lower range reply value
      *                       CHAR(*)  Upper range reply value
      *                       CHAR(*)  Relational test entry
      *                       CHAR(*)  Dump list entries
      *
      /endif
      /if not defined(qmhrtvm_substVarFmt_t)
      /define qmhrtvm_substVarFmt_t
     D qmhrtvm_substVarFmt_t...
     D                 DS                  qualified           based(pDummy)
     D  length                 1      4i 0
     D  sizeOrDecPos           5      8i 0
     D  size                         10i 0 overlay(sizeOrDecPos)
     D  decPos                       10i 0 overlay(sizeOrDecPos)
     D  type                   9     18a
      *                       CHAR(*)  Reserved
      /endif
      /ENDIF
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QUSRMBRD  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QUSRMBRD  "
mbrtype =  "RPGLE     "
mbrtext =  "Retrieve Member Description (QUSRMBRD) API        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(QUSRMBRD)
      /define QUSRMBRD
      *
      *  Retrieve Member Description (QUSRMBRD) API
     d QUSRMBRD...
     d                 pr                         extpgm('QUSRMBRD')
     d  o_rcvVar                  65535a          options(*varsize)
     d  i_lenRcvVar                  10i 0 const
     d  i_format                      8a   const
     d  i_qFile                      20A   const
     d  i_mbr                        10a   const
     d  i_ovrPrc                      1a   const
     d  io_errCode                65535a          options(*nopass: *varsize)    | OptGrp 1
     d  i_findMbrPrc                  1a   const  options(*nopass)              | OptGrp 2
      *
      /if not defined(mbrd0100_t)
      /define mbrd0100_t
      *  MBRD0100 Format
     d mbrd0100_t...
     d                 ds                  qualified               based(pDummy)
     d  bytRet                       10i 0
     d  bytAvl                       10i 0
     d  qFile                              likeds(qObj_t )
     d  mbr                          10a
     d  attr                         10a
     d  srcType                      10a
     d  crtDatTim                    13A
     d  srcChgDatTim                 13A
     d  text                         50A
     d  isSrcFile                      N
      /endif
      *
      /if not defined(mbrd0200_t)
      /define mbrd0200_t
      *  MBRD0200 Format
     d mbrd0200_t...
     d                 ds                  qualified               based(pDummy)
     d  bytRet                       10i 0
     d  bytAvl                       10i 0
     d  qFile                              likeds(qObj_t )
     d  mbr                          10a
     d  attr                         10a
     d  srcType                      10a
     d  crtDatTim                    13A
     d  srcChgDatTim                 13A
     d  text                         50A
     d  isSrcFile                      N
     d  isRemoteFile                   N
     d  isLogicalFile                  N
     d  isODPShareAlw                  N
     d  reserved_1                    2a
     d  numTotRcds                   10i 0
     d  numDltRcds                   10i 0
     d  dtaSpcSize                   10i 0
     d  accPathSize                  10i 0
     d  numBasedMbr                  10i 0
     d  chgDatTim                    13A
     d  savDatTim                    13A
     d  rstDatTim                    13A
     d  expDate                       7a
     d  reserved_2                    6a
     d  numDaysUsed                  10i 0
     d  dateLastUsed                  7a
     d  useResetDate                  7a
     d  reserved_3                    2a
     d  dtaSpcSizeMlt                10i 0
     d  accPathSizeMlt...
     d                               10i 0
     d  textCcsid                    10i 0
     d  ofsAddInf                    10i 0
     d  lenAddInf                    10i 0
     d  numTotRcdsU                  10u 0
     d  numDltRcdsU                  10u 0
     d  reserved_4                    6a
      /endif
      *
      /endif
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing QWCRTVCA  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "QWCRTVCA  "
mbrtype =  "RPGLE     "
mbrtext =  "Retrieve Current Attributes (QWCRTVCA) API        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(QWCRTVCA)
      /define QWCRTVCA
      *
      *  Retrieve Current Attributes (QWCRTVCA) API
     d QWCRTVCA...
     d                 pr                         extpgm('QWCRTVCA')
     d  o_rcvVar                  65535a          options(*varsize)
     d  i_lenRcvVar                  10i 0 const
     d  i_format                      8a   const
     d  i_numAttrRtn                 10i 0 const
     d  i_keyAttrRtn                 10i 0 const  dim(100)
     d  io_errCode                65535a          options(*varsize)
      *
     d QWCRTVCA_attrInf_t...
     d                 ds                  qualified               based(pDummy)
     d  lenAttr                      10i 0
     d  key                          10i 0
     d  dataType                      1a
     d  reserved_1                    3a
     d  lenData                      10i 0
      *   data                                  CHAR(*)
      *   reserved                              CHAR(*)
      *
      *  RTVC0100 Format
     d rtvc0100_t...
     d                 ds                  qualified               based(pDummy)
     d  numAttrRtn                   10i 0
      *   attrInf                               Array (*) of QWCRTVCA_attrInf_t
      *
     d QWCRTVCA_libName_t...
     d                 s             11a
      *
      *  RTVC0200 Format                                           based(pDummy)
     d rtvc0200_t...
     d                 ds                  qualified               based(pDummy)
     d  bytRet                       10i 0
     d  bytAvl                       10i 0
     d  numSysLiblE                  10i 0
     d  numPrdLiblE                  10i 0
     d  curLibExists                 10i 0
     d  numUsrLiblE                  10i 0
      *   library list                          Array (*) of CHAR(11)
      *
     d QWCRTVCA_aspGrpInfE_t...
     d                 ds                  qualified               based(pDummy)
     d  name                         10a
      *   reserved                              CHAR(*)
      *
      *  RTVC0300 Format
     d rtvc0300_t...
     d                 ds                  qualified               based(pDummy)
     d  bytRet                       10i 0
     d  bytAvl                       10i 0
     d  offsAspGrpInf                10i 0
     d  numAspGrpInfE                10i 0
     d  lenAspGrpInfE                10i 0
      *   ASP group information entry           Array (*) of CHAR(11)
      *
     d CURLIB_MISSING...
     d                 c                        0
     d CURLIB_EXISTS...
     d                 c                        1
      *
      * Keys of format RTVC0100
     d KEY_ALLOW_MULTIPLE_THREADS...
     d                 c                        0102                            CHAR(1)
     d KEY_BREAK_MESSAGE_HANDLING...
     d                 c                        0201                            CHAR(10)
     d KEY_CANCEL_KEY...
     d                 c                        0301                            CHAR(1)
     d KEY_CODED_CHARACTER_SET_ID...
     d                 c                        0302                            BINARY(4)
     d KEY_COUNTRY_OR_REGION_ID...
     d                 c                        0303                            CHAR(2)
     d KEY_CURRENT_USER_PROFILE...
     d                 c                        0305                            CHAR(10)
     d KEY_CURRENT_SYSTEM_POOL_IDENTIFIER...
     d                 c                        0307                            BINARY(4)
     d KEY_CHARACTER_IDENTIFIER_CONTROL...
     d                 c                        0311                            CHAR(10)
     d KEY_DATE_AND_TIME_JOB_BECAME_ACTIVE...
     d                 c                        0401                            CHAR(13)
     d KEY_DATE_AND_TIME_JOB_ENTERED_SYSTEM...
     d                 c                        0402                            CHAR(13)
     d KEY_DATE_AND_TIME_JOB_WAS_SCHEDULED_TO_RUN...
     d                 c                        0403                            CHAR(8)
     d KEY_DATE_FORMAT...
     d                 c                        0405                            CHAR(4)
     d KEY_DATE_SEPARATOR...
     d                 c                        0406                            CHAR(1)
     d KEY_DBCS_CAPABLE...
     d                 c                        0407                            CHAR(1)
     d KEY_DDM_CONVERSATION_HANDLING...
     d                 c                        0408                            CHAR(10)
     d KEY_DEFAULT_WAIT...
     d                 c                        0409                            BINARY(4)
     d KEY_DEVICE_RECOVERY_ACTION...
     d                 c                        0410                            CHAR(13)
     d KEY_DEFAULT_CODED_CHARACTER_SET_IDENTIFIER...
     d                 c                        0412                            BINARY(4)
     d KEY_DECIMAL_FORMAT...
     d                 c                        0413                            CHAR(1)
     d KEY_END_SEVERITY...
     d                 c                        0501                            BINARY(4)
     d KEY_END_STATUS...
     d                 c                        0502                            CHAR(1)
     d KEY_EXIT_KEY...
     d                 c                        0503                            CHAR(1)
     d KEY_GROUP_PROFILE_NAME...
     d                 c                        0702                            CHAR(10)
     d KEY_GROUP_PROFILE_NAME_SUPPLEMENTAL...
     d                 c                        0703                            CHAR(105)
     d KEY_INQUIRY_MESSAGE_REPLY...
     d                 c                        0901                            CHAR(10)
     d KEY_INTERNAL_JOB_ID...
     d                 c                        0902                            CHAR(16)
     d KEY_INITIAL_THREAD...
     d                 c                        0903                            CHAR(1)
     d KEY_JOB_ACCOUNTING_CODE...
     d                 c                        1001                            CHAR(15)
     d KEY_JOB_DATE...
     d                 c                        1002                            CHAR(7)
     d KEY_JOB_QUEUE_NAME_QUALIFIED...
     d                 c                        1004                            CHAR(20)
     d KEY_JOB_QUEUE_PRIORITY...
     d                 c                        1005                            CHAR(2)
     d KEY_JOB_SWITCHES...
     d                 c                        1006                            CHAR(8)
     d KEY_JOB_MESSAGE_QUEUE_FULL_ACTION...
     d                 c                        1007                            CHAR(10)
     d KEY_JOB_MESSAGE_QUEUE_MAXIMUM_SIZE...
     d                 c                        1008                            BINARY(4)
     d KEY_JOB_NAME...
     d                 c                        1009                            CHAR(26)
     d KEY_JOB_TYPE...
     d                 c                        1010                            CHAR(1)
     d KEY_JOB_SUBTYPE...
     d                 c                        1011                            CHAR(1)
     d KEY_JOB_LOCAL_TIME...
     d                 c                        1017                            CHAR(8)
     d KEY_JOB_LOG_OUTPUT...
     d                 c                        1018                            CHAR(10)
     d KEY_LANGUAGE_ID...
     d                 c                        1201                            CHAR(3)
     d KEY_LOGGING_LEVEL...
     d                 c                        1202                            CHAR(1)
     d KEY_LOGGING_OF_CL_PROGRAMS...
     d                 c                        1203                            CHAR(10)
     d KEY_LOGGING_SEVERITY...
     d                 c                        1204                            BINARY(4)
     d KEY_LOGGING_TEXT...
     d                 c                        1205                            CHAR(10)
     d KEY_MAXIMUM_THREADS...
     d                 c                        1304                            BINARY(4)
     d KEY_OUTPUT_QUEUE_NAME_QUALIFIED...
     d                 c                        1501                            CHAR(20)
     d KEY_OUTPUT_QUEUE_PRIORITY...
     d                 c                        1502                            CHAR(2)
     d KEY_PRINT_KEY_FORMAT...
     d                 c                        1601                            CHAR(10)
     d KEY_PRINT_TEXT...
     d                 c                        1602                            CHAR(30)
     d KEY_PRINTER_DEVICE_NAME...
     d                 c                        1603                            CHAR(10)
     d KEY_PURGE...
     d                 c                        1604                            CHAR(10)
     d KEY_RUN_PRIORITY...
     d                 c                        1802                            BINARY(4)
     d KEY_SORT_SEQUENCE_TABLE_QUALIFIED...
     d                 c                        1901                            CHAR(20)
     d KEY_STATUS_MESSAGE_HANDLING...
     d                 c                        1902                            CHAR(10)
     d KEY_SUBMITTER_JOB_NAME_QUALIFIED...
     d                 c                        1904                            CHAR(26)
     d KEY_SUBMITTER_MESSAGE_QUEUE_NAME_QUALIFIED...
     d                 c                        1905                            CHAR(20)
     d KEY_SYSTEM_POOL_IDENTIFIER...
     d                 c                        1907                            BINARY(4)
     d KEY_SPOOLED_FILE_ACTION...
     d                 c                        1982                            CHAR(10)
     d KEY_TIME_SEPARATOR...
     d                 c                        2001                            CHAR(1)
     d KEY_TIME_SLICE...
     d                 c                        2002                            BINARY(4)
     d KEY_TIME_SLICE_END_POOL...
     d                 c                        2003                            CHAR(10)
     d KEY_THREAD_COUNT...
     d                 c                        2008                            BINARY(4)
     d KEY_TIME_ZONE_CURRENT_ABBREVIATED_NAME...
     d                 c                        2020                            CHAR(10)
     d KEY_TIME_ZONE_CURRENT_FULL_NAME...
     d                 c                        2021                            CHAR(50)
     d KEY_TIME_ZONE_CURRENT_MESSAGE_IDENTIFIER...
     d                 c                        2022                            CHAR(7)
     d KEY_TIME_ZONE_CURRENT_OFFSET...
     d                 c                        2023                            BINARY(4)
     d KEY_TIME_ZONE_DESCRIPTION_NAME...
     d                 c                        2024                            CHAR(10)
     d KEY_TIME_ZONE_MESSAGE_FILE_NAME_QUALIFIED...
     d                 c                        2025                            CHAR(20)
     d KEY_TIME_ZONE_DAYLIGHT_SAVING_TIME_INDICATOR...
     d                 c                        2026                            CHAR(1)
      *
      * Keys of format RTVC0200
     d KEY_CURRENT_LIBRARY...
     d                 c                        0310                            CHAR(11)
     d KEY_PRODUCT_LIBRARIES...
     d                 c                        1660                            Array(*) of CHAR(11)
     d KEY_SYSTEM_LIBRARIES...
     d                 c                        1980                            Array(*) of CHAR(11)
     d KEY_USER_LIBRARIES...
     d                 c                        2110                            Array(*) of CHAR(11)
     d KEY_ALL_LIBRARIES_OF_FORMAT_RTVC0200...
     d                 c                        2702                            Array(*) of CHAR(11)
      *
      * Keys of format RTVC0300
     d KEY_ASP_GROUP_INFORMATION...
     d                 c                        0104                            CHAR(*)
      *
      /endif
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRCP  type PNLGRP - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRCP"
mbrtype =  "PNLGRP    "
mbrtext =  "Start Pre-Processor - Ger                         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
.*=====================================================================*
.*                                                                     *
.*  Kurzdokumentation :                                                *
.*                                                                     *
.*  Bereich . . . : STRPREPRC                                          *
.*  Objekt  . . . : STRPREPRCP                                         *
.*  Beschreibung  : Start Pre-Processor - Ger                          *
.*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
.*  Datum . . . . : 21.11.2000                                         *
.*                                                                     *
.*=====================================================================*
.*                                                                     *
.*  This software is free software, you can redistribute it and/or     *
.*  modify it under the terms of the GNU General Public License (GPL)  *
.*  as published by the Free Software Foundation.                      *
.*                                                                     *
.*  See GNU General Public License for details.                        *
.*          http://www.opensource.org                                  *
.*          http://www.opensource.org/licenses/gpl-license.html        *
.*                                                                     *
.*=====================================================================*
.*  History:                                                           *
.*                                                                     *
.*  Datum       Name          nderung                                 *
.*  ----------  ------------  ---------------------------------------  *
.*  23.01.2007  Th.Raddatz    Added parameter TAGSREQ(...) to command. *
.*                                                                     *
.*  16.05.2015  Th.Raddatz    Added parameter EVENTF to command.       *
.*                                                                     *
.*  18.06.2015  Th.Raddatz    Renamed parameter EVENTF to OPTION.      *
.*                                                                     *
.*  18.02.2016  Th.Raddatz    Added the >IMPORTANT< parameter tag.     *
.*                                                                     *
.*  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        *
.*                            command.                                 *
.*                                                                     *
.*  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     *
.*                            2048 to 8192.                            *
.*                                                                     *
.*  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC *
.*                            run the XCRTSQLOBJ command of CMOne      *
.*                            for source members without a STRPREPRC   *
.*                            header.                                  *
.*                                                                     *
.*  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   *
.*                            command.                                 *
.*                                                                     *
.*  17.05.2019  Th.Raddatz    Added new tags for monitoring messages   *
.*                            of 'CMD' tags. The new tags are:         *
.*                              'CMD'  CHKOBJ FOO/BAR *FILE;           *
.*                              'MONMSG'                               *
.*                                'MSGID' CPF9801; // Object not found *
.*                              'END-MONMSG'                           *
.*                                                                     *
.*  07.08.2019  Th.Raddatz    Added parameter EXECOPT.                 *
.*                                                                     *
.*  26.04.2020  Th.Raddatz    Added 'INCLUDE' tag.                     *
.*                                                                     *
.*  22.12.2020  Th.Raddatz    Fixed description of special value       *
.*                            *ADDJOBLOG of command parameter OPTION.  *
.*                                                                     *
.*  21.03.2022  Th.Raddatz    Added include file syntax:               *
.*                              library/file,member                    *
.*                                                                     *
.*  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     *
.*                            to support IFS stream files.             *
.*                                                                     *
.*=====================================================================*
.* >>PRE-COMPILER<<                                                    *
.*   >>CRTCMD<< CRTPNLGRP    PNLGRP(&LI/STRPREPRCP) +                  *
.*                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
.*   >>EXECUTE<<                                                       *
.* >>END-PRE-COMPILER<<                                                *
.*=====================================================================*
.*
.*****************************************************************
.*  Start of Panel Group
.*****************************************************************
:PNLGRP.

.*****************************************************************
.*  Provide all the help for the command together in one help ID
.*  so that it can be used by a search index.
.*****************************************************************
:HELP name='STRPREPRC/ALL'.
:IMHELP name=STRPREPRC.
:IMHELP name='STRPREPRC/USESRCFILE'.
:IMHELP name='STRPREPRC/USESRCMBR'.
:IMHELP name='STRPREPRC/USESRCSTMF'.
:IMHELP name='STRPREPRC/CMD'.
:IMHELP name='STRPREPRC/OPTION'.
:IMHELP name='STRPREPRC/CHGOBJD'.
:IMHELP name='STRPREPRC/OBJTYPE'.
:IMHELP name='STRPREPRC/OBJSRCFILE'.
:IMHELP name='STRPREPRC/OBJSRCLIB'.
:IMHELP name='STRPREPRC/OBJSRCMBR'.
:IMHELP name='STRPREPRC/LIB'.
:IMHELP name='STRPREPRC/OBJ'.
:IMHELP name='STRPREPRC/TYPECODE'.
:IMHELP name='STRPREPRC/SRCLIB'.
:IMHELP name='STRPREPRC/SRCFILE'.
:IMHELP name='STRPREPRC/SRCMBR'.
:IMHELP name='STRPREPRC/TESTLIB'.
:IMHELP name='STRPREPRC/TESTOBJ'.
:IMHELP name='STRPREPRC/TGTRLS'.
:IMHELP name='STRPREPRC/FRMSRCLIB'.
:IMHELP name='STRPREPRC/FRMSRCFILE'.
:IMHELP name='STRPREPRC/FRMSRCMBR'.
:IMHELP name='STRPREPRC/USER0'.
:IMHELP name='STRPREPRC/USER1'.
:IMHELP name='STRPREPRC/USER2'.
:IMHELP name='STRPREPRC/USER3'.
:IMHELP name='STRPREPRC/USER4'.
:IMHELP name='STRPREPRC/USER5'.
:IMHELP name='STRPREPRC/USER6'.
:IMHELP name='STRPREPRC/USER7'.
:IMHELP name='STRPREPRC/USER8'.
:IMHELP name='STRPREPRC/USER9'.
:IMHELP name='STRPREPRC/STMF'.
:IMHELP name='STRPREPRC/USRDEFVAR'.
:IMHELP name='STRPREPRC/LIBL'.
:IMHELP name='STRPREPRC/USELIBL'.
:IMHELP name='STRPREPRC/TAGSREQ'.
:IMHELP name='STRPREPRC/EXICMDEXC'.
:IMHELP name='STRPREPRC/EXECOPT'.
:EHELP.

.*****************************************************************
.*  Primary help text for the command.
.*****************************************************************
:HELP NAME='STRPREPRC'.
Pre-Prozessor starten - Hilfe
:P.
Der Befehl STRPREPRC startet den Pre-Prozessor. Der Pre-Prozessor
durchsucht die angegebene Quellenteildatei nach Pre-Prozessor Marken und
fgt die dort gefundenen Schlsselworte in den Erstellungsbefehl ein,
bzw. ersetzt bereits vorhandene Schlsselworte. Zu ersetzende Schlsselwrte
mssen durch :HP3.>>PARM<<:EHP3. Marken definiert werden.
:P.
Weiterhin kann der Pre-Prozessor Vor- und Nachlaufbefehle vor, bzw. nach
dem eigentlichen Erstellungsbefehl ausfhren.
:P.
ber eine PDM-Kurzbefehl lassen sich die Objekte, die ber Pre-Prozessor
Anweisungen in der Quellenteildatei verfgen, leicht erstellen:
:P.
:LINES.
STRPREPRC USESRCFILE(&L/&F) USESRCMBR(&N) LIB(&O) OBJ(&N)
            SRCLIB(&L) SRCFILE(&F) SRCMBR(&N)
:ELINES.
:P.
Obwohl der Befehl STRPREPRC ursprnglich entwickelt worden ist, um
die eingesetzte Change Management Software an eigene Bedrfnisse
anzupassen, kann er auch ausserhalb der Change Management Software
verwendet werden und gute Dienste leisten.
:P.
Der Anweisungsblock fr den Pre-Prozessor kann wie folgt aussehen:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00        >>CRTCMD<<           CRTRPGMOD(&LI/&OB) +
0003.00                               SRCFILE(&SL/&SF) +
0004.00                               SRCMBR(&SM);
0005.00
0006.00        >>INCLUDE<<          &SL/QINCLUDE MYINCLUDE
0007.00
0008.00        >>IMPORTANT<<
0009.00            >>PARM<<         TRUNCNBR(*NO);
0010.00        >>END-IMPORTANT<<
0011.00
0012.00        >>COMPILE<<
0013.00            >>PARM<<         TRUNCNBR(*NO);
0014.00        >>END-COMPILE<<
0015.00
0016.00        >>LINK<<
0017.00            >>PARM<<         ACTGRP(*CALLER);
0018.00        >>END-LINK<<
0019.00
0020.00        >>CMD<<              OVRDBF +
0021.00                               FILE(SRCFILE) +
0022.00                               FROMFILE(QRPGLESRC) +
0023.00                               MBR(*FIRST) +
0024.00                               OVRSCOPE(*JOB);
0025.00
0026.00        /* ndern Bibliotheksliste */
0027.00        >>CURLIB<<           *CRTDFT;
0028.00        >>LIBL<<             &LL;
0029.00
0030.00        >>EXECUTE<<
0031.00        /* Wiederherstellen Bibliotheksliste */
0032.00        >>CURLIB<<           &CX;
0033.00        >>LIBL<<             &LX;
0034.00
0035.00        >>CMD<<              DLTOVR +
0036.00                               FILE(SRCFILE) +
0037.00                               LVL(*JOB);
0038.00    >>END-PRE-COMPILER<<
:ELINES.
:P.
:HP1.Verwendung von Variablen im Pre-Prozessor-Abschnitt::EHP1.
:P.
Im Pre-Prozessor-Abschnitt lassen sich Variablen einbinden, um flexibler
auf ussere Anforderungen reagieren zu knnen. So knnte es bspw. sinnvoll
sein, die Objektbibliothek von aussen mitgeben zu knnen, um das Objekt
je nach Anforderung in verschiedene Bibliotheken erstellen zu knnen.
:P.
Die mglichen Variablen knnen am STRPREPRC Prompt per F9 eingeblendet
werden, um die entsprechenden Werte angeben zu knnen.
:P.
Im Zusammenspiel mit einem PDM-Kurzbefehl (siehe oben) lt sich dies
komfortabel automatisieren.
:P.
:HP1.Die Bedeutung der Marken im Einzelnen::EHP1.
:P.
:PARML.
:PT.:PV.>>PRE-COMPILER<<:EPV.
:PD.Diese Marke leitet den Pre-Prozessor-Abschnitt in der Quellenteildatei
ein.

:PT.>>END-PRE-COMPILER<<
:PD.Diese Marke beendet den Pre-Prozessor-Abschnitt in der
Quellendatei. Alle sonstigen Marken des Pre-Prozessors mssen sich zwischen
diesen beiden Marken befinden.

:PT.>>CRTCMD<<
:PD.Diese Marke definiert den ber >>EXECUTE<< auszufhrenden
Erstellungsbefehl.
Die >>CRTCMD<< Marke ist optional. Der Erstellungsbefehl kann
alternativ auch ber den Befehl STRPREPRC mitgegeben werden. Wenn
die >>CRTCMD<< Marke angegeben wird, dann sollte sie nur einmal
am Anfang der Pre-Prozessor-Anweisungen definiert werden.

:PT.>>INCLUDE<<
:PD.Diese Marke bindet eine Teildatei mit Pre-Prozessor-Anweisungen ein.
Die Syntax folgt hierbei der RPG /copy Anweisung. Ein verschachteltes
Einbinden von Teildateien ist nicht erlaubt. Syntax:
:p.
QSYS Dateisystem:
:p.
:LINES.
   Datei,Teildatei
   Bibliothek/Datei,Teildatei
:ELINES.
:p.
IFS Dateisystem:
:p.
:LINES.
   /IFSDatei
   ./IFSDatei
   /Verzeichnis/IFSDatei
   .Verzeichnis/IFSDatei
   'IFS Datei mit Leerzeichen'
   "IFS Datei mit Leerzeichen"
:ELINES.

:PT.>>IMPORTANT<<
:PD.Diese Marke leitet den Abschnitt fr die Compiler-Schlsselworte ein.

:PT.>>END-IMPORTANT<<
:PD.Diese Marke beendet den Abschnitt fr die
Compiler-Schlsselworte. Zwischen diesen beiden Marken werden die
Befehlsschlsselwrter ber :HP3.>>PARM<<:EHP3. Marken angegeben. Von
der Verabeitung her betrachtet gibt es keinen Unterschied zwischen
den Abschnitten IMPORTANT, COMPILE und LINK. Die Abschnitte knnen daher
frei nach Gefhl verwendet werden.

:PT.>>COMPILE<<
:PD.Diese Marke leitet den Abschnitt fr die Compiler-Schlsselworte ein.

:PT.>>END-COMPILE<<
:PD.Diese Marke beendet den Abschnitt fr die
Compiler-Schlsselworte. Zwischen diesen beiden Marken werden die
Befehlsschlsselwrter ber :HP3.>>PARM<<:EHP3. Marken angegeben. Von
der Verabeitung her betrachtet gibt es keinen Unterschied zwischen
den Abschnitten IMPORTANT, COMPILE und LINK. Die Abschnitte knnen daher
frei nach Gefhl verwendet werden.

:PT.>>LINK<<
:PD.Diese Marke leitet den Abschnitt fr die Linker-Schlsselworte ein.

:PT.>>END-LINK<<
:PD.Diese Marke beendet den Abschnitt fr die
Linker Schlsselworte. Zwischen diesen beiden Marken werden die
Befehlsschlsselwrter ber :HP3.>>PARM<<:EHP3. Marken angegeben. Von
der Verabeitung her betrachtet gibt es keinen Unterschied zwischen
den Abschnitten IMPORTANT, COMPILE und LINK. Die Abschnitte knnen daher
frei nach Gefhl verwendet werden.

:PT.>>LIBL<<
:PD.Diese Marke fr den Befehl CHGLIBL aus, um die Bbliotheksliste
auf den angegebenen Wert zu setzen. Die angegebenen Bibliotheken mssen
durch Leerzeichen getrennt angegeben sein. Die berschriebene Bibliotheksliste
steht anschlieend in der Variablen :HP2.&LX:EHP2. zur Verfgung.

:PT.>>CURLIB<<
:PD.Diese Marke fhrt den Befehl CHGLIBL aus, um die aktuelle Bibliothek
auf den angegebenen Wert zu setzen. Die berschriebene aktuelle Bibliothek
steht anschlieend in der Variablen :HP2.&CX:EHP2. zur Verfgung.

:PT.>>PARM<<
:PD.Diese Marke definiert ein Schlsselwort fr den
Erstellungsbefehl. >>PARM<< Marken sind nur innerhalb der
Compiler- und Linker-Abschnitte zulssig. ber >>PARM<<
definierte Schlsselwrter berschreiben Schlsselwrte
eines bergebenen oder unter :HP3.>>CMD<<:EHP3. angegebenen
Befehls.

:PT.>>CMD<<
:PD.Diese Marke definiert einen OS/400 CL-Befehl, der an dieser Stelle
der Pre-Prozessor-Anweisungen ausgefhrt werden soll. Wenn diese Marke vor
einer :HP3.>>EXECUTE<<:EHP3. Marke angegeben wird, so entspricht dies
einem Vorlaufbefehl, der vor dem Erstellungsbefehl ausgefhrt wird. Wenn
diese Marke nach einer :HP3.>>EXECUTE<<:EHP3. Marke angegeben wird, so
entspricht dies einem Nachlaufbefehl, der nach dem Erstellungsbefehl
ausgefhrt wird. >>CMD<< Marken drfen mehrfach vorkommen.
:P.
Bei Vor- und Nachlaufbefehlen knnen auftretende Fehler ignoriert
werden, wie in folgendem Beispiel gezeigt:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00      >>CMD<<  DLTF FILE(QGPL/QFOO);
0003.00      >>MONMSG<<
0004.00        >>MSGID<< CPF2105; // Object FOO not found;
0005.00      >>END-MONMSG<<
0006.00    >>END-PRE-COMPILER<<
:ELINES.
:P.
Es knnen bis zu 50 Nachrichten angegeben werden, die bei einem
auftretenden Fehler ignoriert werden.

:PT.>>EXECUTE<<
:PD.Diese Marke lsst den Erstellungsbefehl ausfhren. Die >>EXECUTE<<
Marke sollte nur einmal angegeben werden. Wenn die >>EXECUTE<< Marke
nicht angegeben wird, dann wird der Erstellungsbefehl impliziet am
Ende der Pre-Prozessor-Anweisungen ausgefhrt.
:EPARML.

:P.
:HP1.Die Bedeutung der Zeilenendezeichen im Einzelnen::EHP1.
:P.
Die Marken :HP3.>>PARM<<:EHP3., :HP3.>>CMD<<:EHP3. und
:HP3.>>EXECUTE<<:EHP3. mssen mit einem Zeilenendekennzeichen
abgeschlossen werden.
:P.
:PARML.
:PT.:PV.'+' - Zeichen:EPV.
:PD.Die Zeile ist nicht abgeschlossen. Es folgt eine weitere Zeile. Die
nachfolgende Zeile wird :HP1.ohne:EHP1. fhrende Leerzeichen hinzugefgt.

:PT.:PV.'-' - Zeichen:EPV.
:PD.Die Zeile ist nicht abgeschlossen. Es folgt eine weitere Zeile. Die
nachfolgende Zeile wird :HP1.mit:EHP1. fhrenden Leerzeichen
hinzugefgt. Die Anzahl
der fhrenden Leerzeichen richtet sich nach der Position des
Befehlsschlsselwortes. Wird z.B. OVRDBF(...) angegeben, so wird die
Startposition der nchsten Zeile durch das 'O' von OVRDBF(...)
gekennzeichnet.

:PT.:PV.';' - Zeichen:EPV.
:PD.Die Zeile ist abgeschlossen. Es folgt keine weitere Zeile.

:EPARML.

:EHELP.

.*****************************************************************
.*  Hilfe text for the command parameters.
.*****************************************************************

.********************************************
.*  Keyword:  USESRCFILE
.********************************************
:HELP NAME='STRPREPRC/USESRCFILE'.
Quellendatei (USESRCFILE) - Hilfe
:XH3.Quellendatei (USESRCFILE)
:P.
Name der Quellendatei, welche die Quellenteildatei mit den
Pre-Prozessor-Anweisungen fr die Objekterstellung enthlt.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.Name der Quellendatei:EPV.
:PD.Name der Quellendatei.
:PT.:PV.Bibliothek:EPV.
:PD.Name der Bibliothek, welche die Quellendatei enthlt.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  USESRCMBR
.********************************************
:HELP NAME='STRPREPRC/USESRCMBR'.
Teildatei (USESRCMBR) - Hilfe
:XH3.Teildatei (USESRCMBR)
:P.
Name der Quellenteildatei, welche die Pre-Prozessor-Anweisungen enthlt. In
der Regel ist dies die gleiche Quellenteildatei, die auch fr die
Objekterstellung verwendet wird.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.Name der Quellenteildatei:EPV.
:PD.Geben sie den Namen der Quellenteildatei ein, welche die
Pre-Prozessor-Anweisungen enthlt.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  USESRCSTMF
.********************************************
:HELP NAME='STRPREPRC/USESRCSTMF'.
Quellendatenstromdatei (USESRCSTMF) - Hilfe
:XH3.Quellendatenstromdatei (USESRCSTMF)
:P.
Name der IFS Quellendatenstromdatei, welche die Pre-Prozessor-Anweisungen enthlt. In
der Regel ist dies die gleiche IFS Quellendatenstromdatei, die auch fr die
Objekterstellung verwendet wird.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.Name der IFS Quellendatenstromdatei:EPV.
:PD.Geben sie den Namen der IFS Quellendatenstromdatei ein, welche die
Pre-Prozessor-Anweisungen enthlt.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  CMD
.********************************************
:HELP NAME='STRPREPRC/CMD'.
Auszufhrender Befehl (CMD) - Hilfe
:XH3.Auszufhrender Befehl (CMD)
:P.
Befehlszeichenfolge, mit der das Objekt erstellt werden soll. Die hier
angegebene Befehlszeichenfolge wird ber die Marke :HP3.>>EXECUTE<<:EHP3.
ausgefhrt. Wenn kein Befehl angegeben wird, dann muss der Erstellungsbefehl
in der Quellenteildatei an der :HP3.>>CRTCMD<<:EHP3. Marke angegeben werden.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.Auszufhrender Befehl:EPV.
:PD.
Befehlszeichenfolge der Objekterstellungsbefehls. Der
hier angegeben Befehl berschreibt einen in der
Quellenteildatei angegebenen Befehl.
:PT.keine Angabe eines Erstellungsbefehls
:PD.
Der Erstellungsbefehl muss nicht angegeben werden, wenn er in der
Quellenteildatei angegeben ist.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  OPTION  (optional)
.********************************************
:HELP NAME='STRPREPRC/OPTION'.
Ereignisdatei Auswahlmgl. - Hilfe
:XH3.Ereignisdatei Auswahlmgl. (OPTION)
:P.
Gibt an, ob eine Ereignisdatei fr die Verwendung durch Client-Tools
erstellt wird.
:P.
:HP3.Achtung::EHP3. Wird die Option :HP3.*EVENTF:EHP3. zur Ausgabe einer
Ereignisdatei gesetzt, so werden die Stellen 1-20 des Local Data Area (*LDA)
verwendet, um den Namen der Bibliothek und des Objekts an RDi/WDSCi zu
bergeben. Die Bibliothek zur Ausgabe der EVFEreignisdatei wird in folgender
Reihenfolge durchgefhrt, bis eine benannte Bibliothek gefunden wurde:
:P.
:LINES.
 - Objektbibliothek (LIB)
 - Quellenbibliothek (SRCLIB)
 - Bibliothek der gelesenen Quellendatei (USESRCFILE)
:ELINES.
:P.
Mit der Auswahl *EVENTF wird sichergestellt, dass Fehlerinformationen grundstzlich
zur Verfgung stehen. Entweder sind es die durch den Objekterstellungsbefehl
protokollierten Umwandlungsfehler oder die bei einem Fehler aufgelaufenen Nachrichten
aus dem Jobprotokoll.
:P.
In der Datei STRPRE2 knnen Paarungen Nachrichten-ID/Ersatzvariable
hinterlegt werden, anhand derer STRPREPRC Informationen aus dem
Jobprotokoll hinsichtlich der fehlerhaften Zeilennummer ziehen kann.
Die Spalte FMT enthlt hierfr die Nummer der Ersatzvariablen, welche
die Nummer der fehlerhaften Zeile enthlt.
:P.
Wird in der Spalte FMT '-1' eingetragen, so bedeutet dies, dass die
zugeordnete Nachrichten-ID beim Auswerten des Job Protokolls ignoriert
wird.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NOEVENTF:EPK.
:PD.Es werden keine zustzlichen Eintrge in eine Ereignisdatei zur Verwendung
durch Client-Tools geschrieben.
:PT.:PV.*EVENTF:EPV.
:PD.Kommt es bei der Objekterstellung ohne Ereignisdatei oder bei einem Vor-
oder Nachlaufbefehl zu einem Fehler, so werden die im Jobprotokoll aufgelaufenen
Nachrichten in eine Ereignisdatei zur Verwendung durch Client-Tools geschrieben.
:PT.:PK DEF.*NOJOBLOG:EPK.
:PD.Es werden keine Jobprotokolleintrge ausgegeben, wenn es keinen Fehler
gegeben hat.
:PT.:PV.*ADDJOBLOG:EPV.
:PD.Auch wenn es bei der Objekterstellung nicht zu einem Fehler gekommen ist,
werden die aufgelaufenen Nachrichten aus dem Job Protokoll in eine
Ereignisdatei zur Verwendung durch Client-Tools geschrieben. Nachrichten von
Vor- oder Nachlaufbefehlen werden nicht protokolliert.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  CHGOBJD (optional)
.********************************************
:HELP NAME='STRPREPRC/CHGOBJD'.
ndern Objektbeschreibung - Hilfe
:XH3.ndern Objektbeschreibung (CHGOBJD)
:P.
Gibt an, ob die Objektbeschreibung des zu erstellenden Objektes
gendert werden soll. Dies kann bei nicht quellenbasierten Objekten
sinnvoll sein, wenn diese ber ein Skript erstellt werden und der
Standort des Skripts im Objekt abgelegt werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NO:EPK.
:PD.Die Objektbeschreibung wird nicht gendert.
:PT.:PV.*YES:EPV.
:PD.Die Objektbeschreibung wird gendert.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJTYPE
.********************************************
:HELP NAME='STRPREPRC/OBJTYPE'.
Objekttyp - Hilfe
:XH3.Objekttyp (OBJTYPE)
:P.
Gibt den Typ des Objekts an, dessen Objektbeschreibung gendert
werden soll.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.Objekt-Typ:EPV.
:PD.Typ des Objekts, dessen Objektbeschreibung gendert
werden soll.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCFILE
.********************************************
:HELP NAME='STRPREPRC/OBJSRCFILE'.
Objekt-Quellendatei - Hilfe
:XH3.Objekt-Quellendatei (OBJSRCFILE)
:P.
Quellendatei, aus der das Objekt erstellt worden ist.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.Die Angabe der Quellendatei wird nicht gendert.
:PT.:PV.*DFT:EPV.
:PD.Name der Bibliothek, wie am Parameter :HP2.SRCFILE:EHP2. angegeben.
:PT.:PV.Quellendatei:EPV.
:PD.Quellendatei, aus der das Objekt erstellt worden ist.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCLIB
.********************************************
:HELP NAME='STRPREPRC/OBJSRCLIB'.
Objekt-Quellenbibliothek - Hilfe
:XH3.Objekt-Quellenbibliothek (OBJSRCLIB)
:P.
Quellenbibliothek, aus der das Objekt erstellt worden ist.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.Die Angabe der Quellenbibliothek wird nicht gendert.
:PT.:PV.*DFT:EPV.
:PD.Name der Bibliothek, wie am Parameter :HP2.SRCLIB:EHP2. angegeben.
:PT.:PV.Quellenbibliothek:EPV.
:PD.Quellenbibliothek, aus der das Objekt erstellt worden ist.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCMBR
.********************************************
:HELP NAME='STRPREPRC/OBJSRCMBR'.
Objekt-Quellenteildatei - Hilfe
:XH3.Objekt-Quellenteildatei (OBJSRCMBR)
:P.
Quellenteildatei, aus der das Objekt erstellt worden ist.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.Die Angabe der Quellenteildatei wird nicht gendert.
:PT.:PV.*DFT:EPV.
:PD.Name der Quellenteildatei, wie am Parameter :HP2.SRCMBR:EHP2. angegeben.
:PT.:PV.Name der Quellenteildatei:EPV.
:PD.Quellenteildatei, aus der das Objekt erstellt worden ist.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  LIB (optional)
.********************************************
:HELP NAME='STRPREPRC/LIB'.
Wert fr Bibliothek      (&LI) (LIB) - Hilfe
:XH3.Wert fr Bibliothek      (&LI) (LIB)
:P.
Wert, der fr die Ersatzvariable 'Bibliothek' (&LI) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Bibliotheksname:EPV.
:PD.Geben sie den Namen der Bibliothek ein, in welcher das
Objekt erstellt wird.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJ (optional)
.********************************************
:HELP NAME='STRPREPRC/OBJ'.
Wert fr Objekt          (&OB) (OBJ) - Hilfe
:XH3.Wert fr Objekt          (&OB) (OBJ)
:P.
Wert, der fr die Ersatzvariable 'Objekt' (&OBJ) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*DFT:EPV.
:PD.Name des Objekts, wie am Parameter :HP2.SRCMBR:EHP2. angegeben.
:PT.:PV.Objektname:EPV.
:PD.Geben sie den Namen des zu erstellenden Objekts ein.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TYPECODE (optional)
.********************************************
:HELP NAME='STRPREPRC/TYPECODE'.
Wert fr Type Code       (&TY) (TYPECODE) - Hilfe
:XH3.Wert fr Type Code       (&TY) (TYPECODE)
:P.
Wert, der fr die Ersatzvariable 'Type Code' (&TY) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Type Code:EPV.
:PD.Geben sie den dem Objekt zugeordneten Type Code ein.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCLIB'.
Wert fr Quellenbibl.    (&SL) (SRCLIB) - Hilfe
:XH3.Wert fr Quellenbibl.    (&SL) (SRCLIB)
:P.
Wert, der fr die Ersatzvariable 'Quellenbibliothek' (&SL) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*DFT:EPV.
:PD.Name der Bibliothek, wie am Parameter :HP2.USESRCFILE:EHP2. angegeben.
:PT.:PV.Bibliotheksname:EPV.
:PD.Name der Quellenbibliothek.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCFILE (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCFILE'.
Wert fr Quellendatei    (&SF) (SRCFILE) - Hilfe
:XH3.Wert fr Quellendatei    (&SF) (SRCFILE)
:P.
Wert, der fr die Ersatzvariable 'Quellendatei' (&SF) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*DFT:EPV.
:PD.Name der Quellendatei, wie am Parameter :HP2.USESRCFILE:EHP2. angegeben.
:PT.:PV.Name der Quellendatei:EPV.
:PD.Den Namen der Quellendatei eingeben, die die
umzuwandelnde Quellenteildatei enthlt.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCMBR (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCMBR'.
Wert fr Quell.Teildatei (&SM) (SRCMBR) - Hilfe
:XH3.Wert fr Quell.Teildatei (&SM) (SRCMBR)
:P.
Wert, der fr die Ersatzvariable 'Quellenteildatei' (&SM)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*DFT:EPV.
:PD.Name der Quellenteildatei, wie am Parameter :HP2.USESRCMBR:EHP2. angegeben.
:PT.:PV.Name der Quellenteildatei:EPV.
:PD.Name der Quellenteildatei.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TESTLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/TESTLIB'.
Wert fr Testbibliothek  (&TL) (TESTLIB) - Hilfe
:XH3.Wert fr Testbibliothek  (&TL) (TESTLIB)
:P.
Wert, der fr die Ersatzvariable 'Testbibliothek' (&TL)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Bibliotheksname:EPV.
:PD.Name der Testbibliothek.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TESTOBJ (optional)
.********************************************
:HELP NAME='STRPREPRC/TESTOBJ'.
Wert fr Testobjekt      (&TO) (TESTOBJ) - Hilfe
:XH3.Wert fr Testobjekt      (&TO) (TESTOBJ)
:P.
Wert, der fr die Ersatzvariable 'Testobjekt' (&TO)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Name:EPV.
:PD.Name des Testobjekts.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TGTRLS (optional)
.********************************************
:HELP NAME='STRPREPRC/TGTRLS'.
Wert fr Zielrelease     (&TR) (TGTRLS) - Hilfe
:XH3.Wert fr Zielrelease     (&TR) (TGTRLS)
:P.
Wert, der fr die Ersatzvariable 'Zielrelease' (&TR)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Zielrelease:EPV.
:PD.Geben Sie das Release im Format VxRxMx an.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCLIB'.
Wert fr Von-Quellenbibl.(&FL) (FRMSRCLIB) - Hilfe
:XH3.Wert fr Von-Quellenbibl.(&FL) (FRMSRCLIB)
:P.
Wert, der fr die Ersatzvariable 'von Quellenbibliothek' (&FL) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Bibliotheksname:EPV.
:PD.Name der 'von Quellenbibliothek'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCFILE (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCFILE'.
Wert fr Von-Quellendatei(&FF) (FRMSRCFILE) - Hilfe
:XH3.Wert fr Von-Quellendatei(&FF) (FRMSRCFILE)
:P.
Wert, der fr die Ersatzvariable 'von Quellendatei' (&FF) eingetragen
werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Name:EPV.
:PD.Name der 'von Quellendatei'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCMBR (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCMBR'.
Wert fr Von-Quell.Teild.(&FM) (FRMSRCMBR) - Hilfe
:XH3.Wert fr Von-Quell.Teild.(&FM) (FRMSRCMBR)
:P.
Wert, der fr die Ersatzvariable 'von Quellenteildatei' (&FM)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Name:EPV.
:PD.Name der 'von Quellenteildatei'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  USER0 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER0'.
Wert fr Parameter       (&U0) (USER0) - Hilfe
:XH3.Wert fr Parameter       (&U0) (USER0)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 0 (&U0)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 0:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 0 (&U0).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER1 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER1'.
Wert fr Parameter       (&U1) (USER1) - Hilfe
:XH3.Wert fr Parameter       (&U1) (USER1)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 1 (&U1)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 1:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 1 (&U1).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER2 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER2'.
Wert fr Parameter       (&U2) (USER2) - Hilfe
:XH3.Wert fr Parameter       (&U2) (USER2)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 2 (&U2)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 2:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 2 (&U2).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER3 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER3'.
Wert fr Parameter       (&U3) (USER3) - Hilfe
:XH3.Wert fr Parameter       (&U3) (USER3)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 3 (&U3)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 3:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 3 (&U3).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER4 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER4'.
Wert fr Parameter       (&U4) (USER4) - Hilfe
:XH3.Wert fr Parameter       (&U4) (USER4)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 4 (&U4)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 4:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 4 (&U4).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER5 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER5'.
Wert fr Parameter       (&U5) (USER5) - Hilfe
:XH3.Wert fr Parameter       (&U5) (USER5)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 5 (&U5)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 5:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 5 (&U5).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER6 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER6'.
Wert fr Parameter       (&U6) (USER6) - Hilfe
:XH3.Wert fr Parameter       (&U6) (USER6)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 6 (&U6)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 6:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 6 (&U6).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER7 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER7'.
Wert fr Parameter       (&U7) (USER7) - Hilfe
:XH3.Wert fr Parameter       (&U7) (USER7)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 7 (&U7)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 7:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 7 (&U7).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER8 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER8'.
Wert fr Parameter       (&U8) (USER8) - Hilfe
:XH3.Wert fr Parameter       (&U8) (USER8)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 8 (&U8)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 8:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 8 (&U8).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER9 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER9'.
Wert fr Parameter       (&U9) (USER9) - Hilfe
:XH3.Wert fr Parameter       (&U9) (USER9)
:P.
Wert, der fr die benutzerdefinierte Ersatzvariable 9 (&U9)
eingetragen werden soll.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.benutzerdefinierte Variable 9:EPV.
:PD.Wert fr die benutzerdefinierte Ersatzvariable 9 (&U9).
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  STMF (optional)
.********************************************
:HELP NAME='STRPREPRC/STMF'.
Wert fr Datenstromd.  (&STMF) (STMF) - Hilfe
:XH3.Wert fr Datenstromd.  (&STMF) (STMF)
:P.
Wert, der fr die Ersatzvariable 'Datenstromdatei' (&STMF) eingetragen
werden soll.
:P.
Die Variable :HP2.&FOLDER:EHP2. enthlt das Verzeichnis der Datenstromdatei und
in der Variablen :HP2.&FILE:EHP2. steht der Name der Datenstromdatei.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*DFT:EPV.
:PD.Name der Quellendatenstromdatei, wie am Parameter :HP2.USESRCSTMF:EHP2. angegeben.
:PT.:PV.Datenstromdatei:EPV.
:PD.Geben sie den Namen einer Datenstromdatei an.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  USRDEFVAR (optional)
.********************************************
:HELP NAME='STRPREPRC/USRDEFVAR'.
Benutzerdefinierte Variablen (USRDEFVAR) - Hilfe
:XH3.Benutzerdefinierte Variablen (USRDEFVAR)
:P.
Definiert eine Liste von bis zu 20 benutzerdefinierten Variablen
und deren zugeordnete Werte. Benutzerdefinierte Variablen werden
vor den STRPREPRC Variablen ersetzt, um benutzerdefinierte
Variablen STRPREPRC Variablen zuordnen zu knnen. Dies kann
erforderlich sein, wenn es nicht mglich ist, eine Variable
(mit & beginnend) an einen Befehl zu bergeben.
:P.
Dies kann zum Beispiel wie folgt aussehen:
:P.
STRPREPRC CMD(XCRTSQLOBJ ... LIBL(V_LX)) USRDEFVAR(V_LX '&LX')
:P.
Damit ersetzt STRPREPC den Wert 'V_LX' des LIBL Parameters des
XCRTSQLOBJ Befehls mit einer bei der Ausfhrung des >>LIBL<<
gesicherten Bibliotheksliste.
:P.
Wird die aktuelle Bibliothek mit
dem :HP2.>>CURLIB<<:EHP2. tag gendert, so steht der alte Wert in der
Variablen :HP2.&CX:EHP2. zur Verfgung.
:P.
:HP2.Die Bibliotheksliste wird am Ende des Programms grundstzlich auf den
Anfangswert zurckgesetzt.:EHP2.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:P.
:HP1.Element 1: aktuelle Bibliothek::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*SAME:EPV.
:PD.Die aktuelle Bibliothek in der Bibliotheksliste fr
den aktuellen Thread wird nicht gendert.
:PT.:PV.*CRTDFT:EPV.
:PD.Die Bibliotheksliste fr den aktuellen Thread soll
keine Bibliothek enthalten. Wenn Objekte in der
aktuellen Bibliothek erstellt werden, wird die
Bibliothek QGPL als aktuelle Standardbibliothek
verwendet.
:PT.:PV.Name:EPV.
:PD.Den Namen der Bibliothek angeben, die den aktuellen
Bibliothekseintrag in der Bibliotheksliste fr den
aktuellen Thread ersetzt.
:EPARML.
:P.
:HP1.Element 2: Bibliotheksliste::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Name:EPV.
:PD.Die Namen der Bibliotheken angeben, die dem
Benutzerteil der Bibliotheksliste fr den aktuellen
Thread in der Reihenfolge hinzugefgt werden sollen,
in der sie durchsucht werden sollen. Es knnen bis zu
250 Namen angegeben werden.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  LIBL (optional)
.********************************************
:HELP NAME='STRPREPRC/LIBL'.
Bibliotheksliste (LIBL) - Hilfe
:XH3.Bibliotheksliste (LIBL)
:P.
Gibt eine optional zu verwendende Bibliotheksliste an. Die
Bibliotheksliste steht in der Variablen :HP2.&LL:EHP2. zur Verfgung. Wird
die Bibliotheksliste im Pre-Prozessor Abschnitt mit dem :HP2.>>LIBL<<:EHP2.
tag gendert, so steht die alte Bibliotheksliste in der
Variablen :HP2.&LX:EHP2. zur Verfgung.
:P.
Wird die aktuelle Bibliothek mit
dem :HP2.>>CURLIB<<:EHP2. tag gendert, so steht der alte Wert in der
Variablen :HP2.&CX:EHP2. zur Verfgung.
:P.
:HP2.Die Bibliotheksliste wird am Ende des Programms grundstzlich auf den
Anfangswert zurckgesetzt.:EHP2.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:P.
:HP1.Element 1: aktuelle Bibliothek::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.*SAME:EPV.
:PD.Die aktuelle Bibliothek in der Bibliotheksliste fr
den aktuellen Thread wird nicht gendert.
:PT.:PV.*CRTDFT:EPV.
:PD.Die Bibliotheksliste fr den aktuellen Thread soll
keine Bibliothek enthalten. Wenn Objekte in der
aktuellen Bibliothek erstellt werden, wird die
Bibliothek QGPL als aktuelle Standardbibliothek
verwendet.
:PT.:PV.Name:EPV.
:PD.Den Namen der Bibliothek angeben, die den aktuellen
Bibliothekseintrag in der Bibliotheksliste fr den
aktuellen Thread ersetzt.
:EPARML.
:P.
:HP1.Element 2: Bibliotheksliste::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Name:EPV.
:PD.Die Namen der Bibliotheken angeben, die dem
Benutzerteil der Bibliotheksliste fr den aktuellen
Thread in der Reihenfolge hinzugefgt werden sollen,
in der sie durchsucht werden sollen. Es knnen bis zu
250 Namen angegeben werden.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USELIBL (optional)
.********************************************
:HELP NAME='STRPREPRC/USELIBL'.
Verwende Bibl.-Liste implizit - Hilfe
:XH3.Verwende Bibl.-Liste implizit (USELIBL)
:P.
Gibt an, ob eine am Parameter :HP2.LIBL:EHP2. angegebene
Bibliotheksliste implizit vor der Ausfhrung des Erstellungsbefehls
gesetzt wird, sofern kein STRPREPRC Anweisungsblock in der Quelle enthalten
ist.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.*NO:EPV.
:PD.Die Bibliotheksliste wird nicht gesetzt, wenn die Quelle nicht ber
einen STRPREPRC Anweisungsblock verfgt.
:PT.:PV.*YES:EPV.
:PD.Eine angegebene Bibliotheksliste wird implizit vor der Ausfhrung des
Erstellungsbefehls gesetzt, wenn in der Quelle kein STRPREPRC
Anweisungsblock enthalten ist.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TAGSREQ (optional)
.********************************************
:HELP NAME='STRPREPRC/TAGSREQ'.
Pre-Proz. Marken erforderlich - Hilfe
:XH3.Pre-Proz. Marken erforderlich (TAGSREQ)
:P.
Gibt an, ob in der zugrunde liegenden Quellenteildatei
Pro-Prozessor Marken enthalten sein mssen oder nicht.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.*NO:EPV.
:PD.Es mssen keine Pre-Prozessor Anweisungen vorhanden sein.
:PT.:PV.*YES:EPV.
:PD.Pre-Prozessor Anweisungen mssen vorhanden sein. Bei fehlenden
Pre-Prozessor Anweisungen wird eine Fehlernachricht PRZ0024
geschickt.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  EXICMDEXC
.********************************************
:HELP NAME='STRPREPRC/EXICMDEXC'.
Ausgangspgm. Befehlsausfhrung (EXICMDEXC) - Hilfe
:XH3.Ausgangspgm. Befehlsausfhrung (EXICMDEXC)
:P.
Gibt den Namen und die Bibliothek eines Exitprogramms an, welches
vor der Ausfhrung des Befehgl der >>EXECUTE<< Marke aufgerufen wird, um
den Befehl vor der Ausfhrung noch nach Bedarf nderung zu knnen.
:P.
:HP2.Dieser Exit wird zum Beispiel von CMOne verwendet.:EHP2.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Es ist kein Wert angegeben.
:PT.:PV.Programmname:EPV.
:PD.Geben sie den Namen des Exitprogramms ein.
:EPARML.
:IMHELP name='COM/LIBRARY'.
:PARML.
:PT.:PV.*LIBL:EPV.
:PD.Das System durchsucht die Bibliotheksliste nach der
Bibliothek, in der die Quellendatei gespeichert ist.
Dies ist der Standardwert.
:PT.:PV.*CURLIB:EPV.
:PD.Die aktuelle Bibliothek wird nach der Quellendatei
durchsucht. Wurde keine aktuelle Bibliothek angegeben,
wird QGPL verwendet.
:PT.:PV.Bibliotheksname:EPV.
:PD.Den Namen der Bibliothek angeben, in der das
Exitprogramm gespeichert ist.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  EXECOPT  (optional)
.********************************************
:HELP NAME='STRPREPRC/EXECOPT'.
Befehlsausfhrungsoptionen - Hilfe
:XH3.Befehlsausfhrungsoptionen (EXECOPT)
:P.
Gibt an, welche Befehle ausgefhrt werden. Die zur
Verfgung stehenden Befehlsgruppen sind:
:P.
:LINES.
 - Vorlaufbefehle
 - Objekterstellungsbefeh
 - Nachlaufbefele
:ELINES.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*ALL:EPK.
:PD.Es werden alle Befehlsgruppe ausgefhrt.
:PT.:PV.*PRECMDS:EPV.
:PD.Es werden nur die Vorlaufbefehle ausgefhrt.
:PT.:PV.*CRTCMD:EPV.
:PD.Es wird nur der Objekterstellungsbefehl ausgefhrt.
:PT.:PV.*POSTCMDS:EPV.
:PD.Es werden nur die Nachlaufbefehle ausgefhrt.
:EPARML.

:EHELP.

.*****************************************************************
.*  Common help text that is imbedded into one or more places.
.*****************************************************************

.********************************************
.*  Quellenangaben
.********************************************
:HELP NAME='COM/SRC'.
:P.
Es mssen entweder die Werte fr eine Quelledatei und -teildatei
oder eine Quellendatenstromdatei angegeben werden.
:EHELP.

.********************************************
.*  Required Parameter
.********************************************
:HELP NAME='COM/REQPARM'.
:P.
Dieser Parameter ist erforderlich.
:EHELP.

.********************************************
.*  Required Parameter 1
.********************************************
:HELP NAME='COM/REQPARM1'.
:P.
Dieser Parameter muss nur dann angebenen werden, wenn die
Objektbeschreibung gendert werden soll.
:EHELP.

.********************************************
.*  Optional Parameter
.********************************************
:HELP NAME='COM/OPTPARM'.
:P.
Dieser Parameter ist optional.
:EHELP.

.********************************************
.*  List of values
.********************************************
:HELP NAME='COM/VALUES'.
:P.
Mgliche Werte sind:
:EHELP.

.********************************************
.*  Library portion of a qualified object name.
.********************************************
:HELP NAME='COM/LIBRARY'.
:P.
Gltige Bibliothekswerte sind:
:EHELP.

.********************************************
.*  Use of replacement variables
.********************************************
:HELP NAME='COM/RPLVAR'.
:P.
Ersatzvariablen knnen an jeder Stelle der Pre-Complieranweisungen
eingefgt und benutzt werden. Bei der Abarbeitung der
Pre-Prozessor-Anweisungen wird die Ersatzvariable durch den
im Befehl STRPREPRC angegebenen Wert ersetzt.
:P.
Beispiel:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00        >>CRTCMD<<           CRTRPGMOD(&LI/&OB) +
0003.00                               SRCFILE(&SL/&SF) +
0004.00                               SRCMBR(&SM);
0005.00        >>EXECUTE<<
0006.00    >>END-PRE-COMPILER<<
:ELINES.
:EHELP.

.*****************************************************************
.*  End of Panel Group
.*****************************************************************
:EPNLGRP.

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRCQ  type PNLGRP - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRCQ"
mbrtype =  "PNLGRP    "
mbrtext =  "Start Pre-Processor - Eng                         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
.*=====================================================================*
.*                                                                     *
.*  Kurzdokumentation :                                                *
.*                                                                     *
.*  Bereich . . . : STRPREPRC                                          *
.*  Objekt  . . . : STRPREPRCQ                                         *
.*  Beschreibung  : Start Pre-Processor - Eng                          *
.*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
.*  Datum . . . . : 21.11.2000                                         *
.*                                                                     *
.*=====================================================================*
.*                                                                     *
.*  This software is free software, you can redistribute it and/or     *
.*  modify it under the terms of the GNU General Public License (GPL)  *
.*  as published by the Free Software Foundation.                      *
.*                                                                     *
.*  See GNU General Public License for details.                        *
.*          http://www.opensource.org                                  *
.*          http://www.opensource.org/licenses/gpl-license.html        *
.*                                                                     *
.*=====================================================================*
.*  History:                                                           *
.*                                                                     *
.*  Datum       Name          nderung                                 *
.*  ----------  ------------  ---------------------------------------  *
.*  23.01.2007  Th.Raddatz    Added parameter TAGSREQ(...) to command. *
.*                                                                     *
.*  16.05.2015  Th.Raddatz    Added parameter EVENTF to command.       *
.*                                                                     *
.*  18.06.2015  Th.Raddatz    Renamed parameter EVENTF to OPTION.      *
.*                                                                     *
.*  18.02.2016  Th.Raddatz    Added the >IMPORTANT< parameter tag.     *
.*                                                                     *
.*  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        *
.*                            command.                                 *
.*                                                                     *
.*  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     *
.*                            2048 to 8192.                            *
.*                                                                     *
.*  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC *
.*                            run the XCRTSQLOBJ command of CMOne      *
.*                            for source members without a STRPREPRC   *
.*                            header.                                  *
.*                                                                     *
.*  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   *
.*                            command.                                 *
.*                                                                     *
.*  17.05.2019  Th.Raddatz    Added new tags for monitoring messages   *
.*                            of 'CMD' tags. The new tags are:         *
.*                              'CMD'  CHKOBJ FOO/BAR *FILE;           *
.*                              'MONMSG'                               *
.*                                'MSGID' CPF9801; // Object not found *
.*                              'END-MONMSG'                           *
.*                                                                     *
.*  07.08.2019  Th.Raddatz    Added parameter EXECOPT.                 *
.*                                                                     *
.*  26.04.2020  Th.Raddatz    Added 'INCLUDE' tag.                     *
.*                                                                     *
.*  22.12.2020  Th.Raddatz    Fixed description of special value       *
.*                            *ADDJOBLOG of command parameter OPTION.  *
.*                                                                     *
.*  21.03.2022  Th.Raddatz    Added include file syntax:               *
.*                              library/file,member                    *
.*                                                                     *
.*  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     *
.*                            to support IFS stream files.             *
.*                                                                     *
.*=====================================================================*
.* >>PRE-COMPILER<<                                                    *
.*   >>CRTCMD<< CRTPNLGRP    PNLGRP(&LI/STRPREPRCP) +                  *
.*                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
.*   >>EXECUTE<<                                                       *
.* >>END-PRE-COMPILER<<                                                *
.*=====================================================================*
.*
.*****************************************************************
.*  Start of Panel Group
.*****************************************************************
:PNLGRP.

.*****************************************************************
.*  Provide all the help for the command together in one help ID
.*  so that it can be used by a search index.
.*****************************************************************
:HELP name='STRPREPRC/ALL'.
:IMHELP name=STRPREPRC.
:IMHELP name='STRPREPRC/USESRCFILE'.
:IMHELP name='STRPREPRC/USESRCMBR'.
:IMHELP name='STRPREPRC/USESRCSTMF'.
:IMHELP name='STRPREPRC/CMD'.
:IMHELP name='STRPREPRC/OPTION'.
:IMHELP name='STRPREPRC/CHGOBJD'.
:IMHELP name='STRPREPRC/OBJTYPE'.
:IMHELP name='STRPREPRC/OBJSRCFILE'.
:IMHELP name='STRPREPRC/OBJSRCLIB'.
:IMHELP name='STRPREPRC/OBJSRCMBR'.
:IMHELP name='STRPREPRC/LIB'.
:IMHELP name='STRPREPRC/OBJ'.
:IMHELP name='STRPREPRC/TYPECODE'.
:IMHELP name='STRPREPRC/SRCLIB'.
:IMHELP name='STRPREPRC/SRCFILE'.
:IMHELP name='STRPREPRC/SRCMBR'.
:IMHELP name='STRPREPRC/TESTLIB'.
:IMHELP name='STRPREPRC/TESTOBJ'.
:IMHELP name='STRPREPRC/TGTRLS'.
:IMHELP name='STRPREPRC/FRMSRCLIB'.
:IMHELP name='STRPREPRC/FRMSRCFILE'.
:IMHELP name='STRPREPRC/FRMSRCMBR'.
:IMHELP name='STRPREPRC/USER0'.
:IMHELP name='STRPREPRC/USER1'.
:IMHELP name='STRPREPRC/USER2'.
:IMHELP name='STRPREPRC/USER3'.
:IMHELP name='STRPREPRC/USER4'.
:IMHELP name='STRPREPRC/USER5'.
:IMHELP name='STRPREPRC/USER6'.
:IMHELP name='STRPREPRC/USER7'.
:IMHELP name='STRPREPRC/USER8'.
:IMHELP name='STRPREPRC/USER9'.
:IMHELP name='STRPREPRC/STMF'.
:IMHELP name='STRPREPRC/USRDEFVAR'.
:IMHELP name='STRPREPRC/LIBL'.
:IMHELP name='STRPREPRC/USELIBL'.
:IMHELP name='STRPREPRC/TAGSREQ'.
:IMHELP name='STRPREPRC/EXICMDEXC'.
:IMHELP name='STRPREPRC/EXECOPT'.
:EHELP.

.*****************************************************************
.*  Primary help text for the command.
.*****************************************************************
:HELP NAME='STRPREPRC'.
Start Pre-Processor - Help
:P.
STRPREPRC searches the given source member for special pre-compiler
tags. Each tag is assigned to an action that is been executed when
the pre-processor recognizes a tag. STRPREPRC is used to overwrite
creation command parameters, execute pre- and post-compile commands
and, of course, execute the creation command itself. Command
parameters that must be overridden have to be specified at
:HP3.>>PARM<<:EHP3. tags.
:P.
Using a PDM user-defined option makes object creation very simple:
:P.
:LINES.
STRPREPRC USESRCFILE(&L/&F) USESRCMBR(&N) LIB(&O) OBJ(&N)
            SRCLIB(&L) SRCFILE(&F) SRCMBR(&N)
:ELINES.
:P.
Although the command actually was designed to help us to
customize a change management product STRPREPRC can also be used
standalone.
:P.
This is an example of a pre-compiler section in a source member:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00        >>CRTCMD<<           CRTRPGMOD(&LI/&OB) +
0003.00                               SRCFILE(&SL/&SF) +
0004.00                               SRCMBR(&SM);
0005.00
0006.00        >>INCLUDE<<          &SL/QINCLUDE MYINCLUDE
0007.00
0008.00        >>IMPORTANT<<
0009.00            >>PARM<<         TRUNCNBR(*NO);
0010.00        >>END-IMPORTANT<<
0011.00
0012.00        >>COMPILE<<
0013.00            >>PARM<<         TRUNCNBR(*NO);
0014.00        >>END-COMPILE<<
0015.00
0016.00        >>LINK<<
0017.00            >>PARM<<         ACTGRP(*CALLER);
0018.00        >>END-LINK<<
0019.00
0020.00        >>CMD<<              OVRDBF +
0021.00                               FILE(SRCFILE) +
0022.00                               FROMFILE(QRPGLESRC) +
0023.00                               MBR(*FIRST) +
0024.00                               OVRSCOPE(*JOB);
0025.00
0026.00        /* ndern Bibliotheksliste */
0027.00        >>CURLIB<<           *CRTDFT;
0028.00        >>LIBL<<             &LL;
0029.00
0030.00        >>EXECUTE<<
0031.00        /* Wiederherstellen Bibliotheksliste */
0032.00        >>CURLIB<<           &CX;
0033.00        >>LIBL<<             &LX;
0034.00
0035.00        >>CMD<<              DLTOVR +
0036.00                               FILE(SRCFILE) +
0037.00                               LVL(*JOB);
0038.00    >>END-PRE-COMPILER<<
:ELINES.
:P.
:HP1.How to use replacement variables::EHP1.
:P.
Replacement variables can be emedded within the pre-compiler section
to allow modifications of creation parameters from outside. E.g. it
might be reasonable to use a variable for the object library rather
than hard-coding the object library inside the source member. That
is the only way to comfortably change the object library without
changing the source member.
:P.
The possible replacement Variables can be shown by pressing F9 at
the STRPREPRC command prompt.
:P.
Together with a PDM short command (see above), changing the object library
is quite easy.
:P.
:HP1.How to use the tags::EHP1.
:P.
:PARML.
:PT.:PV.>>PRE-COMPILER<<:EPV.
:PD.This tag is used to mark the beginning of the pre-compiler
section in a source member. STRPREPRC executes the creation
command passed implicitly if no pre-compiler section can be
found in the source member.

:PT.>>END-PRE-COMPILER<<
:PD.This tag is used to mark the end of the pre-compiler section
in a source member.

:PT.>>CRTCMD<<
:PD.This tag is used to specify the creation command that is to be
executed at the :HP3.>>EXECUTE<<:EHP3. tag.
The >>CRTCMD<< tag is optional. Instead of specifying the creation
command at a >>CRTCMD<< tag the creation command can also be passed
to STRPREPRC from outside. The >>CRTCMD<< tag should be used once
in a source member. Also it should be placed prior to the compile
and link sub-sections.

:PT.>>INCLUDE<<
:PD.This tag is used for including a member with pre-compiler
statements. It is used like the RPG /copy statement. Nested includes
are not allowed. Syntax:
:p.
QSYS file system:
:p.
:LINES.
   file,member
   library/file,member
:ELINES.
:p.
IFS file system:
:p.
:LINES.
   /Streamfile
   ./Streamfile
   /Folder/Streamfile
   .Folder/Streamfile
   'ifs file containing blanks'
   "ifs file containing blanks"
:ELINES.

:PT.>>IMPORTANT<<
:PD.This tag is used to mark the 'important' sub-section. The 'important'
sub-section is used to override compile parameters of the creation
command that has been passed to STRPREPRC. STRPREPRC has no idea
neither of link parameters nor of compile or important parameters. So you
also can specify 'important' parameters in the other sub-sections.

:PT.>>END-IMPORTANT<<
:PD.This tag is used to mark the end of the compile sub-section.

:PT.>>COMPILE<<
:PD.This tag is used to mark the compile sub-section. The compile
sub-section is used to override compile parameters of the creation
command that has been passed to STRPREPRC. STRPREPRC has no idea
neither of link parameters nor of compile parameters. So you
also can specify compile parameters in the other sub-sections.

:PT.>>END-COMPILE<<
:PD.This tag is used to mark the end of the compile sub-section.

:PT.>>LINK<<
:PD.This tag is used to mark the link sub-section. The link
sub-section is used to override link parameters of the creation
command that has been passed to STRPREPRC. STRPREPRC has no idea
neither of link parameters nor of compile parameters. So you
also can specify link parameters in the other sub-sections.

:PT.>>END-LINK<<
:PD.This tag is used to mark the end of the link sub-section.

:PT.>>LIBL<<
:PD.This tag executes the CHGLIBL command, in order to set the library
list to the specified value. The specified libraries must be separated
by a SPACE character. Afterwards the old library list is available
in variable :HP2.&LX:EHP2..

:PT.>>CURLIB<<
:PD.This tag executes the CHGLIBL command, in order to set the current
library to the specified value. Afterwards the old current library
is available in variable :HP2.&CX:EHP2..

:PT.>>PARM<<
:PD.This tag is used to override parameters of the creation
command that has been passed to STRPREPRC. >>PARM<< tags are
allowed within the compile and link sub-sections, only.

:PT.>>CMD<<
:PD.This tag is used to execute any OS/400 CL-Befehl immediately.
If this tag has been specified prior an :HP3.>>EXECUTE<<:EHP3. tag,
then the command specified acts as a pre-command. If this
tag has been specified after an :HP3.>>EXECUTE<<:EHP3. tag, then
the command specified acts as a post-command. Any number of >>CMD<<
tags can be specified.
:P.
Errors of pre- and post commands can be monitored as shown below:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00      >>CMD<<  DLTF FILE(QGPL/QFOO);
0003.00      >>MONMSG<<
0004.00        >>MSGID<< CPF2105; // Object FOO not found;
0005.00      >>END-MONMSG<<
0006.00    >>END-PRE-COMPILER<<
:ELINES.
:P.
You can specify up to 50 message IDs, that are monitored.

:PT.>>EXECUTE<<
:PD.This tag is used to execute the creation command. It should be
specified once in a source member.
:EPARML.

:P.
:HP1.How to use end-of-line characters::EHP1.
:P.
Lines with the tags :HP3.>>PARM<<:EHP3., :HP3.>>CMD<<:EHP3.
and :HP3.>>EXECUTE<<:EHP3. must end with a end-of-line
characeter
:P.
:PARML.
:PT.:PV.'+' - Character:EPV.
:PD.The plus character is used as a continuation character for the
line. The following line is added :HP1.without:EHP1. preceding
blanks.

:PT.:PV.'-' - Zeichen:EPV.
:PD.The minus character is used as a continuation character for the
line. The following line is added :HP1.with:EHP1. preceding
blanks. The number of the preceding blanks are calculated based on
the start position of the text following the pre-compiler tag.

:PT.:PV.';' - Zeichen:EPV.
:PD.The semicolon is used to indicate the end of the line.

:EPARML.

:EHELP.

.*****************************************************************
.*  Help text for the command parameters.
.*****************************************************************

.********************************************
.*  Keyword:  USESRCFILE
.********************************************
:HELP NAME='STRPREPRC/USESRCFILE'.
Use Source file (USESRCFILE) - Help
:XH3.Use Source file (USESRCFILE)
:P.
Specifies the qualified name of the source file that contains the
pre-compiler tags.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.source-file-name:EPV.
:PD.Specify the name of the source file that contains the
pre-compiler tags.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  USESRCMBR
.********************************************
:HELP NAME='STRPREPRC/USESRCMBR'.
Use Source member (USESRCMBR) - Help
:XH3.Use Source member (USESRCMBR)
:P.
Specifies the name of the source file member that contains
the pre-compiler tags.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.source-file-member-name:EPV.
:PD.Enter the name of the source physical file member that
contains the pre-compiler tags.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  USESRCSTMF
.********************************************
:HELP NAME='STRPREPRC/USESRCSTMF'.
Source stream file (USESRCSTMF) - Help
:XH3.Source stream file (USESRCSTMF)
:P.
Specifies the name of the IFS source stream file that contains
the pre-compiler tags. Usually that is the same file that is
used for compiling the object.
:P.
:IMHELP name='COM/SRC'.
:P.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.ifs-source-stream-file-name:EPV.
:PD.Enter the name of the IFS source stream file that
contains the pre-compiler tags.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  CMD
.********************************************
:HELP NAME='STRPREPRC/CMD'.
Creation command (CMD) - Help
:XH3.Creation command (CMD)
:P.
The creation command that is to be executed. The creation command
is been executed at the :HP3.>>EXECUTE<<:EHP3. tag. If no creation
command has been specified, then the creation command must be specified
within the source member at the :HP3.>>CRTCMD<<:EHP3. tag.
:IMHELP name='COM/REQPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PV.Creation command:EPV.
:PD.
The creation command that is to be used to create
the object.
:PT.no creation command
:PD.The creation command specified at the :HP3.>>CRTCMD<<:EHP3. tag
is to be used to create the object.
:EPARML.
:EHELP.

.********************************************
.*  Keyword:  OPTION  (optional)
.********************************************
:HELP NAME='STRPREPRC/OPTION'.
Event file options - Help
:XH3.Event file options (OPTION)
:P.
Specifies whether or not to create an event file for use by
client tooling.
:P.
:HP3.Important::EHP3. When option :HP3.*EVENTF:EHP3. is set to produce
an event file, positions 1-20 of the local data area (*LDA) are used
to pass the library and object name to RDi/WDSCi. The output library
of the EVFEVENT file is searched in the following oder until a named
library is found:
:P.
:LINES.
 - Object library (LIB)
 - Source file library (SRCLIB)
 - Library of the input source file (USESRCFILE)
:ELINES.
:P.
Option *EVENTF ensures that error information are always there. Either there are
the compile errors logged by the object creation command or the job log messages
produced by it.
:P.
File STRPRE2 contains key value pairs message-id/field format
for retrieving den statement in error from the job log.
Column FMT must contain den number of the field format, which
contains the row number of the failing statement.
:P.
Column FMT can be set to '-1' to exclude messages from the
job log.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NOEVENTF:EPK.
:PD.No entries are added to an event file for use by client tooling.
:PT.:PV.*EVENTF:EPV.
:PD.Job log messages are added to an event file for use by client tooling if
an error occured during the object creation command (without an event file) or
a pre- or post-command.
:PT.:PK DEF.*NOJOBLOG:EPK.
:PD.No job log entries are added to an event file in case there are no errors.
:PT.:PV.*ADDJOBLOG:EPV.
:PD.Job log messages of the object creation command are added to an event file
even there was no error. Job log entries of pre- and post-commands are not added.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  CHGOBJD (optional)
.********************************************
:HELP NAME='STRPREPRC/CHGOBJD'.
Change object description - Help
:XH3.Change object description (CHGOBJD)
:P.
Specify whether the object discription shall be changed after
the creation command has been executed or not.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NO:EPK.
:PD.The object description will be changed after the creation command
has been executed.
:PT.:PV.*YES:EPV.
:PD.The object description will not be changed.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJTYPE
.********************************************
:HELP NAME='STRPREPRC/OBJTYPE'.
Object type - Help
:XH3.Object type (OBJTYPE)
:P.
Specify the type of the object that is to be changed.
werden soll.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.Object-Type:EPV.
:PD.Type of the Object that is to be changed.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCFILE
.********************************************
:HELP NAME='STRPREPRC/OBJSRCFILE'.
Object-Source file - Help
:XH3.Object-Source file (OBJSRCFILE)
:P.
Source file name of the object.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.The source file name will not be changed.
:PT.:PV.*DFT:EPV.
:PD.Name of the source file as specified at parameter :HP2.SRCFILE:EHP2..
:PT.:PV.*BLANK:EPV.
:PD.The source file name will be set to blank.
:PT.:PV.Source-File:EPV.
:PD.The source file name will be set to the name specified.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCLIB
.********************************************
:HELP NAME='STRPREPRC/OBJSRCLIB'.
Object-Source library - Help
:XH3.Object-Source Library (OBJSRCLIB)
:P.
Source library of the object.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.The source library name will not be changed.
:PT.:PV.*BLANK:EPV.
:PD.The source library name will be set to blank.
:PT.:PV.*DFT:EPV.
:PD.Name of the source file library as specified at parameter :HP2.SRCLIB:EHP2..
:PT.:PV.Source-Library:EPV.
:PD.The source library name will be set to the name specified.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJSRCMBR
.********************************************
:HELP NAME='STRPREPRC/OBJSRCMBR'.
Object-Source member - Help
:XH3.Object-Source Member (OBJSRCMBR)
:P.
Source member that was used to create the object.
:IMHELP name='COM/REQPARM1'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*SAME:EPK.
:PD.The source member name will not be changed.
:PT.:PV.*BLANK:EPV.
:PD.The source member name will be set to blank.
:PT.:PV.*DFT:EPV.
:PD.Name of the source member as specified at parameter :HP2.SRCMBR:EHP2..
:PT.:PV.source-file-member-name:EPV.
:PD.The source member name will be set to the name specified.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  LIB (optional)
.********************************************
:HELP NAME='STRPREPRC/LIB'.
Value for library (&LI) (LIB) - Help
:XH3.Value for library (&LI) (LIB)
:P.
Value for the replacement variable 'Library' (&LI).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.library-name:EPV.
:PD.Enter the name of the library where the object is created.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  OBJ (optional)
.********************************************
:HELP NAME='STRPREPRC/OBJ'.
Value for object (&OB) (OBJ) - Help
:XH3.Value for object (&OB) (OBJ)
:P.
Value for the replacement variable 'Object' (&OB).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*DFT:EPV.
:PD.Name of the object as specified at parameter :HP2.SRCMBR:EHP2..
:PT.:PV.object-name:EPV.
:PD.Enter the name of the object that is created.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TYPECODE (optional)
.********************************************
:HELP NAME='STRPREPRC/TYPECODE'.
Value for type code (&TY) (TYPECODE) - Help
:XH3.Value for type code (&TY) (TYPECODE)
:P.
Value for the replacement variable 'Type Code' (&TY).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specfied.
:PT.:PV.Type Code:EPV.
:PD.Enter the type code that is associated to the object.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCLIB'.
Value for source library (&SL) (SRCLIB) - Help
:XH3.Value for source library (&SL) (SRCLIB)
:P.
Value for the replacement variable 'Source Library' (&SL).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*DFT:EPV.
:PD.Name of the library that contains the source physical file
as specified at parameter :HP2.USESRCFILE:EHP2..
:PT.:PV.library-name:EPV.
:PD.Enter the name of the library where the source file is stored.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCFILE (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCFILE'.
Value for source file (&SF) (SRCFILE) - Help
:XH3.Value for source file (&SF) (SRCFILE)
:P.
Value for the replacement variable 'Source File' (&SF).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*DFT:EPV.
:PD.Name of the source-file as specified at parameter :HP2.USESRCFILE:EHP2..
:PT.:PV.source-file-name:EPV.
:PD.Enter the name of the source file that contains the
source member to be compiled.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  SRCMBR (optional)
.********************************************
:HELP NAME='STRPREPRC/SRCMBR'.
Value for source member (&SM) (SRCMBR) - Help
:XH3.Value for source member (&SM) (SRCMBR)
:P.
Value for the replacement variable 'Source Member' (&SM).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*DFT:EPV.
:PD.Name of the source member as specified at parameter :HP2.USESRCMBR:EHP2..
:PT.:PV.source-file-member-name:EPV.
:PD.Source file member name.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TESTLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/TESTLIB'.
Value for test library (&TL) (TESTLIB) - Help
:XH3.Value for test library (&TL) (TESTLIB)
:P.
Value for the replacement variable 'Test Library' (&TL).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.library-name:EPV.
:PD.Name of the library that contains the test object.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TESTOBJ (optional)
.********************************************
:HELP NAME='STRPREPRC/TESTOBJ'.
Value for test object (&TO) (TESTOBJ) - Help
:XH3.Value for test object (&TO) (TESTOBJ)
:P.
Value for the replacement variable 'Test Object' (&TO).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.name:EPV.
:PD.Name of the test object.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TGTRLS (optional)
.********************************************
:HELP NAME='STRPREPRC/TGTRLS'.
Value for target release (&TR) (TGTRLS) - Help
:XH3.Value for target release (&TR) (TGTRLS)
:P.
Value for the replacement variable 'Target Release' (&TR).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.target-release:EPV.
:PD.Specify the release in the format VxRxMx.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCLIB (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCLIB'.
Value for from source library (&FL) (FRMSRCLIB) - Help
:XH3.Value for from source library (&FL) (FRMSRCLIB)
:P.
Value for the replacement variable 'From Source Library' (&FL).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.library-name:EPV.
:PD.Name of the library that contains the 'from source physical file'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCFILE (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCFILE'.
Value for from source file (&FF) (FRMSRCFILE) - Help
:XH3.Value for from source file (&FF) (FRMSRCFILE)
:P.
Value for the replacement variable 'From Source File' (&FF).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.name:EPV.
:PD.Name of the 'from source physical file'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  FRMSRCMBR (optional)
.********************************************
:HELP NAME='STRPREPRC/FRMSRCMBR'.
Value for from source member (&FM) (FRMSRCMBR) - Help
:XH3.Value for from source member (&FM) (FRMSRCMBR)
:P.
Value for the replacement variable 'From Source Member' (&FM).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.name:EPV.
:PD.Name of the 'from source member'.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  USER0 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER0'.
Value for user-defined parameter (&U0) (USER0) - Help
:XH3.Value for user-defined parameter (&U0) (USER0)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 0' (&U0).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U0.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER1 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER1'.
Value for user-defined parameter (&U1) (USER1) - Help
:XH3.Value for user-defined parameter (&U1) (USER1)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 1' (&U1).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U1.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER2 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER2'.
Value for user-defined parameter (&U2) (USER2) - Help
:XH3.Value for user-defined parameter (&U2) (USER2)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 2' (&U2).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U2.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER3 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER3'.
Value for user-defined parameter (&U3) (USER3) - Help
:XH3.Value for user-defined parameter (&U3) (USER3)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 3' (&U3).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U3.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER4 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER4'.
Value for user-defined parameter (&U4) (USER4) - Help
:XH3.Value for user-defined parameter (&U4) (USER4)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 4' (&U4).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U4.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER5 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER5'.
Value for user-defined parameter (&U5) (USER5) - Help
:XH3.Value for user-defined parameter (&U5) (USER5)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 5' (&U5).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U5.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER6 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER6'.
Value for user-defined parameter (&U6) (USER6) - Help
:XH3.Value for user-defined parameter (&U6) (USER6)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 6' (&U6).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U6.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER7 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER7'.
Value for user-defined parameter (&U7) (USER7) - Help
:XH3.Value for user-defined parameter (&U7) (USER7)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 7' (&U7).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U7.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER8 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER8'.
Value for user-defined parameter (&U8) (USER8) - Help
:XH3.Value for user-defined parameter (&U8) (USER8)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 8' (&U8).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U8.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USER9 (optional)
.********************************************
:HELP NAME='STRPREPRC/USER9'.
Value for user-defined parameter (&U9) (USER9) - Help
:XH3.Value for user-defined parameter (&U9) (USER9)
:P.
Specifies the value for the replacement variable
'User-Defined Parameter 9' (&U9).
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.value:EPV.
:PD.Value for user-defined parameter &U9.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  STMF (optional)
.********************************************
:HELP NAME='STRPREPRC/STMF'.
Value for stream file  (&STMF) (STMF) - Help
:XH3.Value for stream file  (&STMF) (STMF)
:P.
Value for the replacement variable 'stream file' (&STMF).
:P.
Variable :HP2.&FOLDER:EHP2. contains the directory portion of the stream file and
variable :HP2.&FILE:EHP2. contains the name of the stream file.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*DFT:EPV.
:PD.Name of the stream file as specified at parameter :HP2.USESRCSTMF:EHP2..
:PT.:PV.object-name:EPV.
:PD.Enter the name of a stream file.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  USRDEFVAR (optional)
.********************************************
:HELP NAME='STRPREPRC/USRDEFVAR'.
User defined variables (USRDEFVAR) - Help
:XH3.User defined variables (USRDEFVAR)
:P.
Specifies a list up to 20 user-defined variables and their
associated values. User-defined variables are replaced before
STRPREPRC variables in order to be able to map a user-defined
variabled to a STRPREPRC variable. This can be required, when it
is not possible to pass a Variable (starting with &) to a
command.
:P.
That can be done like that:
:P.
STRPREPRC CMD(XCRTSQLOBJ ... LIBL(V_LX)) USRDEFVAR(V_LX '&LX')
:P.
With that, STRPREPRC replaces 'V_LX' of parameter LIBL of
command XCRTSQLOBJ with the library list, which was saved
when executing the >>LIBL<< tag.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:P.
:HP1.Element 1: Name::EHP1.
:PARML.
:PT.:PV.Name:EPV.
:PD.Name of the user-defined variable.
:EPARML.
:P.
:HP1.Element 2: Value::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.Name:EPV.
:PD.Value of the user-defined variable.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  LIBL (optional)
.********************************************
:HELP NAME='STRPREPRC/LIBL'.
Library list (LIBL) - Hilfe
:XH3.Library list (LIBL)
:P.
Specifies a library list for further usage in the
STRPREPRC header. The specified library list is available in
replacement variable :HP2.&LL:EHP2.. After having changed a
library list with the :HP2.>>LIBL<<:EHP2. tag, the old library
list is available in :HP2.&LX:EHP2..
:P.
When the current library is
changed with the :HP2.>>CURLIB<<:EHP2. tag, the old value is
available in :HP2.&CX:EHP2..
:P.
:HP2.The library list is always restored to its initial value at
the end of the program.:EHP2.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:P.
:HP1.Element 1: Current library::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.*SAME:EPV.
:PD.The current library in the library list for the
current thread is not changed.
:PT.:PV.*CRTDFT:EPV.
:PD.No library should be in the current entry in the
library list for the current thread.  If objects are
created into the current library, the QGPL library is
used as the default current library.
:PT.:PV.Name:EPV.
:PD.Specify the name of the library that replaces the
current library entry in the library list for the
current thread.
:EPARML.
:P.
:HP1.Element 2: Library list::EHP1.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.Name:EPV.
:PD.Specify the names of the libraries to be added to the
user portion of the library list for the current
thread in the order in which they are to be searched.
Up to 250 names can be specified.
:EPARML.
:IMHELP name='COM/RPLVAR'.

:EHELP.

.********************************************
.*  Keyword:  USELIBL (optional)
.********************************************
:HELP NAME='STRPREPRC/USELIBL'.
Use library list implicitly - Help
:XH3.Use library list implicitly (USELIBL)
:P.
Specifies whether a library list, entered at parameter :HP2.LIBL:EHP2., is
implicitly set before executing the object creation command, when the source
does not contain a STRPREPRC header.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.*NO:EPV.
:PD.The library list is not changed before executing the object creation
command, when the source does not contain a STRPREPRC header.
:PT.:PV.*YES:EPV.
:PD.The library list is implicitly changed before creating the object,
when the source does not contain a STRPREPRC header.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  TAGSREQ (optional)
.********************************************
:HELP NAME='STRPREPRC/TAGSREQ'.
Pre-Comp. tags required - Help
:XH3.Pre-Comp. tags required (TAGSREQ)
:P.
Specifies, whether the source member must contain
pre-pcompiler tags or not.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PV.*NO:EPV.
:PD.Pre-pcompiler tags are not required.
:PT.:PV.*YES:EPV.
:PD.Pre-compiler tags must be present. Message PRZ0024 is send when
the source member does not contain pre-pcompiler tags.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  EXICMDEXC
.********************************************
:HELP NAME='STRPREPRC/EXICMDEXC'.
Exit Program Command Execution (EXICMDEXC) - Help
:XH3.Exit Program Command Execution (EXICMDEXC)
:P.
Specifies the qualified name of an exit programm. The exit program is
called before the object creation command is executed at the >>EXECUTE<< tag, in
oder to modify the command according to special needs.
:P.
:HP2.For example, this exit point is used by CMOne.:EHP2.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.
:PARML.
:PT.:PK DEF.*NONE:EPK.
:PD.Not specified.
:PT.:PV.program-name:EPV.
:PD.Enter the name of the exit program.
:EPARML.
:IMHELP name='COM/LIBRARY'.
:PARML.
:PT.:PV.*LIBL:EPV.
:PD.The system searches the library list to find the
library where the source file is stored. This is the
default.
:PT.:PV.*CURLIB:EPV.
:PD.The current library is used to find the source file.
If you have not specified a current library, QGPL is
used.
:PT.:PV.library-name:EPV.
:PD.Enter the name of the library where the exit program is stored.
:EPARML.

:EHELP.

.********************************************
.*  Keyword:  EXECOPT  (optional)
.********************************************
:HELP NAME='STRPREPRC/EXECOPT'.
Execute commands options - Help
:XH3.Execute commands options (EXECOPT)
:P.
Specifies the command groups that are executed.
The available command groups are:
:P.
:LINES.
 - Pre-commands
 - Object creation command
 - Post-commands
:ELINES.
:P.
:IMHELP name='COM/OPTPARM'.
:P.
:IMHELP name='COM/VALUES'.

:PARML.
:PT.:PK DEF.*ALL:EPK.
:PD.All command groups are executed.
:PT.:PV.*PRECMDS:EPV.
:PD.Only pre-commands are executed.
:PT.:PV.*CRTCMD:EPV.
:PD.Only the object creation command is executed.
:PT.:PV.*POSTCMDS:EPV.
:PD.Only post-commands are executed.
:EPARML.

:EHELP.

.*****************************************************************
.*  Common help text that is imbedded into one or more places.
.*****************************************************************

.********************************************
.*  Source parameter
.********************************************

:HELP NAME='COM/SRC'.
:P.
Either specify a source physical file and member or an IFS source
stream file.
:EHELP.

.********************************************
.*  Required Parameter
.********************************************
:HELP NAME='COM/REQPARM'.
:P.
This parameter is required.
:EHELP.

.********************************************
.*  Required Parameter 1
.********************************************
:HELP NAME='COM/REQPARM1'.
:P.
This parameter must be specified if the object description
is to be changed.
:EHELP.

.********************************************
.*  Optional Parameter
.********************************************
:HELP NAME='COM/OPTPARM'.
:P.
This parameter is optional.
:EHELP.

.********************************************
.*  List of values
.********************************************
:HELP NAME='COM/VALUES'.
:P.
The possible values are:
:EHELP.

.********************************************
.*  Library portion of a qualified object name.
.********************************************
:HELP NAME='COM/LIBRARY'.
:P.
The possible library values are:
:EHELP.

.********************************************
.*  Use of replacement variables
.********************************************
:HELP NAME='COM/RPLVAR'.
:P.
Replacement variables can be used everywhere within the
pre-compiler section. The replacement variable will be
replaced with the value specified at the STRPREPRC
command.
:P.
Beispiel:
:P.
:LINES.
0001.00    >>PRE-COMPILER<<
0002.00        >>CRTCMD<<           CRTRPGMOD(&LI/&OB) +
0003.00                               SRCFILE(&SL/&SF) +
0004.00                               SRCMBR(&SM);
0005.00        >>EXECUTE<<
0006.00    >>END-PRE-COMPILER<<
:ELINES.
:EHELP.

.*****************************************************************
.*  End of Panel Group
.*****************************************************************
:EPNLGRP.

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRCT  type SQLRPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRCT"
mbrtype =  "SQLRPGLE  "
mbrtext =  "STRPREPRC Self-Test                               "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
**free
//=====================================================================
//  STRPREPRC - SelfTest.
//=====================================================================
//  Command to create the service program:
//  RUCRTRPG TSTPGM(RPGUNIT/STRPREPRCT) SRCFILE(QSTRPREPRC)
//=====================================================================
//  Tools/400 STRPREPRC instructions:
//   >>PRE-COMPILER<<
//     >>CRTCMD<<  RUCRTRPG    TSTPGM(&LI/&OB) +
//                             SRCFILE(&SL/&SF) +
//                             SRCMBR(&SM);
//     >>COMPILE<<
//       >>PARM<< RPGPPOPT(*LVL2);
//       >>PARM<< DBGVIEW(*NONE);
//       >>PARM<< POPTION(*EVENTF);
//       >>PARM<< COMPILEOPT('DBGVIEW(*LIST)');
//       >>PARM<< BNDDIR(*N);
//       >>PARM<< MODULE(&LI/STRPREPRC2 +
//                       &LI/STRPREPRC4 +
//                       &LI/STRPREPRC5 +
//                       &LI/STRPREPRC6) +
//                BNDSRVPGM(&LI/BASICS1 +
//                          &LI/JOBLOG +
//                          &LI/EVENTF);
//     >>END-COMPILE<<
//     >>EXECUTE<<
//   >>END-PRE-COMPILER<<
//=====================================================================
ctl-opt NoMain Option(*SrcStmt : *NoDebugIO);

/include qinclude,TESTCASE                  iRPGUnit Test Suite
/include qbasics1,clib                      C Runtime Library

exec sql
  SET OPTION
    NAMING =*SQL, COMMIT = *NONE, CLOSQLCSR = *ENDACTGRP, DATFMT = *ISO, TIMFMT = *ISO,
    DFTRDBCOL = QTEMP, DYNDFTCOL = *YES;

// ------------------------------------------------------------
//  Imported Prototypes
// ------------------------------------------------------------
/include qstrpreprc,pstrprepr6
/include qbasics1,pbasics1

dcl-s BUFFER_SIZE int(10) import;

// ------------------------------------------------------------
//  Global Program Status.
// ------------------------------------------------------------

dcl-ds g_status qualified;
  srcSeq int(10);
  srcSeq2 int(10);
  sql likeds(sql_status_t) inz(*likeds);
end-ds;

dcl-ds sql_status_t qualified template;
  ignSQLWarn ind inz(*off);
end-ds;

// ------------------------------------------------------------
//  Global type templates.
// ------------------------------------------------------------
dcl-ds local_errCode_t qualified template;
  bytPrv       int(10) inz(%size(local_errCode_t));
  bytAvl       int(10) inz;
  excId        char(7) inz;
  reserved_1   char(1) inz;
  excDta       char(100) inz;
end-ds;

dcl-c STMF_UTF8 '/home/raddatz/temp/strpreprct.utf8';

dcl-c LINE_BEGIN '--- begin of data (LF) ---';
dcl-c LINE_1 '1. line  CR (short line)';
dcl-c LINE_2 '2. line  LF (longer line)';
dcl-c LINE_3 '3. line  CRLF (even longer line)';
dcl-c LINE_4 '4. line  LFCR (longest line ever)';
dcl-c LINE_END '---- end of data (./.) ----';

dcl-ds LINES qualified;
  data varchar(244) dim(6);
end-ds;

// ------------------------------------------------------------
//  Local data area (*LDA).
// ------------------------------------------------------------
dcl-ds g_LDA qualified dtaara(*LDA);
  library      char(10);
  object       char(10);
end-ds;

// ------------------------------------------------------------
//  Set up test suite.
// ------------------------------------------------------------
dcl-proc setUpSuite export;
  dcl-pi *n extproc(*dclcase) end-pi;

  clear LINES;
  LINES.data(1) = LINE_BEGIN;
  LINES.data(2) = LINE_1;
  LINES.data(3) = LINE_2;
  LINES.data(4) = LINE_3;
  LINES.data(5) = LINE_4;
  LINES.data(6) = LINE_END;

  p_setAppMsgFile('STRPREPRC': '*LIBL');

  if (not exist('QTEMP': 'RUNIT_TST': '*FILE'));
    runCmd('CRTSRCPF FILE(QTEMP/RUNIT_TST) RCDLEN(112) MBR(*NONE)');
  endif;

  // Compilable source member
  if (not exist('QTEMP': 'RUNIT_TST': '*FILE': 'TESTCASE'));
    runCmd('ADDPFM FILE(QTEMP/RUNIT_TST) MBR(TESTCASE) +
              TEXT(''STRPREPRD - SelfTest'') SRCTYPE(CLLE)');
  else;
    runCmd('CLRPFM FILE(QTEMP/RUNIT_TST) MBR(TESTCASE)');
  endif;

  // Helper source member
  if (not exist('QTEMP': 'RUNIT_TST': '*FILE': 'TESTCASE2'));
    runCmd('ADDPFM FILE(QTEMP/RUNIT_TST) MBR(TESTCASE2) +
              TEXT(''STRPREPRD - SelfTest'') SRCTYPE(CLLE)');
  else;
    runCmd('CLRPFM FILE(QTEMP/RUNIT_TST) MBR(TESTCASE2)');
  endif;

  if (exist('QTEMP': 'RUNIT_ERR': '*FILE'));
    runCmd('DLTF FILE(QTEMP/RUNIT_ERR)');
  endif;

  if (not exist('QTEMP': 'EVFEVENT': '*FILE'));
    runCmd('CRTPF FILE(QTEMP/EVFEVENT) RCDLEN(400) MAXMBRS(*NOMAX) CCSID(*HEX)');
    runCmd('RMVM FILE(QTEMP/EVFEVENT) MBR(*ALL)');
  endif;

  exec sql
    CREATE ALIAS qtemp.testmbr FOR qtemp.RUNIT_TST (TESTCASE);
  assert(not isSqlError(sqlState));

  exec sql
    CREATE ALIAS qtemp.testmbr2 FOR qtemp.RUNIT_TST (TESTCASE2);
  assert(not isSqlError(sqlState));

  exec sql
    CREATE ALIAS qtemp.eventfile FOR qtemp.EVFEVENT (TESTCASE);
  assert(not isSqlError(sqlState));

end-proc;

// ------------------------------------------------------------
//  Tear down test case.
// ------------------------------------------------------------
dcl-proc tearDownSuite export;
  dcl-pi *n extproc(*dclcase) end-pi;

  exec sql
    DROP ALIAS qtemp.testmbr;

  exec sql
    DROP ALIAS qtemp.testmbr2;

  exec sql
    DROP ALIAS qtemp.eventfile;

end-proc;

// ------------------------------------------------------------
//  Set up test case.
// ------------------------------------------------------------
dcl-proc setUp export;
  dcl-pi *n extproc(*dclcase) end-pi;

  exec sql
    DELETE FROM testmbr;
  setIgnSQLWarn(*on);
  assert(not isSqlError(sqlState));

  exec sql
    DELETE FROM testmbr2;
  setIgnSQLWarn(*on);
  assert(not isSqlError(sqlState));

  if (exist('QTEMP': 'EVFEVENT': '*FILE'));
    if (exist('QTEMP': 'EVFEVENT': '*FILE': 'TESTCASE'));
      exec sql
        DELETE FROM eventfile;
      setIgnSQLWarn(*on);
      assert(not isSqlError(sqlState));
    endif;
  endif;

  if (exist('QTEMP': 'RUNIT_TST': '*FILE'));
    if (exist('QTEMP': 'RUNIT_TST': '*FILE': 'DUMMY'));
      runCmd('RMVM FILE(QTEMP/RUNIT_TST) MBR(DUMMY)');
    endif;
  endif;

  clearLDA();

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF
//  Pre-command:
//    error + monmsg
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors (error ignored).
// ------------------------------------------------------------
dcl-proc test_MONMSG export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<     ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);           */');
  append('/*   >>MONMSG<<                                                     */');
  append('/*     >>MSGID<<   CPF7306;    /* Member not added */               */');
  append('/*   >>END-MONMSG<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('': ''); // Job log entries are not added to the event file
                     // for pre- and post commands. Therefore no event file
                     // is created.

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *NOEVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_PreCmd_NOEVENTF_NOJOBLOG_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*NOEVENTF *NOJOBLOG) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('': '');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *NOEVENTF, *NOJOBLOG
//  Pre-command:
//    error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to STRPREPRC OPTION(*NOEVENTF).
// ------------------------------------------------------------
dcl-proc test_PreCmd_NOEVENTF_NOJOBLOG_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*NOEVENTF *NOJOBLOG) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (001)');
  on-error;
  // Exception seen!
  endmon;

  assertEmpty();

  assertLDA('': '');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_PreCmd_EVENTF_NOJOBLOG_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('': ''); // Job log entries are not added to the event file
                     // for pre- and post commands. Therefore no event file
                     // is created.

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with job log of pre-command.
// ------------------------------------------------------------
dcl-proc test_PreCmd_EVENTF_NOJOBLOG_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (002)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPF7312': 'S'); // File not found

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    mo error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_PreCmd_EVENTF_ADDJOBLOG_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('': ''); // Job log entries are not added to the event file
                     // for pre- and post commands. Therefore no event file
                     // is created.

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    error
//  Compile command:
//    *NONE
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with job log of pre-command.
// ------------------------------------------------------------
dcl-proc test_PreCmd_EVENTF_ADDJOBLOG_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE)');
    fail('STRPREPRC should have thown an error (003)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('*NONE'); // *NONE, because of missing parameters SRCLIB, SRCFILE and SRCMBR
  assertMsgId('CPF7312': 'S'); // File not found
  assertMsgId('CPF7306': 'T'); // Member not added

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *NOEVENTF, *NOJOBLOG
//  Pre-command:
//    no error, no event file
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_Execute_NOEVENTF_NOJOBLOG_NOEVENTF_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/*     Succesfully executes the pre-compile and main commands.      */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/* >>EXECUTE<<                                                      */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*NOEVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('': '');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *NOEVENTF, *NOJOBLOG
//  Pre-command:
//    no error, no event file
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to STRPREPRC OPTION(*NOEVENTF).
// ------------------------------------------------------------
dcl-proc test_Execute_NOEVENTF_NOJOBLOG_NOEVENTF_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*NOEVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertEmpty();

  assertLDA('': '');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_NOJOBLOG_NOEVENTF_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/*     Succesfully executes the pre-compile and main commands.      */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/* >>EXECUTE<<                                                      */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    (replacement for compile listing)
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_NOJOBLOG_NOEVENTF_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/*     Produces an error in the main command.                       */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPF0821': 'T'); // Module not created
  assertMsgID('PRZ0029': 'S'); // STRPREPRZ messages

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    (replacement for compile listing)
// -----------------------------------------------------------------------
dcl-proc test_Execute_EVENTF_ADDJOBLOG_NOEVENTF_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertFileID_001('TESTCASE');
  assertMsgID('PRZ0029': 'W'); // STRPREPRZ warning messages, due to OPTION(*ADDJOBLOG).
  assertMsgID('PRZ0033': 'W'); // Object created.

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    (replacement for compile listing)
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_ADDJOBLOG_NOEVENTF_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/*     Produces an error in the main command.                       */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE );                           */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPF0821': 'T'); // Module not created
  assertMsgID('PRZ0029': 'S'); // STRPREPRZ error messages

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_NOJOBLOG_EVENTF_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/*     Succesfully executes the pre-compile and main commands.      */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0726': 'W'); // Variable &LIB declared but not referred to
  assertMsgID('CPD0791': 'I'); // No labels used in program

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_NOJOBLOG_EVENTF_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0081': 'S'); // Variable name required for parameter VAR.

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Specials:
//    Module name has been overridden in STRPREPRC header.
//    Event file must be copied from TEST to TESTCASE.
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    (replacement for compile listing)
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_NOJOBLOG_EVENTF_ERROR_COPY export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 100);
  append('/*     Produces an error in the main command.                       */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>IMPORTANT<<                                                  */');
  append('/*     >>PARM<<  MODULE(&LI/TEST);                                  */');
  append('/*   >>END-IMPORTANT<<                                              */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0081': 'S'); // Variable name required for parameter VAR.

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, no event file
//  Post-command:
//    *NONE
//  Specials:
//    Uses a different member for retrieving the STRPREPRC header and
//    module name has been overridden in STRPREPRC header.
//    Event file must be copied from TEST to TESTCASE.
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    (replacement for compile listing)
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_ADDJOBLOG_EVENTF_OK_COPY export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append2('/* ---------------------------------------------------------------- */': 100);
  append2('/*     STRPREPRC header with compile instructions.                  */');
  append2('/* ---------------------------------------------------------------- */');
  append2('/* >>PRE-COMPILER<<                                                 */');
  append2('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append2('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append2('/*                        OUTPUT(*NONE);                            */');
  append2('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append2('/*   >>IMPORTANT<<                                                  */');
  append2('/*     >>PARM<<  MODULE(&LI/TEST);                                  */');
  append2('/*   >>END-IMPORTANT<<                                              */');
  append2('/*   >>EXECUTE<<                                                    */');
  append2('/* >>END-PRE-COMPILER<<                                             */');

  append('PGM': 100);
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');


  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE2) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(TESTCASE)');

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0726': 'W'); // Variable &LIB declared but not referred to

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, event file
//  Post-command:
//    *NONE
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_ADDJOBLOG_EVENTF_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/*     Succesfully executes the pre-compile and main commands.      */');
  append('/* ---------------------------------------------------------------- */');
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('PGM');
  append('  /* No executable commands found in source file. */');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0729': 'W'); // No executable commands found in source file.

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    error, event file
//  Post-command:
//    no error
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
// ------------------------------------------------------------
dcl-proc test_Execute_EVENTF_ADDJOBLOG_EVENTF_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE );                           */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
    fail('STRPREPRC should have thown an error (004)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0081': 'S'); // Variable name required for parameter VAR.

  assertNoJobLog();

  assertNoMsgId('PRZ0029');

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// ------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    no error
//  Expected:
//    Empty EVFEVENT file, due to no errors.
// ------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_NOJOBLOG_NOEVENTF_OK_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertEmpty();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    no error
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_ADDJOBLOG_NOEVENTF_OK_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  /* No executable commands found in source file. */');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0729': 'W'); // No executable commands found in source file.

  assertNoJobLog();

  assertMsgID('PRZ0029': 'W'); // STRPREPRZ messages

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *NOJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    error
//  Expected:
//    FILEID 001 (TESTCASE) with job log of post-command.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_NOJOBLOG_NOEVENTF_OK_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *NOJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPF7312': 'S'); // File not found
  assertMsgId('CPF7306': 'T'); // Member not added

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, no event file
//  Post-command:
//    error
//  Expected:
//    FILEID 001 (TESTCASE) with job log of compile command.
//    FILEID 999 (*JOBLOG) with job log of post-command.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_ADDJOBLOG_NOEVENTF_OK_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*NOEVENTF) +           */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  DCL &LIB *CHAR 10');
  append('  CHKOBJ OBJ(QSYS) OBJTYPE(*LIB)');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPC0816': 'I'); // Module TESTCASE created in library QTEMP.
  assertMsgID('PRZ0033': 'W'); // Objekt erstellt.

  assertFileID_999('*JOBLOG'); // Job log of *POSTCMD, due to error in post-command.
  assertMsgID('CPF7312': 'S'); // File not found
  assertMsgId('CPF7306': 'T'); // Member not added

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, produces event file
//  Post-command:
//    error
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
//    FILEID 999 (*JOBLOG) with job log of post-command.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_ADDJOBLOG_EVENTF_OK_ERROR export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<   ADDPFM FILE(QTEMP/RUNIT_ERR) MBR(DUMMY);             */');
  append('/*   >>CMD<<   RMVM   FILE(QTEMP/RUNIT_TST) MBR(DUMMY);             */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  /* No executable commands found in source file. */');
  append('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0729': 'W'); // No executable commands found in source file.

  assertFileID_999('*JOBLOG'); // Job log of *POSTCMD, due to error in post-command.
  assertMsgID('CPF7312': 'S'); // File not found
  assertMsgId('CPF7306': 'T'); // Member not added

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, produces event file
//  Post-command:
//    no error
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_ADDJOBLOG_EVENTF_OK_OK export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');
  append('PGM');
  append('  /* No executable commands found in source file. */');
  append('ENDPGM');

  runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
            OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
            SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0729': 'W'); // No executable commands found in source file.

  assertNoJobLog();

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//  STRPREPRC options:
//    *EVENTF, *ADDJOBLOG
//  Pre-command:
//    no error
//  Compile command:
//    no error, produces event file
//  Post-command:
//    error, produces event file
//  Specials:
//    Uses a different member for retrieving the STRPREPRC header and
//    module name has been overridden in STRPREPRC header.
//  Expected:
//    FILEID 001 (TESTCASE) with compile messages.
//    FILEID 999 (*JOBLOG) with job log of post-command.
// -----------------------------------------------------------------------
dcl-proc test_PostCmd_EVENTF_ADDJOBLOG_EVENTF_OK_ERROR_2 export;
  dcl-pi *n extproc(*dclcase) end-pi;

  append('/* ---------------------------------------------------------------- */': 1);
  append('/* >>PRE-COMPILER<<                                                 */');
  append('/*   >>CRTCMD<< CRTCLMOD  MODULE(&LI/&OB) SRCFILE(&SL/&SF) +        */');
  append('/*                        SRCMBR(&SM) OPTION(*EVENTF) +             */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/*   >>CMD<<    CHKOBJ OBJ(QTEMP/RUNIT_TST) OBJTYPE(*FILE);         */');
  append('/*   >>EXECUTE<<                                                    */');
  append('/*   >>CMD<<   CRTCLMOD   MODULE(&LI/TESTCASE2) SRCFILE(&SL/&SF) +  */');
  append('/*                        SRCMBR(TESTCASE2) OPTION(*EVENTF) +       */');
  append('/*                        OUTPUT(*NONE);                            */');
  append('/* >>END-PRE-COMPILER<<                                             */');
  append('/* ---------------------------------------------------------------- */');

  append2('/* ---------------------------------------------------------------- */': 100);
  append2('/*     Produces an compile error.                                   */');
  append2('/* ---------------------------------------------------------------- */');
  append2('PGM');
  append2('  CHGVAR &LIB ''FOO''');
  append2('ENDPGM');

  monitor;
    runCmd('STRPREPRC USESRCFILE(QTEMP/RUNIT_TST) USESRCMBR(TESTCASE) +
              OPTION(*EVENTF *ADDJOBLOG) LIB(QTEMP) OBJ(TESTCASE) +
              SRCLIB(*DFT) SRCFILE(*DFT) SRCMBR(*DFT)');
  on-error;
  // Exception seen!
  endmon;

  assertFileID_001('TESTCASE');
  assertMsgID('CPD0729': 'W'); // No executable commands found in source file.

  assertFileID_999('*JOBLOG'); // Job log of *POSTCMD, due to error in post-command.
  assertMsgID('CPF0821': 'T'); // Module TESTCASE2 not created.

  assertLDA('QTEMP': 'TESTCASE');

end-proc;

// -----------------------------------------------------------------------
//    Test: stream file never opened.
// -----------------------------------------------------------------------
dcl-proc test_Source_StreamFile_not_open export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s isOpen ind;
  dcl-s lineNbr int(10);
  dcl-s length int(10);

  isOpen = SourceStreamFile_isOpen();
  assert(not isOpen: 'Stream file never opened. Should return isOpen as cFalse');

  lineNbr = SourceStreamFile_getLineNbr();
  assert(lineNbr = -1: 'Stream file never opened. Should return line number -1');

  length = SourceStreamFile_getDtaLength();
  assert(length = 0: 'Stream file never opened. Should return line length 0');

end-proc;

// -----------------------------------------------------------------------
//    Test: open/close stream file.
// -----------------------------------------------------------------------
dcl-proc test_open_close_Source_StreamFile export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s isOpen ind;
  dcl-s srcDta like(srcDta_t);
  dcl-s isEOF ind;
  dcl-s lineNbr int(10);
  dcl-s length int(10);

  createStreamFile(STMF_UTF8: 1208);

  SourceStreamFile_open(STMF_UTF8);

  isOpen = SourceStreamFile_isOpen();
  assert(isOpen: 'Stream file is open. Should return isOpen as cTrue');

  lineNbr = SourceStreamFile_getLineNbr();
  assert(lineNbr = 0: 'Stream file is open. Should return line number 0');

  isEOF = not SourceStreamFile_readLine(srcDta);
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (begin)');
  lineNbr = SourceStreamFile_getLineNbr();
  assert(lineNbr = 1: 'First line has been red. Should return line number 1');

on-exit;
  SourceStreamFile_close();

  isOpen = SourceStreamFile_isOpen();
  assert(not isOpen: 'Stream file closed. Should return isOpen as cFalse');

  lineNbr = SourceStreamFile_getLineNbr();
  assert(lineNbr = -1: 'Stream file closed. Should return line number -1');

  length = SourceStreamFile_getDtaLength();
  assert(length = 0: 'Stream file closed. Should return line length 0');

  deleteStreamFile(STMF_UTF8);

end-proc;

// -----------------------------------------------------------------------
//    Test: reading stream file.
// -----------------------------------------------------------------------
dcl-proc test_Read_Source_StreamFile export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s srcDta like(srcDta_t);
  dcl-s isEOF ind;
  dcl-s lineNbr int(10);
  dcl-s length int(10);
  dcl-s i int(10);

  BUFFER_SIZE = 10;

  createStreamFile(STMF_UTF8: 1208);

  SourceStreamFile_open(STMF_UTF8);

  for i = 1 to 5;

    // test
    isEOF = not SourceStreamFile_readLine(srcDta);
    lineNbr = SourceStreamFile_getLineNbr();
    length = SourceStreamFile_getDtaLength();

    // assertions
    assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse for line #' + %char(i));
    assert(lineNbr = i: 'Line number ' + %char(lineNbr)
           + ' does not match expected value ' + %char(i));
    assert(length = %len(LINES.data(i)): 'Length ' + %char(length) + ' of line #' + %char(i)
           + ' does not match expected value ' + %char(%len(LINES.data(i))));

  endfor;

  // next line is empty, because of the CR after the LF of line #4
  // that is the same LFCR interpreting as of Notepad++

  // test
  isEOF = not SourceStreamFile_readLine(srcDta);
  lineNbr = SourceStreamFile_getLineNbr();
  length = SourceStreamFile_getDtaLength();

  // assertions
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse for line #6' + %char(i));
  assert(lineNbr = 6: 'Line number ' + %char(lineNbr)
         + ' does not match expected value 6');
  assert(length = 0: 'Length ' + %char(length) + ' of line #6'
         + ' does not match expected value 0');

  // read last line.

  // test
  isEOF = not SourceStreamFile_readLine(srcDta);
  lineNbr = SourceStreamFile_getLineNbr();
  length = SourceStreamFile_getDtaLength();

  // assertions
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse for line #7' + %char(i));
  assert(lineNbr = 7: 'Line number ' + %char(lineNbr)
         + ' does not match expected value 7');
  assert(length = %len(LINES.data(6)): 'Length ' + %char(length) + ' of line #7'
         + ' does not match expected value ' + %char(%len(LINES.data(6))));

on-exit;
  SourceStreamFile_close();

  deleteStreamFile(STMF_UTF8);

end-proc;

// -----------------------------------------------------------------------
//    Test: reading stream file forth and back.
// -----------------------------------------------------------------------
dcl-proc test_ReadPrv_Source_StreamFile export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s srcDta like(srcDta_t);
  dcl-s isOpen ind;
  dcl-s isEOF ind;
  dcl-s lineNbr int(10);
  dcl-s length int(10);

  createStreamFile(STMF_UTF8: 1208);

  BUFFER_SIZE = 10;

  SourceStreamFile_open(STMF_UTF8);

  isOpen = SourceStreamFile_isOpen();
  assert(isOpen: 'Stream file is open. Must return cTrue');

  isEOF = not SourceStreamFile_readLine(srcDta); // begin

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 1

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 2

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 3

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 4

  isEOF = not SourceStreamFile_readPrvLine(srcDta); // Line 3
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (line 3)'); // CRLF
  length = SourceStreamFile_getDtaLength();
  lineNbr = SourceStreamFile_getLineNbr();
  assert(%trimr(srcDta) = LINE_3 : 'Unexpected content in ine 3');
  assert(length = %len(LINE_3): 'Invalid line length of (line 3)');
  assert(lineNbr = 4: 'Read previous line. Should return line number 4');

  isEOF = not SourceStreamFile_readPrvLine(srcDta); // Line 2
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (line 2)'); // CRLF
  length = SourceStreamFile_getDtaLength();
  lineNbr = SourceStreamFile_getLineNbr();
  assert(%trimr(srcDta) = LINE_2 : 'Unexpected content in ine 2');
  assert(length = %len(LINE_2): 'Invalid line length of (line 2)');
  assert(lineNbr = 3: 'Read previous line. Should return line number 3');

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 3
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (line 3)'); // CRLF
  assert(%trimr(srcDta) = LINE_3 : 'Unexpected content in ine 3');

  isEOF = not SourceStreamFile_readLine(srcDta); // Line 4
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (line 4)'); // CRLF
  assert(%trimr(srcDta) = LINE_4 : 'Unexpected content in ine 4');

  isEOF = not SourceStreamFile_readLine(srcDta); // empty
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (empty line)');
  assert(%trimr(srcDta) = '' : 'Unexpected content in ine 5');

  isEOF = not SourceStreamFile_readLine(srcDta); // end
  lineNbr = SourceStreamFile_getLineNbr();
  assert(lineNbr = 7: 'Read previous line. Should return line number 7');

on-exit;
  SourceStreamFile_close();

  deleteStreamFile(STMF_UTF8);

end-proc;

// -----------------------------------------------------------------------
//    Test: reding stream file past the last line.
// -----------------------------------------------------------------------
dcl-proc test_Read_EOF_Source_StreamFile export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s srcDta like(srcDta_t);
  dcl-s isEOF ind;
  dcl-s lineNbr int(10);
  dcl-s length int(10);
  dcl-s count int(10);

  createStreamFile(STMF_UTF8: 1208);

  BUFFER_SIZE = 10;

  SourceStreamFile_open(STMF_UTF8);

  count = 0;

  dou (isEOF);
    isEOF = not SourceStreamFile_readLine(srcDta);
    lineNbr = SourceStreamFile_getLineNbr();
    length = SourceStreamFile_getDtaLength();
    if (not isEOF);
      count += 1;
    endif;
  enddo;

  assert(count = 7: 'Expected to have seen 7 lines.');

  // test EOF values

  assert(lineNbr = 0: 'Line number must be -1');
  assert(length = 0: 'Length must be 0');
  assert(srcDta = '': 'srcDta must be empty');
  assert(isEOF: 'isEOF must be cTrue');

  // read past the last line a second time;

  isEOF = not SourceStreamFile_readLine(srcDta);
  lineNbr = SourceStreamFile_getLineNbr();
  length = SourceStreamFile_getDtaLength();

  assert(lineNbr = 0: 'Line number must be -1');
  assert(length = 0: 'Length must be 0');
  assert(srcDta = '': 'srcDta must be empty');
  assert(isEOF: 'isEOF must be cTrue');

on-exit;
  SourceStreamFile_close();

  deleteStreamFile(STMF_UTF8);

end-proc;

// -----------------------------------------------------------------------
//    Test: reding stream file before first line.
// -----------------------------------------------------------------------
dcl-proc test_ReadPrv_EOF_Source_StreamFile export;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s srcDta like(srcDta_t);
  dcl-s isEOF ind;
  dcl-s lineNbr int(10);

  createStreamFile(STMF_UTF8: 1208);

  BUFFER_SIZE = 10;

  SourceStreamFile_open(STMF_UTF8);

  isEOF = not SourceStreamFile_readLine(srcDta); // begin
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (begin)');

  isEOF = not SourceStreamFile_readLine(srcDta); // 1. line
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (line 1)');

  isEOF = not SourceStreamFile_readPrvLine(srcDta); // begin
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (begin)');

  isEOF = not SourceStreamFile_readPrvLine(srcDta); // EOF
  lineNbr = SourceStreamFile_getLineNbr();
  assert(isEOF: 'SourceStreamFile_readLine() must return cTrue (EOF #1)');
  assert(lineNbr = 0: 'Stream is at EOF #1. Should return line number 0');
  assert(%trimr(srcDta) = '' : 'EOF #1. Line data mut be empty');

  isEOF = not SourceStreamFile_readPrvLine(srcDta); // EOF
  lineNbr = SourceStreamFile_getLineNbr();
  assert(isEOF: 'SourceStreamFile_readLine() must return cTrue (EOF #2)');
  assert(lineNbr = 0: 'Stream is at EOF #2. Should return line number 0');
  assert(%trimr(srcDta) = '' : 'EOF #2. Line data mut be empty');

  isEOF = not SourceStreamFile_readLine(srcDta); // begin
  assert(not isEOF: 'SourceStreamFile_readLine() must return cFalse (begin)');
  assert(%trimr(srcDta) = LINE_BEGIN : 'Unexpected content in ine 1');

on-exit;
  SourceStreamFile_close();

  deleteStreamFile(STMF_UTF8);

end-proc;

// ------------------------------------------------------------
//  Creates a stream file with test data.
// ------------------------------------------------------------
dcl-proc createStreamFile;
  dcl-pi *n extproc(*dclcase);
    i_stmf   varchar(200) options(*trim) const;
    i_ccsid  int(10) const;
  end-pi;

  dcl-s fd int(10);
  dcl-s text varchar(200);

  dcl-c CR x'0D';
  dcl-c CRLF x'0D25';
  dcl-c LF x'25';
  dcl-c LFCR x'250D';

  fd = open(i_stmf
            : O_CREAT + O_WRONLY + O_SHARE_RDONLY +
              O_TEXTDATA + O_CCSID + O_TRUNC + O_TEXT_CREAT
            : S_IRUSR + S_IWUSR +       // Owner:     read/write
              S_IRGRP + S_IWGRP +       // Group:     read/write
              S_IROTH + S_IWOTH         // Public:    read/write
            : i_ccsid: 0);              // create CCSID / write data CCSID (= job)

  text = lines.data(1) + LF;
  callp write(fd: %addr(text: *data): %len(text));

  text = lines.data(2) + CR;
  callp write(fd: %addr(text: *data): %len(text));

  text = lines.data(3) + LF;
  callp write(fd: %addr(text: *data): %len(text));

  text = lines.data(4) + CRLF;
  callp write(fd: %addr(text: *data): %len(text));

  text = lines.data(5) + LFCR;
  callp write(fd: %addr(text: *data): %len(text));

  text = lines.data(6);
  callp write(fd: %addr(text: *data): %len(text));

  callp close(fd);

end-proc;

// ------------------------------------------------------------
//  Deletes the stream file identified by a given path.
// ------------------------------------------------------------
dcl-proc deleteStreamFile;
  dcl-pi *n extproc(*dclcase);
    i_stmf varchar(200) options(*trim) const;
  end-pi;

  dcl-ds st_stat likeds(st_stat_t);

  if (stat(i_stmf: %addr(st_stat)) <> -1);
    unlink(i_stmf);
  endif;

end-proc;

// ------------------------------------------------------------
//  Assert that the event file is empty.
// ------------------------------------------------------------
dcl-proc assertEmpty;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s count int(10);

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile;
  assert(not isSqlError(sqlState));

  assert(count = 0: 'The event file must not contain any entries at all');

end-proc;

// ------------------------------------------------------------
//  Assert that the event file does not contain any *JOBLOG
//  entries.
// ------------------------------------------------------------
dcl-proc assertNoJobLog;
  dcl-pi *n extproc(*dclcase) end-pi;

  dcl-s count int(10);

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile
      WHERE evfevent like 'FILEID % *JOBLOG %';
  assert(not isSqlError(sqlState));

  assert(count = 0: 'The event file must not contain a FILEID for *JOBLOG');

end-proc;

// ------------------------------------------------------------
//  Asserts that the event file contains a file ID 001 section.
// ------------------------------------------------------------
dcl-proc assertFileID_001;
  dcl-pi *n extproc(*dclcase);
    i_section  varchar(10) const;
  end-pi;

  dcl-s argument varchar(100);
  dcl-s count int(10);

  argument = 'FILEID     0 001 %(' + i_section + ')%';

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile
      WHERE evfevent like :argument;
  assert(not isSqlError(sqlState));

  assert(count = 1: 'Error messages must be related to file ID 001');

end-proc;

// ------------------------------------------------------------
//  Asserts that the event file contains a file ID 999 section.
// ------------------------------------------------------------
dcl-proc assertFileID_999;
  dcl-pi *n extproc(*dclcase);
    i_section  varchar(10) const;
  end-pi;

  dcl-s argument varchar(100);
  dcl-s count int(10);

  argument = 'FILEID     0 999 % ' + i_section + ' %';

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile
      WHERE evfevent like :argument;
  assert(not isSqlError(sqlState));

  assert(count = 1: 'Error messages must be related to file ID 999 (job log)');

end-proc;

// ------------------------------------------------------------
//  Asserts that the event file contains a message
//  with the specified message id.
// ------------------------------------------------------------
dcl-proc assertMsgID;
  dcl-pi *n extproc(*dclcase);
    i_msgID  varchar(7) const;
    i_severity char(1) options(*nopass) const;
  end-pi;

  dcl-s argument varchar(100);
  dcl-s count int(10);

  if (%parms() >= %parmnum(i_severity));
    argument = 'ERROR % ' + i_msgID + ' ' + i_severity + ' %';
  else;
    argument = 'ERROR % ' + i_msgID + ' %';
  endif;

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile
      WHERE evfevent like :argument;

  assert(not isSqlError(sqlState));

  assert(count >= 1: 'Event file must contain a message with ID: ' + i_msgID);

end-proc;

// ------------------------------------------------------------
//  Asserts that the local data area (*LDA) was updated.
// ------------------------------------------------------------
dcl-proc assertLDA;
  dcl-pi *n extproc(*dclcase);
    i_lib  char(10) const;
    i_obj  char(10) const;
  end-pi;

  dcl-ds lda likeds(g_LDA);

  lda = retrieveLDA();

  assert(lda.library = i_lib: 'Library name [' + %trim(lda.library) +
                              '] in *LDA does not match: ' + %trim(i_lib));

  assert(lda.object = i_obj: 'Object name [' + %trim(lda.object) +
                             '] in *LDA does not match: ' + %trim(i_obj));

end-proc;

// ------------------------------------------------------------
//  Asserts that the event file does not contains a message
//  with the specified message id.
// ------------------------------------------------------------
dcl-proc assertNoMsgID;
  dcl-pi *n extproc(*dclcase);
    i_msgID  varchar(7) const;
    i_severity char(1) options(*nopass) const;
  end-pi;

  dcl-s argument varchar(100);
  dcl-s count int(10);

  if (%parms() >= %parmnum(i_severity));
    argument = 'ERROR % ' + i_msgID + ' ' + i_severity + ' %';
  else;
    argument = 'ERROR % ' + i_msgID + ' %';
  endif;

  exec sql
    SELECT count(evfevent) INTO :count FROM eventfile
      WHERE evfevent like :argument;

  assert(not isSqlError(sqlState));

  assert(count = 0: 'Event file must not contain a message with ID: ' + i_msgID);

end-proc;

// ------------------------------------------------------------
//  Appends a row to member 'testcase' of file.
// ------------------------------------------------------------
dcl-proc append export;
  dcl-pi *n extproc(*dclcase);
    i_data varchar(100) const;
    i_srcSeq int(10) options(*nopass) const;
  end-pi;

  dcl-s isPrepared1 ind inz(*off) static;

  dcl-s srcSeq zoned(6:2);
  dcl-s data like(i_data);

  if (%parms() >= %parmnum(i_srcSeq));
    g_status.srcSeq = i_srcSeq;
  endif;

  if (not isPrepared1);
    exec sql
      prepare append_row1 from
        'INSERT INTO testmbr (SRCSEQ, SRCDTA, SRCDAT) VALUES(?, ?, 0)';
    assert(not isSqlError(sqlState));
    isPrepared1 = *on;
  endif;

  srcSeq = g_status.srcSeq;
  data = i_data;

  exec sql
    EXECUTE append_row1 USING :srcSeq, :data;
  assert(not isSqlError(sqlState));

  g_status.srcSeq += 100;

end-proc;

// ------------------------------------------------------------
//  Appends a row to member 'testcase2' of file.
// ------------------------------------------------------------
dcl-proc append2 export;
  dcl-pi *n extproc(*dclcase);
    i_data varchar(100) const;
    i_srcSeq int(10) options(*nopass) const;
  end-pi;

  dcl-s isPrepared2 ind inz(*off) static;

  dcl-s srcSeq zoned(6:2);
  dcl-s data like(i_data);

  if (%parms() >= %parmnum(i_srcSeq));
    g_status.srcSeq2 = i_srcSeq;
  endif;

  if (not isPrepared2);
    exec sql
      prepare append_row2 from
        'INSERT INTO testmbr2 (SRCSEQ, SRCDTA, SRCDAT) VALUES(?, ?, 0)';
    assert(not isSqlError(sqlState));
    isPrepared2 = *on;
  endif;

  srcSeq = g_status.srcSeq2;
  data = i_data;

  exec sql
    EXECUTE append_row2 USING :srcSeq, :data;
  assert(not isSqlError(sqlState));

  g_status.srcSeq2 += 100;

end-proc;

// ------------------------------------------------------------
//  Returns *on, when the last SQL statement ended with an
//  error, else *off;
// ------------------------------------------------------------
dcl-proc setIgnSQLWarn;
  dcl-pi *n extproc(*dclcase);
    i_ignore ind const;
  end-pi;

  g_status.sql.ignSQLWarn = i_ignore;

end-proc;

// ------------------------------------------------------------
//  Returns *on, when the last SQL statement ended with an
//  error, else *off;
// ------------------------------------------------------------
dcl-proc isSQLError;
  dcl-pi *n ind extproc(*dclcase);
    i_state   char(5) const;
  end-pi;

  dcl-ds sqlState qualified;
    class char(2);
    qualifier char(3);
  end-ds;

  dcl-ds sql likeds(sql_status_t);

  sqlState = i_state;
  sql = g_status.sql;

  reset g_status.sql;

  select;
  // SQL code 00: Unqualified Successful Completion
  when (sqlState = '00000');
    // Execution of the operation was successful and did not
    // result in any type of warning or exception condition.
    return *off;

  // SQL code 01: Warning
  When (sqlState.class = '01');
    // Valid warning SQLSTATEs returned by an SQL routine.
    // Also used for RAISE_ERROR and SIGNAL.
    if (sql.ignSQLWarn);
      return *off;
    else;
      return *on;
    endif;

  // SQL code 02: No data
  When (sqlState = '02000');
    return *off;

  other;
    // Other problem or error
    return *on;
  endsl;

end-proc;

// ------------------------------------------------------------
//  Returns the SQL statement that was executed at last.
// ------------------------------------------------------------
dcl-proc getLastSqlStmt;
  dcl-pi *n varchar(1024) extproc(*dclcase) end-pi;

  dcl-pr QUSRJOBI extpgm('QUSRJOBI');
    o_rcvVar     char(65535) options(*varsize);
    i_lenRcvVar  int(10)     const;
    i_format     char(8)     const;
    i_qJob       char(26)    const;
    i_intJobId   char(16)    const;
    io_errCode   char(65535) options(*nopass: *varsize);
  End-Pr;

  dcl-ds jobi0900 qualified;
    bytRtn        int(10);
    bytAvl        int(10);
    offSetCurStmt int(10) pos(77);
    stmtSize      int(10) pos(81);
    status        int(10) pos(85);
    ccsid         int(10) pos(89);
    reserved_1    char(1024);
  End-Ds;

  dcl-ds statement qualified based(pStatement);
    value char(1024);
  end-ds;

  dcl-ds errCode likeds(local_errCode_t) inz(*likeds);

  QUSRJOBI(jobi0900: %size(jobi0900): 'JOBI0900': '*': '': errCode);

  if (jobi0900.stmtSize > 0);
    pStatement = %addr(jobi0900) + jobi0900.offSetCurStmt;
    return %subst(statement.value: 1: jobi0900.stmtSize);
  else;
    return 'SQL statement could not be retri.';
  endif;

end-proc;

// ------------------------------------------------------------
//  Returns *ON, when the specified object exists, ese *OFF.
// ------------------------------------------------------------
dcl-proc exist;
  dcl-pi *n ind extproc(*dclcase);
    i_lib varchar(10) const;
    i_obj varchar(10) const;
    i_type varchar(10) const;
    i_mbr varchar(10) options(*nopass: *omit) const;
  end-pi;

  // Retrieve Object Description (QUSROBJD) API
  dcl-pr QUSROBJD extpgm('QUSROBJD');
    o_rcvVar     char(65535) options(*varsize);
    i_lenRcvVar  int(10)     const;
    i_format     char(8)     const;
    i_qObj       char(20)    const;
    i_type       char(10)    const;
    io_errCode   char(65535) options(*nopass: *varsize);
  end-pr;

  dcl-ds objd0100 qualified;
    bytRet       int(10);
    bytAvl       int(10);
    name         char(10);
    lib          char(10);
    type         char(10);
    rtnLib       char(10);
    auxStgP      int(10);
    owner        char(10);
    domain       char(2);
    crtDatTim    char(13);
    chgDatTim    char(13);
  end-ds;

  // Retrieve Member Description (QUSRMBRD) API
  dcl-pr QUSRMBRD extpgm('QUSRMBRD');
    o_rcvVar     char(65535) options(*varsize);
    i_lenRcvVar  int(10)     const;
    i_format     char(8)     const;
    i_qFile      char(20)    const;
    i_mbr        char(10)    const;
    i_ovrPrc     char(1)     const;
    io_errCode   char(65535) options(*nopass: *varsize);
  end-pr;

  dcl-ds mbrd0100 qualified;
    bytRet       int(10);
    bytAvl       int(10);
    file         char(10);
    lib          char(10);
    mbr          char(10);
    attr         char(10);
    srcType      char(10);
    crtDatTim    char(13);
    srcChgDatTim char(13);
    text         char(50);
    isSrcFile    char(1);
  end-ds;

  dcl-ds errCode likeds(local_errCode_t) inz(*likeds);

  dcl-ds qObj qualified;
    name         char(10);
    lib          char(10);
  end-ds;

  clear qObj;
  qObj.name = i_obj;
  qObj.lib = i_lib;

  if (i_type = '*FILE' and %parms() >= %parmnum(i_mbr));
    QUSRMBRD(mbrd0100: %size(mbrd0100): 'MBRD0100': qObj: i_mbr: '0': errCode);
  else;
    QUSROBJD(objd0100: %size(objd0100): 'OBJD0100': qObj: i_type: errCode);
  endif;

  return errCode.bytAvl = 0;

end-proc;

// ------------------------------------------------------------
//  Clear local data area (*LDA).
// ------------------------------------------------------------
dcl-proc clearLDA;
  dcl-pi *n extproc(*dclcase) end-pi;

  monitor;
    in g_LDA;
    g_LDA.library = '';
    g_LDA.object = '';
    out g_LDA;
  on-error;
  endmon;
end-proc;

// ------------------------------------------------------------
//  Retrieve local data area (*LDA).
// ------------------------------------------------------------
dcl-proc retrieveLDA;
  dcl-pi *n likeds(g_lda) extproc(*dclcase) end-pi;

  clear g_LDA;

  monitor;
    in g_LDA;
  on-error;
  endmon;

  return g_LDA;

end-proc;

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing SDS  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "SDS       "
mbrtype =  "RPGLE     "
mbrtext =  "Program Status Data Structure                     "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      /if not defined(SDS)
      /define SDS
     D sds            sds                  qualified
     D  pgmName                      10a
     D  status                        5s 0
     D  prvStat                       5s 0
     D  lastSeq                       8a
     D  lastSubR                      8a
     D  numParm                       3s 0
     D  msgID                         7a
     D  MiInstr                       4a
     D  wrkArea                      30a
     D  pgmLib                       10a
     D  msgText                      80a
      /endif
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPRE1  type PF - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPRE1   "
mbrtype =  "PF        "
mbrtext =  "Tool: STRPREPRC  (Starten Pre-Proz.  ) Ctrl File  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *=====================================================================*
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPRE1                                            *
      *  Beschreibung  : Tool: STRPREPRC  (Starten Pre-Proz.  ) Ctrl File   *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 21.11.2000                                         *
      *                                                                     *
      *=====================================================================*
      * >>PRE-COMPILER<<                                                    *
      *                                                                     *
      *   >>CRTCMD<< CRTPF        FILE(&LI/&OB) +                           *
      *                           SRCFILE(&SL/&SF) +                        *
      *                           SRCMBR(&SM);                              *
      *                                                                     *
      *   >>COMPILE<<                                                       *
      *     >>PARM<< MAXMBRS(1);                                            *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-COMPILE<<                                                   *
      *                                                                     *
      *   >>EXECUTE<<                                                       *
      *                                                                     *
      * >>END-PRE-COMPILER<<                                                *
      *=====================================================================*
     A                                      UNIQUE
      *
     A          R FSTRPRE1
     A            MODE          30A         TEXT('Mode')
     A            NEWMODE       30A         TEXT('Next Mode')
      *
     A          K MODE
     A          K NEWMODE
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPRE2  type PF - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPRE2   "
mbrtype =  "PF        "
mbrtext =  "Tool: STRPREPRC  (Starten Pre-Proz.  ) MsgID File "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      *=====================================================================*
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPRE2                                            *
      *  Beschreibung  : Tool: STRPREPRC  (Starten Pre-Proz.  ) MsgID File  *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 15.05.2015                                         *
      *                                                                     *
      *=====================================================================*
      * >>PRE-COMPILER<<                                                    *
      *                                                                     *
      *   >>CRTCMD<< CRTPF        FILE(&LI/&OB) +                           *
      *                           SRCFILE(&SL/&SF) +                        *
      *                           SRCMBR(&SM);                              *
      *                                                                     *
      *   >>COMPILE<<                                                       *
      *     >>PARM<< MAXMBRS(1);                                            *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-COMPILE<<                                                   *
      *                                                                     *
      *   >>EXECUTE<<                                                       *
      *                                                                     *
      * >>END-PRE-COMPILER<<                                                *
      *=====================================================================*
     A                                      UNIQUE
      *
     A          R FSTRPRE2
     A            MSGFILE       10A         TEXT('Message File')
     A            MSGLIB        10A         TEXT('Message File Library: *LIBL')
     A                                      DFT('*LIBL')
     A            MSGID          7A         TEXT('Message ID')
     A            FMT            2S 0       TEXT('Message format field that co+
     A                                      ntains the line number, -1=ignore ')
     A            TEXT          50A         TEXT('Message Text (Comment)')
      *
     A          K MSGFILE
     A          K MSGLIB
     A          K MSGID
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC  type MAKPGM - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC "
mbrtype =  "MAKPGM    "
mbrtext =  "Command: Start Pre-Processor (CPP Module)         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /* =================================================================== */
     /*                                                                     */
     /*  Kurzdokumentation :                                                */
     /*                                                                     */
     /*  Bereich . . . : STRPREPRC                                          */
     /*  Objekt  . . . : STRPREPRC                                          */
     /*  Beschreibung  : Start Pre-Processor - CPP                          */
     /*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      */
     /*  Datum . . . . : 11.02.2019                                         */
     /*                                                                     */
     /* =================================================================== */
     /*                                                                     */
     /*  This software is free software, you can redistribute it and/or     */
     /*  modify it under the terms of the GNU General Public License (GPL)  */
     /*  as published by the Free Software Foundation.                      */
     /*                                                                     */
     /*  See GNU General Public License for details.                        */
     /*          http://www.opensource.org                                  */
     /*          http://www.opensource.org/licenses/gpl-license.html        */
     /*                                                                     */
     /* =================================================================== */
     /*  History:                                                           */
     /*                                                                     */
     /*  Datum       Name          nderung                                 */
     /*  ----------  ------------  ---------------------------------------  */
     /*  11.02.2019  Th.Raddatz    Added DSPSRCC to descibe the creation    */
     /*                            command of the command processing        */
     /*                            program.                                 */
     /*                                                                     */
     /* =================================================================== */
     /* >>PRE-COMPILER<<                                                    */
     /*   >>CRTCMD<< CRTPGM       PGM(&LI/STRPREPRC );                      */
     /*   >>IMPORTANT<<                                                     */
     /*     >>PARM<< MODULE(&LI/STRPREPRC1 +                                */
     /*                     &LI/STRPREPRC2 +                                */
     /*                     &LI/STRPREPRC3 +                                */
     /*                     &LI/STRPREPRC4 +                                */
     /*                     &LI/STRPREPRC5 +                                */
     /*                     &LI/STRPREPRC6 );                               */
     /*     >>PARM<< ENTMOD(&LI/STRPREPRC1);                                */
     /*     >>PARM<< BNDSRVPGM(&LI/BASICS1 +                                */
     /*                        &LI/EVENTF  +                                */
     /*                        &LI/JOBLOG );                                */
     /*     >>PARM<< ACTGRP(*NEW);                                          */
     /*     >>PARM<< DETAIL(*BASIC);                                        */
     /*   >>END-IMPORTANT<<                                                 */
     /*   >>EXECUTE<<                                                       */
     /* >>END-PRE-COMPILER<<                                                */
     /* =================================================================== */

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC1  type CLLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC1"
mbrtype =  "CLLE      "
mbrtext =  "Start Pre-Processor - CPP                         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /* =================================================================== */
     /*                                                                     */
     /*  Kurzdokumentation :                                                */
     /*                                                                     */
     /*  Bereich . . . : STRPREPRC                                          */
     /*  Objekt  . . . : STRPREPRC1                                         */
     /*  Beschreibung  : Start Pre-Processor - CPP Module                   */
     /*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      */
     /*  Datum . . . . : 21.11.2000                                         */
     /*                                                                     */
     /* =================================================================== */
     /*                                                                     */
     /*  This software is free software, you can redistribute it and/or     */
     /*  modify it under the terms of the GNU General Public License (GPL)  */
     /*  as published by the Free Software Foundation.                      */
     /*                                                                     */
     /*  See GNU General Public License for details.                        */
     /*          http://www.opensource.org                                  */
     /*          http://www.opensource.org/licenses/gpl-license.html        */
     /*                                                                     */
     /* =================================================================== */
     /*  History:                                                           */
     /*                                                                     */
     /*  Datum       Name          nderung                                 */
     /*  ----------  ------------  ---------------------------------------  */
     /*  07.03.2014  Th.Raddatz    Added special value *DFT to parameters   */
     /*                            SRCLIB, SRCFILE and SRCMBR.              */
     /*                                                                     */
     /*  09.04.2015  Hildebrandt   Added parameter EXICMDEXC to command.    */
     /*                                                                     */
     /*  14.07.2015  Th.Raddatz    Fixed problem, that parameter &XMSGFLIB  */
     /*                            was not properly initialized.            */
     /*                                                                     */
     /*  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        */
     /*                            command.                                 */
     /*                                                                     */
     /*  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     */
     /*                            2048 to 8192.                            */
     /*                                                                     */
     /*  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC */
     /*                            run the XCRTSQLOBJ command of CMOne      */
     /*                            for source members without a STRPREPRC   */
     /*                            header.                                  */
     /*                                                                     */
     /*  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   */
     /*                                                                     */
     /*  11.02.2019  Th.Raddatz    Replaced OVRDBF of module STRPREPRC1     */
     /*                            with EXTFILE and EXTMBR in STRPREPRC2.   */
     /*                            Moved checking of object existence to    */
     /*                            STRPREPRC2.                              */
     /*                            Moved handling the *DFT special value to */
     /*                            STRPREPRC2.                              */
     /*                                                                     */
     /*  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     */
     /*                            to support IFS stream files.             */
     /*                                                                     */
     /*  05.01.2023  Th.Raddatz    Fixed incorrect length of parameter      */
     /*                            &OBJTYPE.                                */
     /*                                                                     */
     /* =================================================================== */
     /* >>PRE-COMPILER<<                                                    */
     /*   >>CRTCMD<< CRTCLMOD     MODULE(&LI/&OB) +                         */
     /*                           SRCFILE(&SL/&SF) SRCMBR(&SM);             */
     /*   >>IMPORTANT<<                                                     */
     /*     >>PARM<< DBGVIEW(*LIST);                                        */
     /*     >>PARM<< OPTION(*EVENTF);                                       */
     /*   >>END-IMPORTANT<<                                                 */
     /*   >>EXECUTE<<                                                       */
     /* >>END-PRE-COMPILER<<                                                */
     /* =================================================================== */
             PGM        PARM(&QUSESRCF   +
                             &USESRCMBR  +
                             &USESRCSTMF +
                             &CMD        +
                             &OPTION     +
                             &CHGOBJD    +
                             &OBJTYPE    +
                             &OBJSRCFILE +
                             &OBJSRCLIB  +
                             &OBJSRCMBR  +
                             &XLIB       +
                             &XOBJ       +
                             &XTYPECODE  +
                             &XSRCLIB    +
                             &XSRCFILE   +
                             &XSRCMBR    +
                             &XTESTLIB   +
                             &XTESTOBJ   +
                             &XTGTRLS    +
                             &XFRMSRCLIB +
                             &XFRMSRCFIL +
                             &XFRMSRCMBR +
                             &XUSER0     +
                             &XUSER1     +
                             &XUSER2     +
                             &XUSER3     +
                             &XUSER4     +
                             &XUSER5     +
                             &XUSER6     +
                             &XUSER7     +
                             &XUSER8     +
                             &XUSER9     +
                             &XSTMF      +
                             &USRDEFVAR  +
                             &LIBL       +
                             &USELIBL    +
                             &XTAGSREQ   +
                             &XMSGF      +
                             &EXICMDEXC  +
                             &EXECOPT    )

             DCL        VAR(&QUSESRCF  ) TYPE(*CHAR) LEN(  20)
             DCL        VAR(&USESRCMBR ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&USESRCSTMF) TYPE(*CHAR) LEN(4098)
             DCL        VAR(&CMD       ) TYPE(*CHAR) LEN(8192)
             DCL        VAR(&OPTION    ) TYPE(*CHAR) LEN(  52)
             DCL        VAR(&CHGOBJD   ) TYPE(*CHAR) LEN(   4)
             DCL        VAR(&OBJTYPE   ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&OBJSRCFILE) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&OBJSRCLIB ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&OBJSRCMBR ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XLIB      ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XOBJ      ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XTYPECODE ) TYPE(*CHAR) LEN(   6)
             DCL        VAR(&XSRCLIB   ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XSRCFILE  ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XSRCMBR   ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XTESTLIB  ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XTESTOBJ  ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XTGTRLS   ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XFRMSRCLIB) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XFRMSRCFIL) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XFRMSRCMBR) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XUSER0    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER1    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER2    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER3    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER4    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER5    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER6    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER7    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER8    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XUSER9    ) TYPE(*CHAR) LEN(  50)
             DCL        VAR(&XSTMF     ) TYPE(*CHAR) LEN(4098)
             DCL        VAR(&XTAGSREQ  ) TYPE(*LGL ) LEN(   1)
             DCL        VAR(&XMSGF     ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&XMSGFLIB  ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&EXICMDEXC ) TYPE(*CHAR) LEN(  20)
             DCL        VAR(&PGMCMDEXC ) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&LPGMCMDEXC) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&EXECOPT   ) TYPE(*CHAR) LEN(  32)

             DCL        VAR(&USRDEFVAR ) TYPE(*CHAR) LEN(2282)
                /* number of items:            BINARY(2)               */
                /* array of item offsets       BINARY(2)               */
                /* for each item:                                      */
                /*    number of sub-items      BINARY(2)               */
                /*    first sub-item           CHAR(10)                */
                /*    second sub-item          CHAR(100)               */

             DCL        VAR(&LIBL      ) TYPE(*CHAR) LEN(2514)
             DCL        VAR(&USELIBL   ) TYPE(*LGL ) LEN(   1)
                /* number of elements:         BINARY(2)               */
                /* current library:            CHAR(10)                */
                /* offset user libraries:      BINARY(2)               */
                /* number of user libraries:   BINARY(2)               */
                /* user libraries:             Array(250) of CHAR(10)  */

             DCL        VAR(&USESRCFILE) TYPE(*CHAR) LEN(  10)
             DCL        VAR(&USESRCLIB ) TYPE(*CHAR) LEN(  10)

/* Fehlerbehandlung     */
             DCL        VAR(&ERROR    )  TYPE(*LGL) +
                          VALUE('0')
             DCL        VAR(&TRUE     )  TYPE(*LGL) +
                          VALUE('1')
             DCL        VAR(&FALSE    )  TYPE(*LGL) +
                          VALUE('0')
             DCL        VAR(&ERRMSGKEY)  TYPE(*CHAR) LEN(4)

             DCL        VAR(&ERRMSGTYP)  TYPE(*CHAR) LEN(10) +
                          VALUE('*DIAG     ')
             DCL        VAR(&ERRNBRTYP)  TYPE(*CHAR) LEN(4) +
                          VALUE(X'00000001')
             DCL        VAR(&ERRPGMMSGQ) TYPE(*CHAR) LEN(10) +
                          VALUE('*PGMBDY')
             DCL        VAR(&ERRSTKCTR)  TYPE(*CHAR) LEN(4) +
                          VALUE(X'00000001')
             DCL        VAR(&ERRCODE  )  TYPE(*CHAR) LEN(4) +
                          VALUE(X'00000000')

/* Sende alle Fehler zur Error Handling Routine */
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(ERROR))

             CHGVAR     VAR(&ERROR    ) VALUE(&FALSE)

 /* -------------------------------------------------------------- */
 /*  Los geht's                                                    */
 /* -------------------------------------------------------------- */

             CHGVAR     VAR(&USESRCFILE) VALUE(%SST(&QUSESRCF  1 10))
             CHGVAR     VAR(&USESRCLIB ) VALUE(%SST(&QUSESRCF 11 10))

 /* - - - - - - - - - - - - - - - - - - */
 /*  Prfen der Steuerdatei STRPRE1     */
 /* - - - - - - - - - - - - - - - - - - */
             CHKOBJ     OBJ(*LIBL/STRPRE1) OBJTYPE(*FILE)
             CHKOBJ     OBJ(*LIBL/STRPRE1) OBJTYPE(*FILE) +
                          MBR(*FIRST)
             CALLPRC    PRC('STRPREPRC3_initialize')

 /* - - - - - - - - - - - - - - - - - - */
 /*  Ermitteln Bibliothek der MsgF      */
 /* - - - - - - - - - - - - - - - - - - */
             QSYS/RTVOBJD OBJ(*LIBL/&XMSGF) OBJTYPE(*MSGF) +
                            RTNLIB(&XMSGFLIB)

 /* - - - - - - - - - - - - - - - - - - */
 /*  Prfen Befehl CHGOBJDA             */
 /* - - - - - - - - - - - - - - - - - - */
             IF         COND(&CHGOBJD *EQ '*YES') THEN(DO)
               CHKOBJ     OBJ(*LIBL/CHGOBJDA) OBJTYPE(*CMD)
               MONMSG     MSGID(CPF9801) EXEC(DO)
                 SNDPGMMSG  MSGID(PRZ0021) MSGF(&XMSGFLIB/&XMSGF) +
                            TOPGMQ(*PRV (*PGMBDY)) MSGTYPE(*DIAG)
                 SNDPGMMSG  MSGID(PRZ0022) MSGF(&XMSGFLIB/&XMSGF) +
                            TOPGMQ(*PRV (*PGMBDY)) MSGTYPE(*ESCAPE)
               ENDDO
             ENDDO

 /* - - - - - - - - - - - - - - - - - - */
 /*  Starten Pre-Prozessor              */
 /* - - - - - - - - - - - - - - - - - - */

             CHGVAR     VAR(&PGMCMDEXC) VALUE(%SST(&EXICMDEXC 1 10))
             CHGVAR     VAR(&LPGMCMDEXC) VALUE(%SST(&EXICMDEXC 11 10))

             CALLPRC    PRC('STRPREPRC2_run') +
                        PARM(&USESRCFILE +
                        &USESRCLIB  +
                        &USESRCMBR  +
                        &USESRCSTMF +
                        &CMD        +
                        &CHGOBJD    +
                        &OBJTYPE    +
                        &OBJSRCFILE +
                        &OBJSRCLIB  +
                        &OBJSRCMBR  +
                        &XLIB       +
                        &XOBJ       +
                        &XTYPECODE  +
                        &XSRCLIB    +
                        &XSRCFILE   +
                        &XSRCMBR    +
                        &XTESTLIB   +
                        &XTESTOBJ   +
                        &XTGTRLS    +
                        &XFRMSRCLIB +
                        &XFRMSRCFIL +
                        &XFRMSRCMBR +
                        &XUSER0     +
                        &XUSER1     +
                        &XUSER2     +
                        &XUSER3     +
                        &XUSER4     +
                        &XUSER5     +
                        &XUSER6     +
                        &XUSER7     +
                        &XUSER8     +
                        &XUSER9     +
                        &XSTMF      +
                        &XTAGSREQ   +
                        &XMSGF      +
                        &XMSGFLIB   +
                        &PGMCMDEXC  +
                        &LPGMCMDEXC +
                        &OPTION     +
                        &LIBL       +
                        &USELIBL    +
                        &USRDEFVAR  +
                        &EXECOPT    )

 /* -------------------------------------------------------------- */
 /*  Programm beenden                                              */
 /* -------------------------------------------------------------- */

ENDE:

/* -------------------------------------------------------------- */
/*    Fehler aufgetreten ?                                        */
/* -------------------------------------------------------------- */

             IF         COND(&ERROR) THEN(DO)
               /* Sende letzte *ESCAPE nochmals   */
               CALL       PGM(QMHRSNEM) PARM(&ERRMSGKEY &ERRCODE)
               MONMSG     MSGID(CPF0000)
             ENDDO

             RETURN

/* ---------------- */
/* Nachrichten      */
/* weiterreichen    */
/* ---------------- */

 ERROR:
             IF         COND(&ERROR) THEN(GOTO CMDLBL(ENDE))
             ELSE       CHGVAR     VAR(&ERROR) VALUE(&TRUE)

/* Verschiebe alle *DIAG Nachrichten zur             */
/* vorangegangenen Programmwarteschlange             */
             CALL       PGM(QMHMOVPM) PARM(&ERRMSGKEY &ERRMSGTYP +
                          &ERRNBRTYP &ERRPGMMSGQ &ERRSTKCTR &ERRCODE)

             GOTO       CMDLBL(ENDE)

             ENDPGM
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC2  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC2"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Services                    "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC2                                         *
      *  Beschreibung  : Start Pre-Processor - Services                     *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 21.11.2000                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  21.05.2002  Th.Raddatz    Removed special characters from src mbr  *
      *                                                                     *
      *  23.01.2007  Th.Raddatz    Added parameter TAGSREQ(...) to command. *
      *                                                                     *
      *  20.02.2009  Th.Raddatz    Added Pre-Compiler tag "WIDTH".          *
      *                            Moved H-Specs into member H_SPEC.        *
      *                                                                     *
      *  09.04.2015  Hildebrandt   Added parameter EXICMDEXC to command.    *
      *                                                                     *
      *  16.05.2015  Th.Raddatz    Added parameter EVENTF to command.       *
      *                                                                     *
      *  18.05.2015  Th.Raddatz    Converted to /free.                      *
      *                                                                     *
      *  18.06.2015  Th.Raddatz    Renamed parameter EVENTF to OPTION.      *
      *                                                                     *
      *  23.07.2015  Th.Raddatz    Fixed problem that the EVFEVENT file     *
      *                            was not created when the creation        *
      *                            command had been executed implicitly.    *
      *                                                                     *
      *  17.12.2015  Th.Raddatz    Fixed executeCmd(), which must           *
      *                            pass 'executeCmd' case sensitive         *
      *                            to getMsgInf();                          *
      *                                                                     *
      *  18.02.2016  Th.Raddatz    Added the >IMPORTANT< parameter tag.     *
      *                                                                     *
      *  10.03.2016  Th.Raddatz    Added message PRZ0028.                   *
      *                                                                     *
      *  20.10.2016  Th.Raddatz    Now calling prepareEventFile() right at  *
      *                            beginning of the program to capture      *
      *                            early STRPREPRC errors.                  *
      *                                                                     *
      *  09.01.2017  Th.Raddatz    Now logging the complete command, when   *
      *                            it could not be executed.                *
      *                                                                     *
      *  17.01.2017  Th.Raddatz    Added option *ADDJOBLOG to append the    *
      *                            job log to event files create by IBM     *
      *                            object creation commands.                *
      *                                                                     *
      *  28.01.2017  Th.Raddatz    Fixed problem, that event file entries   *
      *                            created by an IBM object creation command*
      *                            were lost, when the object name was      *
      *                            overridden in the STRPREPRC section.     *
      *                                                                     *
      *  06.02.2017  Th.Raddatz    Changed interface of exit program.       *
      *                                                                     *
      *  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        *
      *                            command.                                 *
      *                            Added header tags 'LIBL' and 'CURLIB'    *
      *                            to STRPREPRC command.                    *
      *                            Added replacement variables &LL, &CL,    *
      *                            &LX and &CX to STRPREPRC utility.        *
      *                                                                     *
      *  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     *
      *                            2048 to 8192.                            *
      *                                                                     *
      *  18.09.2017  Th.Raddatz    Fixed problem that 'cmdLongLength'       *
      *                            was not properly filled.                 *
      *                                                                     *
      *  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC *
      *                            run the XCRTSQLOBJ command of CMOne      *
      *                            for source members without a STRPREPRC   *
      *                            header.                                  *
      *                            Renamed a couple of procedures for       *
      *                            better names.                            *
      *                                                                     *
      *  21.09.2017  Th.Raddatz    Fixed parameter length of replaceVar().  *
      *                                                                     *
      *  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   *
      *                            command.                                 *
      *                                                                     *
      *  19.11.2017  Th.Raddatz    Fixed bug in restoreLibraryList() to     *
      *                            restore the library list.                *
      *                                                                     *
      *  11.02.2019  Th.Raddatz    Replaced OVRDBF of module STRPREPRC1     *
      *                            with EXTFILE and EXTMBR in STRPREPRC2.   *
      *                            Moved checking of object existence to    *
      *                            STRPREPRC2.                              *
      *                            Moved handling the *DFT special value to *
      *                            STRPREPRC2.                              *
      *                                                                     *
      *  08.05.2019  Th.Raddatz    Added procedure readLine().              *
      *                                                                     *
      *  17.05.2019  Th.Raddatz    Added new tags for monitoring messages   *
      *                            of 'CMD' tags. The new tags are:         *
      *                              'CMD'  CHKOBJ FOO/BAR *FILE;           *
      *                              'MONMSG'                               *
      *                                'MSGID' CPF9801; // Object not found *
      *                              'END-MONMSG'                           *
      *                                                                     *
      *  26.04.2020  Th.Raddatz    Added 'INCLUDE' tag.                     *
      *                                                                     *
      *  23.12.2020  Th.Raddatz    Fixed content auf g_srcFile.* variables. *
      *                            Fixed error message when attempting to   *
      *                            execute an empty command.                *
      *                            Fixed decision when to append the job    *
      *                            log messages to the EVFEVENT file.       *
      *                            Added iRPGUnit test suite STRPREPRCT.    *
      *                                                                     *
      *  04.01.2021  Th.Raddatz    Added messages:                          *
      *                              PRZ0033 - Objekt created               *
      *                              PRZ0034 - Error message ignored ...    *
      *                                                                     *
      *  26.01.2021  Th.Raddatz    Fixed problem that parameter &LX was     *
      *                            not replaced when the library list was   *
      *                            empty.                                   *
      *                                                                     *
      *  18.05.2021  Th.Raddatz    Changed performSetLibraryList(),         *
      *                            performSetCurrentLibrary() and           *
      *                            peformCmd() to call endAbnormal()        *
      *                            without 'event file' parameter.          *
      *                                                                     *
      *  18.05.2021  Th.Raddatz    Changed writeJobLogToEventf() to copy    *
      *                            the event file data from the actual      *
      *                            event file used by the IBM object        *
      *                            creation command.                        *
      *                                                                     *
      *  19.05.2021  Th.Raddatz    Fixed duplicate TIMESTAMP and PROCESSOR  *
      *                            entries after copying an EVENTF member.  *
      *                                                                     *
      *  19.11.2021  Th.Raddatz    Fixed problem that the *LDA was not      *
      *                            properly set. (==> updateLDA())          *
      *                                                                     *
      *  15.03.2022  Th.Raddatz    Added module STRPREPRC5 to prepare the   *
      *                            utility to support stream files.         *
      *                                                                     *
      *  16.03.2022  Th.Raddatz    Renamed PROTO_H to TYPES_H.              *
      *                                                                     *
      *  15.03.2022  Th.Raddatz    Moved files SRCFILE and INCLUDE to       *
      *                            member STRPREPRC5.                       *
      *                            Created prototypes and moved global      *
      *                            fields and constants to TYPES_H.         *
      *                                                                     *
      *  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     *
      *                            to support IFS stream files.             *
      *                                                                     *
      *  21.03.2022  Th.Raddatz    Added include file syntax:               *
      *                              library/file,member                    *
      *                                                                     *
      *  26.03.2022  Th.Raddatz    Added variables &STMF, &FOLDER and &FILE.*
      *                                                                     *
      *  26.03.2022  Th.Raddatz    Added stream file support.               *
      *                                                                     *
      *  12.01.2023  Th.Raddatz    Changed all parameters of run() to const.*
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
     H NOMAIN BNDDIR('QC2LE')
      /COPY QSTRPREPRC,H_SPEC
      /COPY QSTRPREPRC,COPYRIGHT
      * =================================================================== *
      *
      * -------------------------------------------------------------
      *  Verwendete Dateien
      * -------------------------------------------------------------
      *
     FSTRPRE1   IF   E           K DISK    usropn
     F                                     prefix(P1)
     F                                     extfile(g_strpre1.name)
     F                                     extmbr(g_strpre1.member)
     F                                     infds(f2)
      *
     D g_strpre1       ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
     D f2              ds                  qualified
     D  status                11     15S 0
     D  file                  83     92A
     D  lib                   93    102A
     D  rcdLen               125    126B 0
     D  mbr                  129    138A
     D  nbrOfKey             387    388B 0
     D  rcdNbr               397    400B 0
      *
      * -------------------------------------------------------------
      *  Globale Konstanten
      * -------------------------------------------------------------
     D cNone           c                   '*NONE'
      *
      *  Pre-Prozessor Tags
     D cTAG_PREPRZ     c                   '>>PRE-COMPILER<<'
     D cTAG_ENDPREPRZ  c                   '>>END-PRE-COMPILER<<'
      *
     D cTAG_LINK       c                   '>>LINK<<'
     D cTAG_ENDLINK    c                   '>>END-LINK<<'
      *
     D cTAG_COMPILE    c                   '>>COMPILE<<'
     D cTAG_ENDCOMPILE...
     D                 c                   '>>END-COMPILE<<'
      *
     D cTAG_IMPORTANT  c                   '>>IMPORTANT<<'
     D cTAG_ENDIMPORTANT...
     D                 c                   '>>END-IMPORTANT<<'
      *
     D cTAG_MONMSG     c                   '>>MONMSG<<'
     D cTAG_MSGID      c                   '>>MSGID<<'
     D cTAG_ENDMONMSG...
     D                 c                   '>>END-MONMSG<<'
      *
     D cTAG_WIDTH      c                   '>>WIDTH<<'
     D cTAG_CRTCMD     c                   '>>CRTCMD<<'
     D cTAG_PARM       c                   '>>PARM<<'
     D cTAG_EXECUTE    c                   '>>EXECUTE<<'
     D cTAG_CMD        c                   '>>CMD<<'
     D cTAG_INCLUDE    c                   '>>INCLUDE<<'
     D cTAG_LIBL       c                   '>>LIBL<<'
     D cTAG_CURLIB     c                   '>>CURLIB<<'
      *
      *  Pre-Prozessor Modi
     D cMODE_SCAN      c                   '*SCAN'
     D cMODE_PREPRZ    c                   '>>PRE-COMPILER<<'
     D cMODE_ENDPREPRZ...
     D                 c                   '*EXIT'
      *
     D cMODE_LINK      c                   '>>LINK<<'
     D cMODE_ENDLINK   c                   '>>END-LINK<<'
      *
     D cMODE_COMPILE   c                   '>>COMPILE<<'
     D cMODE_ENDCOMPILE...
     D                 c                   '>>END-COMPILE<<'
      *
     D cMODE_IMPORTANT...
     D                 c                   '>>IMPORTANT<<'
     D cMODE_ENDIMPORTANT...
     D                 c                   '>>END-IMPORTANT<<'
      *
     D cMODE_MONMSG    c                   '>>MONMSG<<'
     D cMODE_MSGID     c                   '>>MSGID<<'
     D cMODE_ENDMONMSG...
     D                 c                   '>>END-MONMSG<<'
      *
     D cMODE_WIDTH     c                   '>>WIDTH<<'
     D cMODE_CRTCMD    c                   '>>CRTCMD<<'
     D cMODE_PARM      c                   '>>PARM<<'
     D cMODE_EXECUTE   c                   '>>EXECUTE<<'
     D cMODE_CMD       c                   '>>CMD<<'
     D cMODE_INCLUDE   c                   '>>INCLUDE<<'
     D cMODE_LIBL      c                   '>>LIBL<<'
     D cMODE_CURLIB    c                   '>>CURLIB<<'
      *
      *  Zeilenendemarkierungen
     D cNEW_LINE       c                   ' '
     D cTRUNC_CONT     c                   '+'
     D cCONT           c                   '-'
     D cEND_OF_LINE    c                   ';'
      *
     D cEVENTF_NO      c                   '*NOEVENTF'
     D cEVENTF_YES     c                   '*EVENTF'
      *
     D cJOBLOG_NO      c                   '*NOJOBLOG'
     D cJOBLOG_YES     c                   '*ADDJOBLOG'
      *
     D EXEC_ALL        c                   '*ALL'
     D EXEC_PRECMDS    c                   '*PRECMDS'
     D EXEC_CRTCMD     c                   '*CRTCMD'
     D EXEC_POSTCMDS   c                   '*POSTCMDS'
      *
     D CURLIB_CRTDFT   c                   '*CRTDFT'
      *
     D SINGLE_QUOTE    c                   ''''
     D DOUBLE_QUOTE    c                   '"'
      * -------------------------------------------------------------
      *  Globale Variablen
      * -------------------------------------------------------------
     D g_mode          s                   like(mode_t) dim(10) inz
     D g_modeCnt       s                   like(int4_t) inz
     D g_pgmCmdExc...
     D                 s                   like(pgm_t) inz
     D g_libPgmCmdExc  s                   like(lib_t) inz
     D g_width         s             10i 0 inz(-1)
      *
     D g_eventf        ds                  qualified
     D  isOpen                         n   inz(cFalse)
     D  mbr                          10a   inz
     D  lib                          10a   inz('*N')
      *
     D g_option        ds                  qualified inz
     D  isEventf                       n   inz(cFalse)
     D  doAppendJobLog...
     D                                 n   inz(cFalse)
      *
     D g_enforceJobLogOnError...
     D                 s               n
      *
     D g_execOpt...
     D                 ds                  likeds(execOpt_t)
      *
     D g_srcFile       ds                  qualified
     D  name                         10a
     D  lib                          10a
     D  mbr                          10a
      *
      * Known creation commands and their object name keywords
     D g_crtCmds       ds                  qualified based(g_pCrtCmds) dim(22)
     D  cmd                          10a
     D  reserved_1                    2a
     D  keyword                      10a
     D  reserved_2                    2a
     D  text                         50a
      *
     D g_crtCmdsDta    s             74a   dim(22) ctdata
     D g_pCrtCmds      s               *   inz(%addr(g_crtCmdsDta))
      *
     D g_startUpLiblList...
     D                 ds                  likeds(liblList_t) inz
      *
     D g_prePostCmdsMode...
     D                 s             10i 0
      *
     D MODE_PRECMDS    c                   1
     D MODE_EXECUTE    c                   2
     D MODE_POSTCMDS   c                   3
      *
      /copy QSTRPREPRC,SDS
      *
      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR2
      *
      * -------------------------------------------------------------
      *  Importierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR4
      /copy QSTRPREPRC,PSTRPREPR5
      /copy QSTRPREPRC,PSTRPREPR6
      /copy QSTRPREPRC,QMHRCVPM
      /copy QBASICS1,PBASICS1
      /copy QSTRPREPRC,TYPES_H
      /copy QSTRPREPRC,QCAPCMD
      /copy QSTRPREPRC,QWCRTVCA
      /copy QEVENTF,PEVENTF
      *
      * -------------------------------------------------------------
      *  Prototypen
      * -------------------------------------------------------------
      *
     D readLine...
     D                 pr              n
     D                                     extproc('readLine')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D readPrvLine...
     D                 pr              n
     D                                     extproc('readPrvLine')
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D getSpcValDft...
     D                 pr                  like(path_t)
     D                                     extproc('getValue')
     D  i_actual                           const like(path_t)
     D                                     options(*varsize)
     D  i_default                          const like(path_t)
     D                                     options(*varsize)
      *
     D restoreLibraryList...
     D                 pr
     D                                     extproc('restoreLibraryList')
      *
     D resetLineData...
     D                 pr
     D                                     extproc('resetLineData')
     D  io_lineData                        likeds(lineData_t)
      *
     D replaceVars...
     D                 pr                  like(cmdLong_t)
     D                                     extproc('replaceVars')
     D  i_cmd                              value  like(cmdLong_t)
     D  i_variables                        value  likeds(variables_t)
      *
     D libListToStr...
     D                 pr                  like(cmdLong_t)
     D                                     extproc('libListToStr')
     D  i_libl                             value  likeds(libl_t)
      *
     D performExecute...
     D                 PR
     D                                     extproc('performExecute')
     D  i_cmd                              value  like(cmdLong_t)
     D  i_cmdChgObjD                       value  like(cmdLong_t)
      *
     D performCmd...
     D                 PR
     D                                     extproc('performCmd')
     D  i_cmd                              value  like(cmdLong_t)
      *
     D performInclude...
     D                 PR
     D                                     extproc('performInclude')
     D  i_include                          value  like(cmdLong_t)
      *
     D performIncludeStmf...
     D                 PR
     D                                     extproc('performIncludeStmf')
     D  i_include                          value  like(cmdLong_t)
      *
     D performIncludeMember...
     D                 PR
     D                                     extproc('performIncludeMember')
     D  i_include                          value  like(cmdLong_t)
      *
     D performSetLibraryList...
     D                 pr
     D                                     extproc('performSetLibraryList')
     D  i_libl                             value  like(cmdLong_t)
     D  io_variables                              likeds(variables_t)
      *
     D performSetCurrentLibrary...
     D                 pr
     D                                     extproc('performSetCurrentLibrary')
     D  i_libl                             value  like(cmdLong_t)
     D  io_variables                              likeds(variables_t)
      *
     D loadMonitoredMessageIDs...
     D                 pr                  likeds(monMsgIds_t)
     D                                     extproc('loadMonitoredMessageIDs')
      *
     D isMonitoredMessageID...
     D                 pr              n
     D                                     extproc('isMonitoredMessageID')
     D  i_errMsgId                         value like(msgId_t)
     D  i_monMsgIds                        value likeds(monMsgIds_t)
      *
     D isExecOpt...
     D                 pr              n
     D                                     extproc('isExecOpt')
     D  i_execOpt                          value like(execOpt_t.execOpt)
      *
     D retrieveLibraryList...
     D                 pr                  likeds(liblList_t)
     D                                     extproc('retrieveLibraryList')
      *
     D retrieveEventFile...
     D                 pr                  likeds(qObj_t)
     D                                     extproc('retrieveEventFile')
     D  i_cmd                              value  like(cmdLong_t)
      *
     D addData...
     D                 PR                  like(keyData_t)
     D                                     extproc('addData')
     D  i_tag                              value  like(tag_t)
     D  i_keyData                          value  like(keyData_t)
     D  i_srcDta                           value  like(srcDta_t)
     D  io_continue                               like(continue_t)
      *
     D getWidthValue...
     D                 PR            10i 0
     D                                     extproc('getWidthValue')
     D  i_srcDta                           value  like(srcDta_t)
     D  i_length                     10i 0 value
      *
     D replaceCmdKeyWord...
     D                 PR                         like(cmdLong_t)
     D                                     extproc('replaceCmdKeyWord')
     D  i_cmd                              value  like(cmdLong_t)
     D  i_keyData                          value  like(keyData_t)
      *
     D getSrcDataLength...
     D                 PR                         like(int4_t)
     D                                     extproc('getSrcDataLength')
      *
     D getStartPos...
     D                 PR                         like(int4_t)
     D                                     extproc('getStartPos')
     D  i_tag                              value  like(tag_t)
     D  i_srcDta                                  like(srcDta_t)
      *
     D isTag...
     D                 PR                         like(bool_t)
     D                                     extproc('isTag')
     D  i_srcDta                           value  like(srcDta_t)
     D  o_tag                                     like(tag_t)
      *
     D retrieveTag...
     D                 PR                         like(bool_t)
     D                                     extproc('retrieveTag')
     D  i_tagToTest                        value  like(tag_t)
     D  i_srcDta                           value  like(srcDta_t)
     D  o_tag                                     like(tag_t)
      *
     D tagToMode...
     D                 PR                         like(mode_t)
     D                                     extproc('tagToMode')
     D  i_tag                              value  like(tag_t)
      *
     D checkMode...
     D                 PR              n
     D                                     extproc('checkMode')
     D  i_mode                             value  like(mode_t)
     D  i_newMode                          value  like(mode_t)
      *
     D pushMode...
     D                 PR
     D                                     extproc('pushMode')
     D  i_mode                             value  like(mode_t)
      *
     D popMode...
     D                 PR                         like(mode_t)
     D                                     extproc('popMode')
      *
     D validateCmd...
     D                 PR                         like(bool_t)
     D                                     extproc('validateCmd')
     D  i_cmd                              value  like(cmdLong_t)
      *
     D executeCmd...
     D                 PR                         like(bool_t)
     D                                     extproc('executeCmd')
     D  i_monErr                           value  like(bool_t)
     D  i_cmd                              value  like(cmdLong_t)
     D  o_errMsgId                                like(msgId_t) options(*nopass)
      *
     D appendToJobLog...
     D                 PR
     D                                     extproc('appendToJobLog')
     D  i_message                          value  like(cmdLong_t)
      *
     D formatCmd...
     D                 PR                         like(cmdLong_t)
     D                                     extproc('formatCmd')
     D  i_cmd                              value  like(cmdLong_t)
      *
     D endOK...
     D                 PR
     D                                     extproc('endOK')
     D  i_qEventf                          const  likeds(qObj_t)
     D                                     options(*nopass)
      *
     D writeJobLogToEventf...
     D                 PR
     D                                     extproc('writeJobLogToEventf')
     D  i_qEventf                          const  likeds(qObj_t)
     D  i_isAbnEnd                     n   const
      *
     D replaceVar...
     D                 PR
     D                                     extproc('replaceVar')
     D  i_var                        10a   value
     D  i_value                            value  like(cmdLong_t)
     D  io_string                                 like(cmdLong_t)
      *
      *
      *  Register Call Stack Entry Termination User Exit Procedure (CEERTX)
     d CEERTX...
     d                 pr                         extproc('CEERTX')
     d  i_procPtr                      *   const  procptr
     d  i_rtxToken                     *   const  options(*omit)
     d  o_fc                         12a          options(*omit)
      *
     d abnormalEndHandler...
     d                 pr                         extproc('abnormalEndHandler')
     d  i_rtxToken                     *   const
      *
      *  Unregister Call Stack Entry Termination User Exit Procedure (CEEUTX)
     d CEEUTX...
     d                 pr                         extproc('CEEUTX')
     d  i_procPtr                      *   const  procptr
     d  o_fc                         12a          options(*omit)
      *
      * =============================================================
      *  Ausfhren Pre-Prozessor
      * =============================================================
     P run...
     P                 B                   export
     D                 PI
     D  i_useSrcFile                       const  like(file_t)
     D  i_useSrcLib                        const  like(lib_t)
     D  i_useSrcMbr                        const  like(mbr_t)
     D  i_useSrcStmf                       const  like(path_t)
     D  i_cmd                              const  like(cmd_t)
     D  i_chgObjD                          const  like(chgObjD_t)
     D  i_objType                          const  like(objType_t)
     D  i_objSrcFile                       const  like(file_t)
     D  i_objSrcLib                        const  like(lib_t)
     D  i_objSrcMbr                        const  like(mbr_t)
     D  i_lib                              const  like(lib_t)
     D  i_obj                              const  like(obj_t)
     D  i_typeCode                         const  like(typeCode_t)
     D  i_srcLib                           const  like(lib_t)
     D  i_srcFile                          const  like(file_t)
     D  i_srcMbr                           const  like(mbr_t)
     D  i_testLib                          const  like(lib_t)
     D  i_testObj                          const  like(obj_t)
     D  i_tgtRls                           const  like(tgtRls_t)
     D  i_frmSrcLib                        const  like(lib_t)
     D  i_frmSrcFile                       const  like(file_t)
     D  i_frmSrcMbr                        const  like(mbr_t)
     D  i_user0                            const  like(userParm_t)
     D  i_user1                            const  like(userParm_t)
     D  i_user2                            const  like(userParm_t)
     D  i_user3                            const  like(userParm_t)
     D  i_user4                            const  like(userParm_t)
     D  i_user5                            const  like(userParm_t)
     D  i_user6                            const  like(userParm_t)
     D  i_user7                            const  like(userParm_t)
     D  i_user8                            const  like(userParm_t)
     D  i_user9                            const  like(userParm_t)
     D  i_stmf                             const  like(path_t)
     D  i_tagsReq                          const  like(bool_t)
     D  i_msgFile                          const  like(msg_t.file)
     D  i_msgFileLib                       const  like(msg_t.lib)
     D  i_pgmCmdExc...
     D                                     const  like(pgm_t)
     D  i_libPgmCmdExc...
     D                                     const  like(lib_t)
     D  i_option                           const  likeds(option_t)
     D  i_libl                             const  likeds(inpLibList_t)
     D  i_useLibl                          const  like(bool_t)
     D  i_usrDefVars                       const  likeds(inpUsrDefVars_t)
     D  i_execOpt                          const  likeds(execOpt_t)
      *
      *  Nachrichten
      *  ... Falsche Reihenfolge im Betriebsmodus.
      /COPY QSTRPREPRC,PRZ0001
      *  ... Fehler beim ffnen der Steuerdatei &2/&1, Teildatei &3.
      /COPY QSTRPREPRC,PRZ0013
      *  ... Auszufhrender Befehl fehlt. Weitere Verarbeitung nich . . .
      /COPY QSTRPREPRC,PRZ0014
      *  ... Keine Pre-Compiler Anweisungen in Quellendatei &2/&1, Teildatei &3 gefunden.
      /COPY QSTRPREPRC,PRZ0024
      *  ... EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konnte nicht geffnet
      /COPY QSTRPREPRC,PRZ0025
      *  ... EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      /COPY QSTRPREPRC,PRZ0026
      *  ... Erstellungsbefehl nicht gefunden in Quellendatei &2/&1, Teildatei &3.
      /COPY QSTRPREPRC,PRZ0028
      *  ... Die Option *ADDJOBLOG ist nur in Verbindung mit *EVENTF zulssig.
      /COPY QSTRPREPRC,PRZ0030
      *  ... Erstellungsbefehl nicht gefunden in Quellendatei &1
      /COPY QSTRPREPRC,PRZ0044
      *  ... Erstellungsbefehl nicht gefunden in Quellendatei &2
      /COPY QSTRPREPRC,PRZ0045
      *
      *  Arbeitsfelder
     D i               S             10i 0 inz
     D srcDta          S                   like(ds_srcFile_t.srcDta)
     D tag             S                   like(tag_t) inz
     D mode            S                   like(mode_t) inz
     D newMode         S                   like(mode_t) inz
     D cmdString       S                   like(cmdLong_t) inz
     D execCmdImplizit...
     D                 S                   like(bool_t)  inz(cTrue)
     D foundPrePrcTags...
     D                 S                   like(bool_t)  inz(cFalse)
     D cmdChgObjD      S                   like(cmdLong_t)
     D cmd             S                   like(cmdLong_t)
     D isCmdMissingError...
     D                 S               n   inz(cFalse)
     D isMonMsgAllowed...
     D                 S               n   inz(cFalse)
      *
     D lineData        ds                  likeds(lineData_t) inz
     D variables       ds                  likeds(variables_t) inz
     D inpUsrDefVar    ds                  likeds(inpUsrDefVar_t)
     D objSrcFile      s                   like(i_objSrcFile)
     D objSrcLib       s                   like(i_objSrcLib)
     D objSrcMbr       s                   like(i_objSrcMbr)
      /free

         ceertx(%paddr('abnormalEndHandler'): *omit: *omit);

         p_setAppMsgFile(i_msgFile: i_msgFileLib);

         g_startUpLiblList = retrieveLibraryList();

         g_prePostCmdsMode = MODE_PRECMDS;

         // Initialisieren globaler Variablen
         reset g_mode;
         reset g_modeCnt;
         reset g_pgmCmdExc;
         reset g_libPgmCmdExc;
         reset g_eventf;
         reset g_option;
         reset g_execOpt;
         g_pgmCmdExc = i_pgmCmdExc;
         g_libPgmCmdExc = i_libPgmCmdExc;

         g_srcFile.name = getSpcValDft(i_srcFile: i_useSrcFile);
         g_srcFile.lib = getSpcValDft(i_srcLib: i_useSrcLib);
         g_srcFile.mbr = getSpcValDft(i_srcMbr: i_useSrcMbr);

         g_enforceJobLogOnError = *on;

         if (%parms() >= 36 and i_option.numE > 0);
            for i = 1 to i_option.numE;
               select;
               when (i_option.option(i) = cEVENTF_YES);
                  g_option.isEventf = cTrue;
                  g_eventf.mbr = i_obj;
                  g_eventf.lib = i_lib;
               when (i_option.option(i) = cEVENTF_NO);
                  g_option.isEventf = cFalse;
               when (i_option.option(i) = cJOBLOG_YES);
                  g_option.doAppendJobLog = cTrue;
               when (i_option.option(i) = cJOBLOG_NO);
                  g_option.doAppendJobLog = cFalse;
               endsl;
            endfor;
         endif;

         if (g_option.doAppendJobLog and not g_option.isEventf);
            clear PRZ0030;
            sendMsg(f_newMsg('PRZ0030': PRZ0030: cTYPE_DIAG));
            endAbnormal();
         endif;

         if (g_option.isEventf);
            monitor;
               enableEventFile();
               clearEventFile(g_eventf.mbr: g_eventf.lib);
               prepareEventFile();
            on-error;
               clear PRZ0026;
               sendMsg(f_newMsg('PRZ0026': PRZ0026: cTYPE_DIAG));
               endAbnormal();
            endmon;
         endif;

         g_execOpt = i_execOpt;

         clear variables;
         variables.lib = i_lib;
         variables.obj =
            getSpcValDft(getSpcValDft(i_obj: i_srcMbr): i_useSrcMbr);
         variables.typeCode = i_typeCode;
         variables.srcLib = getSpcValDft(i_srcLib: i_useSrcLib);
         variables.srcFile = getSpcValDft(i_srcFile: i_useSrcFile);
         variables.srcMbr = getSpcValDft(i_srcMbr: i_useSrcMbr);
         variables.testLib = i_testLib;
         variables.testObj = i_testObj;
         variables.tgtRls = i_tgtRls;
         variables.frmSrcLib = i_frmSrcLib;
         variables.frmSrcFile = i_frmSrcFile;
         variables.frmSrcMbr = i_frmSrcMbr;
         variables.user0 = i_user0;
         variables.user1 = i_user1;
         variables.user2 = i_user2;
         variables.user3 = i_user3;
         variables.user4 = i_user4;
         variables.user5 = i_user5;
         variables.user6 = i_user6;
         variables.user7 = i_user7;
         variables.user8 = i_user8;
         variables.user9 = i_user9;
         variables.stmf = getSpcValDft(i_stmf: i_useSrcStmf);
         variables.folder = Path_getFolder(variables.stmf);
         variables.file = Path_getFile(variables.stmf);
         variables.libl = i_libl;
         variables.useLibl = i_useLibl;

         variables.libl.curLib = i_libl.curLib;
         variables.libl.usrLibl.numE = 0;
         for i = 1 to i_libl.numUsrLiblE;
            variables.libl.usrLibl.numE += 1;
            variables.libl.usrLibl.name(variables.libl.usrLibl.numE) =
               i_libl.lib(i);
         endfor;

         variables.prvLibl = i_libl.curLib;
         variables.prvLibl.usrLibl.numE = 0;

         for i = 1 to i_usrDefVars.numElem;
            // pInpUsrDefVar = %addr(i_usrDefVars) + i_usrDefVars.offsItems(i);
            inpUsrDefVar = %subst(i_usrDefVars
                                  : i_usrDefVars.offsItems(i) + 1
                                  : %len(inpUsrDefVar));
            variables.usrDefVars.numE += 1;
            variables.usrDefVars.var(variables.usrDefVars.numE).name =
               inpUsrDefVar.name;
            variables.usrDefVars.var(variables.usrDefVars.numE).value =
               inpUsrDefVar.value;
         endfor;

         if (i_chgObjD = '*YES');

            objSrcFile = getSpcValDft(i_objSrcFile: i_srcFile);
            objSrcLib = getSpcValDft(i_objSrcLib: i_srcLib);
            objSrcMbr = getSpcValDft(i_objSrcMbr: i_srcMbr);

            cmdChgObjD =
               'CHGOBJDA +
                   OBJ(' + %trim(i_lib) + '/' + %trim(i_obj) + ') +
                   OBJTYPE(' + %trim(i_objType) + ') +
                   SRCF(' + %trim(objSrcFile) + ') +
                   SRCFLIB(' + %trim(objSrcLib) + ') +
                   SRCMBR(' + %trim(objSrcMbr) + ') +
                   SRCDATE(' + %trim('*SRCMBR') + ') +
                   SRCTIME(' + %trim('*SRCMBR') + ')';
         else;
            cmdChgObjD = '';
         endif;

         if (i_useSrcStmf <> '');
           // Open IFS source file
           SourceStreamFile_open(i_useSrcStmf);
         else;
           // Open QSYS source file
           SourceFile_open(i_useSrcLib: i_useSrcFile: i_useSrcMbr);
         endif;

         // Open Pre-Compiler tags file
         g_strpre1.name = %trim(sds.pgmLib) + '/' + 'STRPRE1';
         g_strpre1.member = '*FIRST';

         open(E) STRPRE1;
         if (%error());
            clear PRZ0013;
            PRZ00131 = 'STRPRE1';
            PRZ00132 = '*LIBL';
            PRZ00133 = '*FIRST';
            sendMsg(f_newMsg('PRZ0013': PRZ0013: cTYPE_DIAG));
            endAbnormal();
         endif;

         // Entfernen der "ffnen" Nachrichten
         p_rmvPgmMsg(cMsg_Rmv_All);

         // Formatieren Befehl
         cmd = formatCmd(%trim(i_cmd));

         // Initialisieren Modus
         mode = cMODE_SCAN;
         pushMode(mode);

         // Initialisieren "Ausfhren Befehl implizit"
         // Der Erstellungsbefehl wird ohne Pre-Prozessor
         // Abschnitt ausgefhrt
         execCmdImplizit = cTrue;

         // Initialisieren "STRPREPRC" Anweisungen gefunden
         foundPrePrcTags = cFalse;

         // Initialisieren Fortsetzungszeile
         resetLineData(lineData);

         dow readLine(srcDta);

            // Wenn sich in der Programmzeile ein Tag befindet, ...
            if (isTag(srcDta: tag));

               // ermitteln neue Betriebsart
               newMode = tagToMode(tag);

               // prfen Betriebsartenwechsel
               if (not checkMode(mode: newMode));
                  endAbnormal();
               endif;

               if (newMode = cMODE_MONMSG);
                  if (not isMonMsgAllowed);
                     clear PRZ0001;
                     PRZ00011 = mode;
                     PRZ00012 = newMode;
                     sendMsg(f_newMsg('PRZ0001': PRZ0001: cTYPE_DIAG));
                     endAbnormal();
                  endif;
               endif;

               if (newMode = cMODE_CMD);
                  isMonMsgAllowed = cTrue;
               else;
                  isMonMsgAllowed = cFalse;
               endif;

               // umschalten Betriebsartenwechsel
               mode = newMode;

               // Betriebsart merken
               pushMode(mode);
            else;
               // ... Standardverarbeitung
            endif;

            // Anfang der Pre-Prozessoranweisungen
            if (mode = cMODE_PREPRZ);
               foundPrePrcTags = cTrue;
               execCmdImplizit = cFalse;
               iter;
            endif;

            // Ende der Pre-Prozessoranweisungen
            if (mode = cMODE_ENDPREPRZ);
               mode = popMode;
               mode = popMode;
               leave;
            endif;

            // Ende der Link Parameter
            if (mode = cMODE_ENDLINK);
               mode = popMode;
               mode = popMode;
               iter;
            endif;

            // Ende der Compile Parameter
            if (mode = cMODE_ENDCOMPILE);
               mode = popMode();
               mode = popMode();
               iter;
            endif;

            // Ende der Important Parameter
            if (mode = cMODE_ENDIMPORTANT);
               mode = popMode();
               mode = popMode();
               iter;
            endif;

            // Ende MONMSG
            if (mode = cMODE_ENDMONMSG);
               mode = popMode();
               mode = popMode();
               iter;
            endif;

            // Breite der Quellenangaben >>WIDTH<<
            if (mode  = cMODE_WIDTH);
               g_width = getWidthValue(srcDta: getSrcDataLength());
               mode = popMode();
            endif;

            // Erstellungsbefehl   >>CRTCMD<<
            if (mode  = cMODE_CRTCMD);
               // eintragen Erstellungsbefehl
               lineData.keyData = addData(cTAG_CRTCMD
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue);

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  if (cmd = '');
                     cmd = lineData.keyData;
                  endif;
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // MsgID-Anweisung     >>MSGID<<
            if (mode = cMODE_MSGID);
               // Ignore >>MSGID<< tags not related to >>CMD<<
               mode = popMode();
               iter;
            endif;

            // Parm-Anweisung      >>PARM<<
            if (mode = cMODE_PARM);
               if (cmd = '');
                  clear PRZ0014;
                  sendMsg(f_newMsg('PRZ0014': PRZ0014: cTYPE_DIAG));
                  endAbnormal();
               endif;

               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_PARM
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue );

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  cmd = replaceCmdKeyWord(cmd: lineData.keyData);
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // Execute-Anweisung   >>EXECUTE<<
            if (mode = cMODE_EXECUTE);
               performExecute(replaceVars(cmd: variables): cmdChgObjD);
               mode = popMode();
               iter;
            endif;

            // Befehl-Anweisung    >>CMD<<
            if (mode = cMODE_CMD);
               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_CMD
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue);

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  performCmd(replaceVars(lineData.keyData: variables));
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // Befehl-Anweisung    >>INCLUDE<<
            if (mode = cMODE_INCLUDE);
               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_INCLUDE
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue);

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  performInclude(lineData.keyData);
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // Befehl-Anweisung    >>LIBL<<
            if (mode = cMODE_LIBL);
               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_LIBL
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue);

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  cmdString = 'CHGLIBL LIBL(' + lineData.keyData + ')';
                  performSetLibraryList(
                     replaceVars(cmdString: variables): variables);
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // Befehl-Anweisung    >>CURLIB<<
            if (mode = cMODE_CURLIB);
               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_CURLIB
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue);

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  cmdString = 'CHGLIBL CURLIB(' + lineData.keyData + ')';
                  performSetCurrentLibrary(
                     replaceVars(cmdString: variables): variables);
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

         enddo;

         if (SourceStreamFile_isOpen());
           SourceStreamFile_close();
         endif;

         if (SourceFile_isOpen());
           SourceFile_close();
         endif;

         if (%open(STRPRE1));
           close STRPRE1;
         endif;

         if (IncludeStreamFile_isOpen);
           IncludeStreamFile_close();
         endif;

         if (IncludeFile_isOpen);
           IncludeFile_close();
         endif;

         // Ausfhren >>EXECUTE<< implizit, weil
         // kein Pre-Prozessor Abschnitt gefunden werden konnte
         isCmdMissingError = cFalse;
         if (execCmdImplizit = cTrue);
            if (cmd = '');
               isCmdMissingError = cTrue;
            else;

               if (i_useLibl);
                  // Set library list
                  if (variables.libl.usrLibl.numE >= 1);
                     cmdString = 'CHGLIBL LIBL(&LL)';
                     performSetLibraryList(
                        replaceVars(cmdString: variables): variables);
                  endif;

                  // Set current library
                  if (variables.libl.curLib <> cNone);
                     cmdString = 'CHGLIBL CURLIB(&CL)';
                     performSetCurrentLibrary(
                        replaceVars(cmdString: variables): variables);
                  endif;
               endif;

               // Execute command
               cmdString = cmd;
               performExecute(replaceVars(cmdString: variables): cmdChgObjD);
            endif;
         endif;

         // Close event file, if left open.
         if (g_eventf.isOpen);
            closeEventFile();
            g_eventf.isOpen = cFalse;
         endif;

         // Restore library list to startup value
         restoreLibraryList();

         ceeutx(%paddr('abnormalEndHandler'): *omit);

         // Senden Abbruchnachricht, weil keine STRPREPRC Anweisungen
         // gefunden worden sind
         if (not foundPrePrcTags and i_tagsReq);
           if (SourceStreamFile_isOpen());
             clear PRZ0045;
             PRZ00451 = SourceStreamFile_getFolder();
             PRZ00452 = SourceStreamFile_getFile();
             sendMsg(f_newMsg('PRZ0045': PRZ0045: cTYPE_ESCAPE));
           else;
             clear PRZ0024;
             PRZ00241 = SourceFile_getFile();
             PRZ00242 = SourceFile_getLibrary();
             PRZ00243 = SourceFile_getMember();
             sendMsg(f_newMsg('PRZ0024': PRZ0024: cTYPE_ESCAPE));
           endif;
         endif;

         if (isCmdMissingError);
           if (SourceStreamFile_isOpen());
             clear PRZ0044;
             PRZ00441 = SourceStreamFile_getFolder();
             PRZ00442 = SourceStreamFile_getFile();
             sendMsg(f_newMsg('PRZ0044': PRZ0044: cTYPE_ESCAPE));
           else;
             clear PRZ0028;
             PRZ00281 = SourceFile_getFile();
             PRZ00282 = SourceFile_getLibrary();
             PRZ00283 = SourceFile_getMember();
             sendMsg(f_newMsg('PRZ0028': PRZ0028: cTYPE_ESCAPE));
           endif;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reads a line from the source input file.
      * =============================================================
     P readLine...
     P                 b
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D*ds_srcFile      ds                  likeds(ds_srcFile_t) inz
      /free

         select;
         when (IncludeStreamFile_isOpen());
            if (not IncludeStreamFile_readLine(io_srcDta));
               IncludeStreamFile_close();
               // Read next line of source file
               return readLine(io_srcDta);
            endif;
         when (IncludeFile_isOpen());
            if (not IncludeFile_readLine(io_srcDta));
               IncludeFile_close();
               // Read next line of source file
               return readLine(io_srcDta);
            endif;
         when (SourceStreamFile_isOpen());
            if (not SourceStreamFile_readLine(io_srcDta));
               io_srcDta = '';
               return cFalse;
            endif;
         when (SourceFile_isOpen());
            if (not SourceFile_readLine(io_srcDta));
               io_srcDta = '';
               return cFalse;
            endif;
         other;
            // TODO: send escape message
            return cFalse;
         endsl;

         io_srcDta = %subst(io_srcDta: 1: getSrcDataLength());

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Read the previous line from the source input file.
      * =============================================================
     P readPrvLine...
     P                 b
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         select;
         when (IncludeStreamFile_isOpen());
            if (not IncludeStreamFile_readPrvLine(io_srcDta));
               IncludeStreamFile_close();
               // Read previous line of source file
               return readPrvLine(io_srcDta);
            endif;
         when (IncludeFile_isOpen());
            if (not IncludeFile_readPrvLine(io_srcDta));
               IncludeFile_close();
               // Read previous line of source file
               return readPrvLine(io_srcDta);
            endif;
         when (SourceStreamFile_isOpen());
            if (not SourceStreamFile_readLine(io_srcDta));
               io_srcDta = '';
               return cFalse;
            endif;
         when (SourceFile_isOpen());
            if (not SourceFile_readLine(io_srcDta));
               io_srcDta = '';
               return cFalse;
            endif;
         other;
            // TODO: send escape message
            return cFalse;
         endsl;

         io_srcDta = %subst(io_srcDta: 1: getSrcDataLength());

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Abnormal end handler.
      * =============================================================
     P abnormalEndHandler...
     P                 b
     D                 pi
     D  i_pRtxToken                    *   const
      /free

         // Restore library list to startup value
         restoreLibraryList();

      /end-free
     P                 E

      * =============================================================
      *  Returns the actual value or the default value if the
      *  actual value is specified as *DFT.
      * =============================================================
     P getSpcValDft...
     P                 b
     D                 pi                  like(path_t)
     D  i_actual                           const like(path_t)
     D                                     options(*varsize)
     D  i_default                          const like(path_t)
     D                                     options(*varsize)
      /free

         if (i_actual = '*DFT');
            return i_default;
         endif;

         return i_actual;

      /end-free
     P                 E

      * =============================================================
      *  Restores the library list to what it was at the
      *  start of the STRPREPRC utility.
      * =============================================================
     P restoreLibraryList...
     P                 b
     D                 pi
      *
     D currentLiblList...
     D                 ds                  likeds(liblList_t) inz
     D liblStr         s                   like(cmdLong_t)
     D cmdString       s                   like(cmdLong_t) inz
      /free

         currentLiblList = retrieveLibraryList();
         if (g_startUpLiblList <> currentLiblList);
            liblStr = libListToStr(g_startUpLiblList.usrLibl);
            cmdString = 'CHGLIBL +
                         LIBL(' + liblStr + ') +
                         CURLIB(' + g_startUpLiblList.curLib + ')';
            executeCmd(cFalse: cmdString);
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reset.
      * =============================================================
     P resetLineData...
     P                 b
     D                 pi
     D  io_lineData                        likeds(lineData_t)
      /free

         io_lineData.continue  = cNEW_LINE;
         io_lineData.keyData   = '';

      /end-free
     P                 E

      * =============================================================
      *  Replaces the replacement variables.
      * =============================================================
     P replaceVars...
     P                 b
     D                 pi                  like(cmdLong_t)
     D  i_cmd                              value  like(cmdLong_t)
     D  i_variables                        value  likeds(variables_t)
      *
     D cmdString       s                   like(i_cmd)
     D posOfVar        s                   like(int4_t) inz
     D i               s              5i 0
      *
      *  ... Fehlender Wert fr Variable an Position &1 des auszufhrenden Befehls.
      /COPY QSTRPREPRC,PRZ0023
      /free

         cmdString = i_cmd;

         // --------------------------------
         //  Replace user-defined variables
         // --------------------------------

         for i = 1 to i_variables.usrDefVars.numE;
            replaceVar(i_variables.usrDefVars.var(i).name
                       : i_variables.usrDefVars.var(i).value: cmdString);
         endfor;

         // --------------------------------
         //  Replace STRPREPRC variables
         // --------------------------------

         // Ersetzen Lib         (&LI)
         if (i_variables.lib <> cNone);
            replaceVar('&LI': i_variables.lib: cmdString);
         endif;

         // Ersetzen Objekt      (&OB)
         if (i_variables.obj <> cNone);
            replaceVar('&OB': i_variables.obj: cmdString);
         endif;

         // Ersetzen Type Code   (&TY)
         if (i_variables.typeCode <> cNone);
            replaceVar('&TY': i_variables.typeCode: cmdString);
         endif;

         // Ersetzen Source Lib  (&SL)
         if (i_variables.srcLib <> cNone);
            replaceVar('&SL': i_variables.srcLib: cmdString);
         endif;

         // Ersetzen Source File (&SF)
         if (i_variables.srcFile <> cNone);
            replaceVar('&SF': i_variables.srcFile: cmdString);
         endif;

         // Ersetzen Source Mbr  (&SM)
         if (i_variables.srcMbr <> cNone);
            replaceVar('&SM': i_variables.srcMbr: cmdString);
         endif;

         // Ersetzen Test Lib    (&TL)
         if (i_variables.testLib <> cNone);
            replaceVar('&TL': i_variables.testLib: cmdString);
         endif;

         // Ersetzen Test Object (&TO)
         if (i_variables.testObj <> cNone);
            replaceVar('&TO': i_variables.testObj: cmdString);
         endif;

         // Ersetzen Taget Rel.  (&TO)
         if (i_variables.tgtRls <> cNone);
            replaceVar('&TR': i_variables.tgtRls: cmdString);
         endif;

         // Ersetzen From Src Lib  (&SL)
         if (i_variables.frmSrcLib <> cNone);
            replaceVar('&FL': i_variables.frmSrcLib: cmdString);
         endif;

         // Ersetzen From Src File (&SF)
         if (i_variables.frmSrcFile <> cNone);
            replaceVar('&FF': i_variables.frmSrcFile: cmdString);
         endif;

         // Ersetzen From Src Mbr  (&SM)
         if (i_variables.frmSrcMbr <> cNone);
            replaceVar('&FM': i_variables.frmSrcMbr: cmdString);
         endif;

         // Ersetzen Parameter  (&USER0)
         if (i_variables.user0 <> cNone);
            replaceVar('&U0': i_variables.user0: cmdString);
         endif;

         // Ersetzen Parameter  (&USER1)
         if (i_variables.user1 <> cNone);
            replaceVar('&U1': i_variables.user1: cmdString);
         endif;

         // Ersetzen Parameter  (&USER2)
         if (i_variables.user2 <> cNone);
            replaceVar('&U2': i_variables.user2: cmdString);
         endif;

         // Ersetzen Parameter  (&USER3)
         if (i_variables.user3 <> cNone);
            replaceVar('&U3': i_variables.user3: cmdString);
         endif;

         // Ersetzen Parameter  (&USER4)
         if (i_variables.user4 <> cNone);
            replaceVar('&U4': i_variables.user4: cmdString);
         endif;

         // Ersetzen Parameter  (&USER5)
         if (i_variables.user5 <> cNone);
            replaceVar('&U5': i_variables.user5: cmdString);
         endif;

         // Ersetzen Parameter  (&USER6)
         if (i_variables.user6 <> cNone);
            replaceVar('&U6': i_variables.user6: cmdString);
         endif;

         // Ersetzen Parameter  (&USER7)
         if (i_variables.user7 <> cNone);
            replaceVar('&U7': i_variables.user7: cmdString);
         endif;

         // Ersetzen Parameter  (&USER8)
         if (i_variables.user8 <> cNone);
            replaceVar('&U8': i_variables.user8: cmdString);
         endif;

         // Ersetzen Parameter  (&USER9)
         if (i_variables.user9 <> cNone);
            replaceVar('&U9': i_variables.user9: cmdString);
         endif;

         // Ersetzen Parameter  (&LL)
         if (i_variables.libl.usrLibl.numE >= 1);
            replaceVar(
               '&LL': libListToStr(i_variables.libl.usrLibl): cmdString);
         endif;

         // Ersetzen Parameter  (&LX)
         if (i_variables.prvLibl.usrLibl.numE >= 1);
            replaceVar(
               '&LX': libListToStr(i_variables.prvLibl.usrLibl): cmdString);
         else;
            replaceVar(
               '&LX': '*NONE': cmdString);
         endif;

         // Ersetzen Parameter Sonderwert  (*LX)
       //  if (i_variables.prvLibl.usrLibl.numE >= 1);
       //     replaceVar(
       //        '*LX': libListToStr(i_variables.prvLibl.usrLibl): cmdString);
       //  endif;

         // Ersetzen Parameter  (&CL)
         if (i_variables.libl.curLib <> cNone);
            replaceVar('&CL': i_variables.libl.curLib: cmdString);
         endif;

         // Ersetzen Parameter  (&CX)
         if (i_variables.prvLibl.curLib <> '');
            replaceVar('&CX': i_variables.prvLibl.curLib: cmdString);
         endif;

         // Ersetzen Parameter Sonderwert  (*CX)
       //  if (i_variables.prvLibl.curLib <> '');
       //     replaceVar('*CX': i_variables.prvLibl.curLib: cmdString);
       //  endif;

         // Ersetzen Parameter  (&STMF)
         if (i_variables.stmf <> '');
            replaceVar('&STMF': i_variables.stmf: cmdString);
         endif;

         // Ersetzen Parameter  (&FOLDER)
         if (i_variables.folder <> '');
            replaceVar('&FOLDER': i_variables.folder: cmdString);
         endif;

         // Ersetzen Parameter  (&FILE)
         if (i_variables.file <> '');
            replaceVar('&FILE': i_variables.file: cmdString);
         endif;

         // Prfen, ob alle Variablen ersetzt worden sind
         posOfVar = %scan('&': cmdString);

         if (posOfVar <> 0);
            clear PRZ0023;
            PRZ00231 = posOfVar;
            PRZ00232 = cmdString;
            sendMsg(f_newMsg('PRZ0023': PRZ0023: cTYPE_DIAG));
            appendToJobLog(i_cmd);
            endAbnormal();
         endif;

         return cmdString;

      /end-free
     P                 E

      * =============================================================
      *  Converts a library list to string.
      * =============================================================
     P libListToStr...
     P                 b
     D                 pi                  like(cmdLong_t)
     D  i_libl                             value  likeds(libl_t)
      *
     D i               s             10i 0
     D liblStr         s                   like(cmdLong_t)
      /free

         for i = 1 to i_libl.numE;
            if (liblStr <> '');
               liblStr = liblStr + ' ';
            endif;
            liblStr = liblStr + %trim(i_libl.name(i));
         endfor;

         return liblStr;

      /end-free
     p                 e

      * =============================================================
      *  Execute >>EXECUTE<< tag. (Execute main creation command)
      * =============================================================
     P performExecute...
     P                 b
     D                 pi
     D  i_cmd                              value  like(cmdLong_t)
     D  i_cmdChgObjD                       value  like(cmdLong_t)
      *
     D msg             ds                  likeds(msg_t)
      *
      *  ... EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      /COPY QSTRPREPRC,PRZ0026
      *  ... Objekt erstellt.
      /COPY QSTRPREPRC,PRZ0033
      /free

         if (not isExecOpt(EXEC_CRTCMD));
            g_prePostCmdsMode = MODE_POSTCMDS;
            return;
         endif;

         g_prePostCmdsMode = MODE_EXECUTE;

         g_enforceJobLogOnError = *off;

         if (g_option.isEventf);
            monitor;
               prepareEventFile();
            on-error;
               clear PRZ0026;
               sendMsg(f_newMsg('PRZ0026': PRZ0026: cTYPE_DIAG));
               endAbnormal();
            endmon;
         endif;

         if (not validateCmd(i_cmd));
            endAbnormal();
         endif;

         if (not executeCmd(cTrue: i_cmd));
            if (%scan(cEVENTF_YES: i_cmd) > 0);
               endAbnormal(retrieveEventFile(i_cmd)); // EVENT file created by IBM command
            else;
               endAbnormal();
            endif;
         else;
            clear PRZ0033;
            msg = f_newMsg('PRZ0033': PRZ0033: cMsg_Info);
            f_sndPgmMsg(msg: cMsg_Same: cMsg_ToMyself);

            // Write event file, but change messages greater or
            // equal to "error" to "warning".
            if (%scan(cEVENTF_YES: i_cmd) > 0);
               endOK(retrieveEventFile(i_cmd)); // EVENT file created by IBM command
            else;
               endOK();
            endif;
         endif;

         if (i_cmdChgObjD <> '');
            performCmd(i_cmdChgObjD);
         endif;

         g_enforceJobLogOnError = *on;
         g_prePostCmdsMode = MODE_POSTCMDS;

      /end-free
     p                 e

      * =============================================================
      *  Execute >>CMD<< tag (Pre and post commands)
      * =============================================================
     P performCmd...
     P                 b
     D                 pi
     D  i_cmd                              value  like(cmdLong_t)
      *
     D errMsgId        s                   like(msgId_t)
     D monMsgIds       ds                  likeds(monMsgIds_t)
     D msg             ds                  likeds(msg_t)
      *
      *  ... EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      /COPY QSTRPREPRC,PRZ0026
      *  ... Fehlernachricht &1 wurde aufgrund von MONMSG ignoriert.
      /COPY QSTRPREPRC,PRZ0034
      /free

         if (g_prePostCmdsMode = MODE_PRECMDS and
             not isExecOpt(EXEC_PRECMDS));
            return;
         endif;

         if (g_prePostCmdsMode = MODE_POSTCMDS and
             not isExecOpt(EXEC_POSTCMDS));
            return;
         endif;

         if (g_option.isEventf);
            monitor;
               prepareEventFile();
            on-error;
               clear PRZ0026;
               sendMsg(f_newMsg('PRZ0026': PRZ0026: cTYPE_DIAG));
               endAbnormal();
            endmon;
         endif;

         if (not validateCmd(i_cmd));
            endAbnormal();
         endif;

         if (not executeCmd(cTrue: i_cmd: errMsgId));
            monMsgIds = loadMonitoredMessageIDs();
            if (isMonitoredMessageId(errMsgId: monMsgIds));
               clear PRZ0034;
               PRZ00341 = errMsgId;
               msg = f_newMsg('PRZ0034': PRZ0034: cMsg_Info);
               f_sndPgmMsg(msg: cMsg_Same: cMsg_ToMyself);
            else;
               endAbnormal();
            endif;
         endif;

      /end-free
     P                 e

      * =============================================================
      *  Execute >>INCLUDE<< tag (Read /include)
      * =============================================================
     P performInclude...
     P                 b
     D                 pi
     D  i_include                          value  like(cmdLong_t)
      *
     D include         s                   like(cmdLong_t)
     D stmf            s                   like(path_t)
     D st_stat         ds                  likeds(st_stat_t)
     D rc              s             10i 0
     D isStmf          s               n
      /free

         include = %trim(i_include);

         isStmf = cFalse;

         select;
         when (f_startsWith(SINGLE_QUOTE: include));
           stmf = f_rmvQuotes(include: SINGLE_QUOTE);
           isStmf = cTrue;
         when (f_startsWith(DOUBLE_QUOTE: include));
           stmf = f_rmvQuotes(include: DOUBLE_QUOTE);
           isStmf = cTrue;
         other;
           rc = stat(include: %addr(st_stat));
           if (rc = 0);
             stmf = include;
             isStmf = cTrue;
           endif;
         endsl;

         if (isStmf);
           performIncludeStmf(stmf);
         else;
           performIncludeMember(include);
         endif;

      /end-free
     P                 e

      * =============================================================
      *  Perform iclude for a given source stream file.
      * =============================================================
     P performIncludeStmf...
     P                 b
     D                 pi
     D  i_include                          value  like(cmdLong_t)
      *
     D stmf            s                   like(path_t)
      /free

         stmf = f_rmvQuotes(i_include: SINGLE_QUOTE);

         IncludeStreamFile_open(stmf);

      /end-free
     P                 e

      * =============================================================
      *  Perform iclude for a given source member.
      * =============================================================
     P performIncludeMember...
     P                 b
     D                 pi
     D  i_include                          value  like(cmdLong_t)
      *
     D s               s             10i 0
     D e               s             10i 0
     D library         s             10a   varying
     D file            s             10a   varying
     D member          s             10a   varying
      *
      *  ... Ungltige INCLUDE Marke in Zeile &1 gefunden.
      /COPY QSTRPREPRC,PRZ0031
      /free

         s = 1;
         e = %scan('/': i_include);
         if (e - s > 0);
            library = %subst(i_include: 1: e - s);
            s = e + 1;
         else;
            library = '*LIBL';
            s = 1;
         endif;

         if (s < %len(i_include));
            e = %scan(' ': i_include: s);
            if (e = 0);
               e = %scan(',': i_include: s);
            endif;
            if (e - s > 0);
               file = %subst(i_include: s: e - s);
               s = e + 1;
            endif;
         endif;

         if (file = '');
            clear PRZ0031;
            PRZ00311 = SourceFile_getLineNbr();
            sendMsg(f_newMsg('PRZ0031': PRZ0031: cTYPE_DIAG));
            endAbnormal();
         endif;

         if (s < %len(i_include));
            s = %check(' ': i_include: s); // Skip spaces
            e = %len(%trimr(i_include)) + 1;
            if (e - s > 0);
               member = %subst(i_include: s: e - s);
            endif;
         endif;

         if (member = '');
            clear PRZ0031;
            PRZ00311 = SourceFile_getLineNbr();
            sendMsg(f_newMsg('PRZ0031': PRZ0031: cTYPE_DIAG));
            endAbnormal();
         endif;

         IncludeFile_open(library: file: member);

      /end-free
     P                 e

      * =============================================================
      *  Loads monitored message IDs from >>MONMSG<< section.
      * =============================================================
     P loadMonitoredMessageIDs...
     P                 b
     D                 pi                  likeds(monMsgIds_t)
      *
     D monMsgIds       ds                  likeds(monMsgIds_t)
      *
     D isFirstLine     s               n   inz(cTrue)
     D count           s             10i 0
     D srcDta          S                   like(ds_srcFile_t.srcDta)
     D tag             S                   like(tag_t) inz
     D mode            s                   like(mode_t) inz
     D newMode         s                   like(mode_t) inz
     D lineData        ds                  likeds(lineData_t) inz
      /free

         count = 0;
         isFirstLine = cTrue;

         mode = cMODE_CMD;

         dow readLine(srcDta);

            // Wenn sich in der Programmzeile ein Tag befindet, ...
            if (isTag(srcDta: tag));

               if (isFirstLine and tag <> cTAG_MONMSG);
                  readPrvLine(srcDta);
                  leave;
               else;
                  isFirstLine = cFalse;
               endif;

               // ermitteln neue Betriebsart
               newMode = tagToMode(tag);

               // prfen Betriebsartenwechsel
               if (not checkMode(mode: newMode));
                  endAbnormal();
               endif;

               // umschalten Betriebsartenwechsel
               mode = newMode;

               // Betriebsart merken
               pushMode(mode);
            endif;

            // MsgID-Anweisung     >>MSGID<<
            if (mode = cMODE_MSGID);

               // zufgen Schlsselwortdaten
               lineData.keyData = addData(cTAG_MSGID
                                          : lineData.keyData
                                          : srcDta
                                          : lineData.continue );

               // prfen auf Fortsetzungszeile
               if (lineData.continue <> cEND_OF_LINE);
                  iter;
               else;
                  count += 1;
                  monMsgIds.item(count) = lineData.keyData;
                  resetLineData(lineData);
                  mode = popMode();
                  iter;
               endif;
            endif;

            // Ende MONMSG
            if (mode = cMODE_ENDMONMSG);
               mode = popMode();
               mode = popMode();
               leave;
            endif;

         enddo;

         return monMsgIds;

      /end-free
     P                 e

      * =============================================================
      *  Checks whether a given message ID is covered by a list
      *  of monitored message IDs.
      * =============================================================
     P isMonitoredMessageID...
     P                 b
     D                 pi              n
     D  i_errMsgId                         value like(msgId_t)
     D  i_monMsgIds                        value likeds(monMsgIds_t)
      *
     D i               s             10i 0
     D msgId           s                   like(msgId_t)
     D cmpLen          s             10i 0
      /free

         if (i_errMsgId = '');
            return cTrue;
         endif;

         i = 1;

         dow (i <= %elem(i_monMsgIds.item) and i_monMsgIds.item(i) <> '');
            msgId = i_monMsgIds.item(i);

            select;
            when (%subst(msgId: 4: 4) = '0000');
               cmpLen = 3;
            when (%subst(msgId: 6: 2) = '00');
               cmpLen = 5;
            other;
               cmpLen = 7;
            endsl;

            if (%subst(i_errMsgId: 1: cmpLen) = %subst(msgId: 1: cmpLen));
               return cTrue;
            endif;

            i += 1;
         enddo;

         return cFalse;

      /end-free
     P                 e

      * =============================================================
      *  Checks whether a given message ID is covered by a list
      *  of monitored message IDs.
      * =============================================================
     P isExecOpt...
     P                 b
     D                 pi              n
     D  i_execOpt                          value like(execOpt_t.execOpt)
      *
     D i               s             10i 0
      /free

         for i = 1 to g_execOpt.numElem;
            if (g_execOpt.execOpt(i) = EXEC_ALL or
                g_execOpt.execOpt(i) = i_execOpt);
              return cTrue;
            endif;
         endfor;

         return cFalse;

      /end-free
     P                 e

      * =============================================================
      *  Execute >>LIBL<< tag (set library list)
      * =============================================================
     P performSetLibraryList...
     P                 b
     D                 pi
     D  i_cmd                              value  like(cmdLong_t)
     D  io_variables                              likeds(variables_t)
      *
     D liblList        ds                  likeds(liblList_t) inz
      *
      *  ... EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      /COPY QSTRPREPRC,PRZ0026
      /free

         if (g_option.isEventf);
            monitor;
               prepareEventFile();
            on-error;
               clear PRZ0026;
               sendMsg(f_newMsg('PRZ0026': PRZ0026: cTYPE_DIAG));
               endAbnormal();
            endmon;
         endif;

         liblList = retrieveLibraryList();
         io_variables.prvLibl.usrLibl = liblList.usrLibl;

         // Change library list
         if (not validateCmd(i_cmd));
            endAbnormal();
         endif;

         if (not executeCmd(cTrue: i_cmd));
            endAbnormal();
         endif;

      /end-free
     P                 e

      * =============================================================
      *  Execute >>CURLIB<< tag (set current library)
      * =============================================================
     P performSetCurrentLibrary...
     P                 b
     D                 pi
     D  i_cmd                              value  like(cmdLong_t)
     D  io_variables                              likeds(variables_t)
      *
     D liblList        ds                  likeds(liblList_t) inz
      *
      *  ... EVFEVENT Datei konnte nicht zur Ausgabe vorbereitet werden.
      /COPY QSTRPREPRC,PRZ0026
      /free

         if (g_option.isEventf);
            monitor;
               prepareEventFile();
            on-error;
               clear PRZ0026;
               sendMsg(f_newMsg('PRZ0026': PRZ0026: cTYPE_DIAG));
               endAbnormal();
            endmon;
         endif;

         liblList = retrieveLibraryList();
         io_variables.prvLibl.curLib = liblList.curLib;

         // Change library list
         if (not validateCmd(i_cmd));
            endAbnormal();
         endif;

         if (not executeCmd(cTrue: i_cmd));
            endAbnormal();
         endif;

      /end-free
     P                 e

      * =============================================================
      *  Retrieves the current library list of the job.
      * =============================================================
     P retrieveLibraryList...
     P                 b
     D                 pi                  likeds(liblList_t)
      *
      *  Return value
     D libl            ds                  likeds(liblList_t) inz
      *
     D rtvc0200        ds                  likeds(rtvc0200_t) based(pRtvc0200)
     D rcvVar          s           4096a   inz
     D errCode         ds                  likeds(errCode_t) inz
     D i               s             10i 0
     D keysToRtn       s             10i 0 dim(2)
     D pOffs           s               *   inz
     D curLib          s                   like(QWCRTVCA_libName_t)
     D                                     based(pCurLib)
     D usrLibl         s                   like(QWCRTVCA_libName_t)
     D                                     dim(DIM_LIBLIST) based(pUsrLibl)
      /free


         pRtvc0200 = %addr(rcvVar);

         keysToRtn(1) = KEY_CURRENT_LIBRARY;
         keysToRtn(2) = KEY_USER_LIBRARIES;
         errCode = f_newApiErrCode(cFalse); // send *ESCAPE message on error
         QWCRTVCA(rcvVar: %size(rcvVar): 'RTVC0200'
                  : %elem(keysToRtn): keysToRtn: errCode);

         pOffs = %addr(rtvc0200) + %size(rtvc0200);

         if (rtvc0200.numSysLiblE >= 1);
            pOffs = pOffs + (rtvc0200.numSysLiblE * %size(QWCRTVCA_libName_t));
         endif;

         if (rtvc0200.numPrdLiblE >= 1);
            pOffs = pOffs + (rtvc0200.numPrdLiblE * %size(QWCRTVCA_libName_t));
         endif;

         if (rtvc0200.curLibExists >= CURLIB_EXISTS);
            pCurLib = pOffs;
            libl.curLib = curLib;
            pOffs = pOffs + %size(QWCRTVCA_libName_t);
         else;
            libl.curLib = CURLIB_CRTDFT;
         endif;

         if (rtvc0200.numUsrLiblE >= 1);
            pUsrLibl = pOffs;
            for i = 1 to rtvc0200.numUsrLiblE;
               libl.usrLibl.numE += 1;
               libl.usrLibl.name(libl.usrLibl.numE) = usrLibl(i);
            endfor;
            pOffs = pOffs + (rtvc0200.numUsrLiblE * %size(QWCRTVCA_libName_t));
         else;
            clear libl.usrLibl;
         endif;

         return libl;

      /end-free
     P                 e

      * =============================================================
      *  Retrieve the name of the event file (library & member)
      *  from the object creation command.
      * =============================================================
     P retrieveEventFile...
     P                 b
     D                 pi                  likeds(qObj_t)
     D  i_cmd                              value  like(cmdLong_t)
      *
      *  Return value
     D qObj            ds                  likeds(qObj_t) inz
      *
     D cmd             s                   like(i_cmd)
     D clCmd           s             10a   varying
     D clKwd           s             10a   varying
     D i               s             10i 0
     D s               s             10i 0
     D e               s             10i 0
     D parmValue       s             30a   varying
      *
     D SPACE           c                   ' '
      /free

         clear qObj;

         cmd = formatCmd(i_cmd);
         i = %scan(SPACE: cmd);
         if (i <= 1);
            return qObj;
         endif;

         // Find command in command table and
         // get the keyword that specifies the
         // qualified object name.
         clKwd = '';
         clCmd = %subst(cmd: 1: i-1);
         for i = 1 to %elem(g_crtCmds);
            if (g_crtCmds(i).cmd = clCmd);
               clKwd = %trim(g_crtCmds(i).keyword);
               leave;
            endif;
         endfor;

         // If not found in command table or not present in
         // the command, retrieve the first keyword, assuming
         // that it is the keyword that specifies the
         // qualified object name.
         if (clKwd = '' or %scan(' ' + clKwd + '(': cmd) = 0);
            i = %scan(SPACE: cmd: 1); // Skip CL command
            s = %check(SPACE: cmd: i); // Skip spaces = Start of 1. keyword
            e = %scan('(': cmd: s);   // Start of keyword value
            if ((e - s) <= 0);
               return qObj;
            endif;
            clKwd = %subst(cmd: s: e-s);
         endif;

         s = %scan(clKwd + '(': cmd); // Start of object parameter
         e = %scan(')': cmd); // End of object parameter

         s = s + %len(clKwd) + 1;
         if ((e - s) <= 0);
            return qObj;
         endif;

         parmValue = %trim(%subst(cmd: s: e-s));
         s = %scan('/': parmValue);
         if ((s - 1) > 0);
            if (s >= %len(parmValue));
               return qObj;
            endif;
            qObj.lib = %subst(parmValue: 1: s-1);
            qObj.name = %subst(parmValue: s+1);
         else;
            qObj.lib = '*LIBL';
            qObj.name = parmValue;
         endif;

         return qObj;

      /end-free
     P                 e

      * =============================================================
      *  Zusammenbauen Schlsselwortdaten
      * =============================================================
     P addData...
     P                 b
     D                 pi                  like(keyData_t)
     D  i_tag                              value  like(tag_t)
     D  i_keyData                          value  like(keyData_t)
     D  i_srcDta                           value  like(srcDta_t)
     D  io_continue                               like(continue_t)
      *
      *  Funktionswert
     D keyData         s                   like(keyData_t) inz
      *
      *  Nachrichten
      *  ... Ungltiges Fortsetzungszeichen &1 in Zeile &2 gefunden.
      /COPY QSTRPREPRC,PRZ0005
      *  ... Das Zeilenendekennzeichen konnte nicht gefunden werden.
      /COPY QSTRPREPRC,PRZ0008
      *  ... Unbekannter Wert "&1" fr Fortsetzungszeichen gefunden.
      /COPY QSTRPREPRC,PRZ0009
      *
      *  Arbeitsfelder
     D start           s                   like(int4_t) inz
     D                                     static
     D dataLen         s                   like(int4_t) inz
     D x               s                   like(int4_t) inz
      /free

         // ermitteln der getStartPosition
         if (io_continue = cNEW_LINE);
            start = getStartPos(i_tag: i_srcDta);
         endif;

         // ermitteln Zeilenende
         x = %len(%trimr(i_srcDta));
         dow (x >= start);

            // ... Zeilenende
            if (%subst(i_srcDta: x: %len(io_continue)) = cEND_OF_LINE);
               leave;
            endif;

            // ... '+' Zeichen
            if (%subst(i_srcDta: x: %len(io_continue)) = cTRUNC_CONT);
               leave;
            endif;

            // ... '-' Zeichen
            if (%subst(i_srcDta: x: %len(io_continue)) = cCONT);
               leave;
            endif;

            x = x - 1;
         enddo;

         // ermitteln Datenlnge Fortsetzungszeichen
         dataLen = x - start;

         // prfen Datenlnge
         if (dataLen < 0);
            clear PRZ0008;

            if (SourceStreamFile_isOpen());
               PRZ00081 = SourceStreamFile_getLineNbr();
            else;
               PRZ00081 = SourceFile_getLineNbr();
            endif;

            sendMsg(f_newMsg('PRZ0008': PRZ0008: cTYPE_DIAG));
            endAbnormal();
         endif;

         // Wenn eine Datenlnge ermittelt werden konnte, ...
         if (dataLen > 0);
            // ... dann
            //     zufgen neue Daten zu Schlsselwort bei ...
            select;
            when (io_continue = cNEW_LINE);     // ... neue Zeile
               keyData = %subst(i_srcDta: start: dataLen);

            when (io_continue = cTRUNC_CONT);   // ... Fortsetzungszeichen '+'
               keyData = i_keyData + %triml(%subst(i_srcDta: start:dataLen));

            when (io_continue = cCONT);         // ... Fortsetzungszeichen '-'
               keyData = i_keyData + %subst(i_srcDta: start: dataLen);

            other;
               // ... dieser Fall kann nicht eintreten
               //     weil ber die Prfung von dataLen sichergestellt ist,
               //     dass immer ein gltiges Fortsetzungszeichen vorhanden ist.
               //     Dennoch:
               clear PRZ0009;
               PRZ00091 = io_continue;
               sendMsg(f_newMsg('PRZ0009': PRZ0009: cTYPE_DIAG));
               endAbnormal();
            endsl;

         else;
            // ... dann
            //     beibehalten der bisherigen Daten
            keyData = i_keyData;
         endif;

         // ermitteln neues Fortsetzungszeichen
         io_continue = %subst(i_srcdta: x: %len(io_continue));

         // prfen neues Fortsetzungszeichen
         if (io_continue <> cEND_OF_LINE) and
            (io_continue <> cTRUNC_CONT) and
            (io_continue <> cCONT);

            clear PRZ0005;
            PRZ00051 = io_continue;

            if (SourceStreamFile_isOpen());
               PRZ00052 = SourceStreamFile_getLineNbr();
            else;
               PRZ00052 = SourceFile_getLineNbr();
            endif;

            sendMsg(f_newMsg('PRZ0005': PRZ0005: cTYPE_DIAG));
            endAbnormal();
         endif;

         return keyData;

      /end-free
     P                 e
      *
      * =============================================================
      *  Ermitteln der Breite der Quellenangaben am >>WIDTH<< Tag
      * =============================================================
     P getWidthValue...
     P                 b
     D                 pi            10i 0
     D  i_srcDta                           value  like(srcDta_t)
     D  i_length                     10i 0 value
      *
      *  Funktionswert
     D width           s             10i 0 inz(80)
      *
     D cWIDTH_LEN      c                   %len(width)
     D cWIDTH_DECPOS   c                   %decpos(width)
      *
      *  Arbeitsfelder
     D x               s                   like(int4_t) inz
     D tmpWidth        s             16a   varying inz
      *
      *  Konstanten
     D cNUMBERS        c                   '0123456789'
      /free

         // ermitteln der getStartPosition
         x = %scan(cTAG_WIDTH: %subst(i_srcDta: 1: i_length));
         if (x = 0);
            return width;
         endif;

         // berspringen von Leerzeichen zwischen >>WIDTH<< und der angegebenen Breite
         x = x + %len(cTAG_WIDTH);
         x = %check(' ': %subst(i_srcDta: 1: i_length): x);

         dow (x >= 1 and x < i_length and
              %check(cNUMBERS: %subst(i_srcDta:x:1)) = 0);
            tmpWidth = tmpWidth + %subst(i_srcDta:x:1);
            x = x + 1;
         enddo;

         if (tmpWidth <> '');
            width = %dec(tmpWidth: cWIDTH_LEN: cWIDTH_DECPOS);
         endif;

         return width;

      /end-free
     P                 e
      *
      * =============================================================
      *  Ersetzen/Hinzufgen Schlsselwort
      * =============================================================
     P replaceCmdKeyWord...
     P                 b
     D                 pi                         like(cmdLong_t)
     D  i_cmd                              value  like(cmdLong_t)
     D  i_keyData                          value  like(keyData_t)
      *
      *  Funktionswert
     D cmd             s                   like(cmdLong_t) inz
      *
      *  Nachrichten
      *  ... Das Ende des Schlsselwortes &1 konnte nicht gefunden werden.
      /COPY QSTRPREPRC,PRZ0006
      *
      *  Arbeitsfelder
     D startPos        s                   like(int4_t) inz
     D dataLen         s                   like(int4_t) inz
     D x               s                   like(int4_t) inz
     D y               s                   like(int4_t) inz
     D token           s             11a   varying inz
     D cmdDtaLen       s                   like(int4_t) inz
     D numBracket      s                   like(int4_t) inz
      /free

         // ermitteln Befehlstoken
         x = %scan('(': i_keyData: 1);
         token = %subst(i_keyData: 1: x);

         // ermitteln Ende des Befehlswortes ...
         // ... berspringen fhrende Leerzeichen
         x = %check(' ': i_cmd);
         // ... suchen Leerzeichen nach Befehlswort
         x = %scan(' ': i_cmd: x);

         // suchen Token im vorhandenen Befehlstring
         dow (x > 0 and startPos < %len(i_cmd));
            startPos = %scan(token: i_cmd: x);
            if ((startPos > 1)   and
                (%subst(i_cmd: startPos - 1: 1) <> ' '));
               x =  startPos + %len(token);
               iter;
            else;
               leave;
            endif;
         enddo;

         // Wenn das Token gefunden werden konnte, ...
         if (startPos <> 0);
            // ... dann
            //     ermitteln Lnge des Schlsselwortes ...
            x = startPos + %len(token);
            numBracket = 1;
            dataLen = %len(token);
            cmdDtaLen = %len(i_cmd);

            for y = x to cmdDtaLen;

               DataLen = DataLen + 1;

               // ... '('
               if (%subst(i_cmd: y: 1) = '(');
                  numBracket = numBracket + 1;
               endif;

               // ... ')'
               if (%subst(i_cmd: y: 1) = ')');
                  numBracket = numBracket - 1;

                  // ... gefunden
                  if (numBracket <= 0);
                     leave;
                  else;
                     iter;
                  endif;
               endif;

            endfor;

            // Wenn der Klammernzhler <> 0 ist, ...
            if (numBracket <> 0);
                // ... dann
                //     konnte das Ende des Schlsselwortes
                //     nicht gefunden werden
                clear PRZ0006;
                PRZ00061 = %subst(token: 1: %len(token) - 1);
                sendMsg(f_newMsg('PRZ0006': PRZ0006: cTYPE_DIAG));
                endAbnormal();
            endif;

            // austauschen Schlsselwort
            cmd = %replace(i_keyData: i_cmd: startPos: dataLen);

         else;
            // ... sonst
            //     anfgen Schlsselwort
            cmd = %trim(i_cmd) + ' ' + i_keyData;
         endif;

         return cmd;

      /end-free
     P                 e
      *
      * =============================================================
      *  Ermitteln Lnge von srcDta
      * =============================================================
     P getSrcDataLength...
     P                 b
     D                 pi                         like(int4_t)
      *
      *  Funktionswert
     D srcDtaLen       s                   like(int4_t) inz
      /free

         // if (%open(INCLUDE));
         if (IncludeFile_isOpen());
            if (IncludeStreamFile_isOpen());
               srcDtaLen = IncludeStreamFile_getDtaLength();
            else;
               srcDtaLen = IncludeFile_getDtaLength();
            endif;
         else;
            if (SourceStreamFile_isOpen());
               srcDtaLen = SourceStreamFile_getDtaLength();
            else;
               srcDtaLen = SourceFile_getDtaLength();
            endif;
         endif;

         if (g_width <> -1 and g_width < srcDtaLen);
            srcDtaLen = g_width;
         endif;

         return srcDtaLen;

      /end-free
     P                 E
      *
      * =============================================================
      *  Ermitteln der getStartPosition
      * =============================================================
     P getStartPos...
     P                 b
     D                 pi                         like(int4_t)
     D  i_tag                              value  like(tag_t)
     D  i_srcDta                                  like(srcDta_t)
      *
      *  Funktionswert
     D pos             s                   like(int4_t) inz
      *
      *  Arbeitsfelder
      /free

         pos = %scan(%trim(i_tag): i_srcDta: 1);
         if (pos > 0);
            pos = pos + %len(%trim(i_tag));
            pos = %check(' ': i_srcDta: pos);
         endif;

         return pos;

      /end-free
     P                 e
      *
      * =============================================================
      *  Prfen auf gltiges Tag
      * =============================================================
     P isTag...
     P                 b
     D                 pi                         like(bool_t)
     D  i_srcDta                           value  like(srcDta_t)
     D  o_tag                                     like(tag_t)
      *
      *  Funktionswert
     D isTag           s                   like(bool_t) inz(cFalse)
      /free

         isTag = cFalse;

         dou '1';
            // Anfang Pre-Compiler
            if (retrieveTag(cTAG_PREPRZ: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ende Pre-Compiler
            if (retrieveTag(cTAG_ENDPREPRZ: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Anfang Link
            if (retrieveTag(cTAG_LINK: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ende Link
            if (retrieveTag(cTAG_ENDLINK: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Anfang Compiler
            if (retrieveTag(cTAG_COMPILE: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ende Compiler
            if (retrieveTag(cTAG_ENDCOMPILE: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Anfang Important
            if (retrieveTag(cTAG_IMPORTANT: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ende Important
            if (retrieveTag(cTAG_ENDIMPORTANT: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Anfang MONMSG
            if (retrieveTag(cTAG_MONMSG: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ende MONMSG
            if (retrieveTag(cTAG_ENDMONMSG: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Breite der Quellenangaben
            if (retrieveTag(cTAG_WIDTH: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Erstellungsbefehl
            if (retrieveTag(cTAG_CRTCMD: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Parameter
            if (retrieveTag(cTAG_PARM: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Message ID
            if (retrieveTag(cTAG_MSGID: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ausfhren "Hauptbefehl"
            if (retrieveTag(cTAG_EXECUTE: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ausfhren Pre-/Post-Anweisung
            if (retrieveTag(cTAG_CMD: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Einlesen /include
            if (retrieveTag(cTAG_INCLUDE: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ausfhren Anweisung zum Setzen einer Bibliotheksliste
            if (retrieveTag(cTAG_LIBL: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;

            // Ausfhren Anweisung zum Setzen der aktuellen Bibliothek
            if (retrieveTag(cTAG_CURLIB: i_srcDta: o_tag));
               isTag = cTrue;
               leave;
            endif;
         enddo;

         return isTag;

      /end-free
     P                 e
      *
      * =============================================================
      *  Ermitteln Tag aus Quellendaten
      * =============================================================
     P retrieveTag...
     P                 b
     D                 pi                         like(bool_t)
     D  i_tagToTest                        value  like(tag_t)
     D  i_srcDta                           value  like(srcDta_t)
     D  o_tag                                     like(tag_t)
      *
      *  Funktionswert
     D isTag           s                   like(bool_t) inz(cFalse)
      *
      *  Arbeitsfelder
     D startPos        s                   like(int4_t) inz
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      /free

         startPos = %scan(%trim(i_tagToTest): i_srcDta);
         if (startPos > 0);
            o_tag = i_tagToTest;
            isTag = cTrue;
         else;
            o_tag = '';
            isTag = cFalse;
         endif;

         return isTag;

      /end-free
     P                 e
      *
      * =============================================================
      *  Umsetzen Tag in Betriebsmodus
      * =============================================================
     P tagToMode...
     P                 b
     D                 pi                         like(mode_t)
     D  i_tag                              value  like(tag_t)
      *
      *  Funktionswert
     D mode            s                   like(mode_t) inz
      *
      *  Nachrichten
      *  ... Das Ende des Schlsselwortes &1 konnte nicht gefunden werden.
      /COPY QSTRPREPRC,PRZ0010
      /free

         select;
            // Anfang Pre-Compiler
            when (i_tag = cTAG_PREPRZ);
               mode = cMODE_PREPRZ;

            // Ende Pre-Compiler
            when (i_tag = cTAG_ENDPREPRZ);
               mode = cMODE_ENDPREPRZ;

            // Anfang Link
            when (i_tag = cTAG_LINK);
               mode = cMODE_LINK;

            // Ende Link
            when (i_tag = cTAG_ENDLINK);
               mode = cMODE_ENDLINK;

            // Anfang Compile
            when (i_tag = cTAG_COMPILE);
               mode = cMODE_COMPILE;

            // Ende Compile
            when (i_tag = cTAG_ENDCOMPILE);
               mode = cMODE_ENDCOMPILE;

            // Anfang Important
            when (i_tag = cTAG_IMPORTANT);
               mode = cMODE_IMPORTANT;

            // Ende Important
            when (i_tag = cTAG_ENDIMPORTANT);
               mode = cMODE_ENDIMPORTANT;

            // Anfang MONMSG
            when (i_tag = cTAG_MONMSG);
               mode = cMODE_MONMSG;

            // Ende MONMSG
            when (i_tag = cTAG_ENDMONMSG);
               mode = cMODE_ENDMONMSG;

            // Maximale Breite der Quellendaten
            when (i_tag = cTAG_WIDTH);
               mode = cMODE_WIDTH;

            // Erstellungsbefehl
            when (i_tag = cTAG_CRTCMD);
               mode = cMODE_CRTCMD;

            // Parameter
            when (i_tag = cTAG_PARM);
               mode = cMODE_PARM;

            // Message ID
            when (i_tag = cTAG_MSGID);
               mode = cMODE_MSGID;

            // Ausfhren "Hauptbefehl"
         when (i_tag = cTAG_EXECUTE);
            mode  = cMODE_EXECUTE;

            // Ausfhren Pre-/Post-Befehle
         when (i_tag = cTAG_CMD);
            mode  = cMODE_CMD;

            // Einlesen /include
         when (i_tag = cTAG_INCLUDE);
            mode  = cMODE_INCLUDE;

            // Ausfhren Anweisung zum Setzen einer Bibliotheksliste
         when (i_tag = cTAG_LIBL);
            mode  = cMODE_LIBL;

            // Ausfhren Anweisung zum Setzen der aktuellen Bibliothek
         when (i_tag = cTAG_CURLIB);
            mode  = cMODE_CURLIB;

         other;
            // ... darf nicht vorkommen, da alle Tags, die erkannt werden
            //     auch umgesetzt werden mssen.
            //     Dennoch:
            clear PRZ0010;
            PRZ00101 = i_tag;
            sendMsg(f_newMsg('PRZ0010': PRZ0010: cTYPE_DIAG));
            endAbnormal();
         endsl;

         return mode;

      /end-free
     P                 e
      *
      * =============================================================
      *  ndern Betriebsmodus
      * =============================================================
     P checkMode...
     P                 b
     D                 pi              n
     D  i_mode                             value  like(mode_t)
     D  i_newMode                          value  like(mode_t)
      *
      *  Access key of file STRPRE1 (Pre-compiler modes)
     D P1Key2          ds                  qualified
     D  MODE                               like(P1MODE)
     D  NEWMODE                            like(P1NEWMODE)
      *
      *  Nachrichten
      *  ... Falsche Reihenfolge im Betriebsmodus.
      /COPY QSTRPREPRC,PRZ0001
      *  ... Verschachtelte INCLUDE Marke in Zeile &4 der Datei &2/&1, Teildatei &3 gefunden.
      /COPY QSTRPREPRC,PRZ0032
      /free

         P1KEY2.MODE = i_mode;
         P1KEY2.NEWMODE = i_newMode;
         setll %kds(P1Key2) FSTRPRE1;

         dow '1';
            reade %kds(P1Key2) FSTRPRE1;
            if (%eof());
               clear PRZ0001;
               PRZ00011 = i_mode;
               PRZ00012 = i_newMode;
               sendMsg(f_newMsg('PRZ0001': PRZ0001: cTYPE_DIAG));
               return cFalse;
            else;
               leave;
            endif;
         enddo;

         // if (i_newMode = cMODE_INCLUDE and %open(INCLUDE));
         if (i_newMode = cMODE_INCLUDE and IncludeFile_isOpen());
            clear PRZ0032;
            PRZ00321 = IncludeFile_getFile();
            PRZ00322 = IncludeFile_getLibrary();
            PRZ00323 = IncludeFile_getMember();
            PRZ00324 = IncludeFile_getLineNbr();
            sendMsg(f_newMsg('PRZ0032': PRZ0032: cTYPE_DIAG));
            return cFalse;
         endif;

         return cTrue;

      /end-free
     P                 e
      *
      * =============================================================
      *  Senden Escape Nachricht
      * =============================================================
     P sendMsg...
     P                 b                   export
     D                 pi
     D  i_msg                              value  likeds(msg_t)
      /free

        f_sndPgmMsg(i_msg: cMsg_Prv: cMsg_ToCtlBdy);

      /end-free
     P                 e
      *
      * =============================================================
      *  Mode auf Stack
      * =============================================================
     P pushMode...
     P                 b
      *
     D pushMode...
     D                 pi
     D  i_mode                             value  like(mode_t)
      /free

         g_modeCnt = g_modeCnt + 1;
         g_mode(g_modeCnt) = i_mode;

      /end-free
     P                 e
      *
      * =============================================================
      *  Mode vom Stack
      * =============================================================
     P popMode...
     P                 b
      *
     D popMode...
     D                 pi                         like(mode_t)
      /free

         g_mode(g_modeCnt) = '';
         g_modeCnt = g_modeCnt - 1;

         return g_mode(g_modeCnt);

      /end-free
     P                 e
      *
      * =============================================================
      *  Prfen CL Befehl
      * =============================================================
     P validateCmd...
     P                 b
     D                 pi                         like(bool_t)
     D  i_cmd                              value  like(cmdLong_t)
      *
      *  Definitionen fr QCAPCMD
     D optCtrl         ds                  likeds(cpop0100_t) inz
     D retCmd          s                   like(cmdLongFixLen_t) inz
     D retCmdLenAvl    s             10i 0 inz(%len(retCmd))
     D retCmdLenRtn    s             10i 0 inz
     D errCode         ds                  likeds(errCode_t) inz
      *
      *  ... Fehler im Erstellungsbefehl gefunden.
      /COPY QSTRPREPRC,PRZ0015
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      /free

         clear errCode;

         monitor;

            clear optCtrl;
            optCtrl.typeCmdPrc = cQCAPCMD_PRC_CHK_CMDLINE;
            optCtrl.DBCS_data = cQCAPCMD_DBCS_HANDLE;
            optCtrl.prmtAction = cQCAPCMD_PROMPT_NEVER;
            optCtrl.cmdStrSyntax = cQCAPCMD_SYNTAX_SYSTEM;
            optCtrl.msgRtvKey = '';
            optCtrl.ccsidCmdStr = 0;
            optCtrl.res_01 = *ALLx'00';

            errCode = f_newApiErrCode(cTrue);
            QCAPCMD(i_cmd: %len(%trimR(i_cmd)): optCtrl: %size(optCtrl)
                    : 'CPOP0100': retCmd: retCmdLenAvl: retCmdLenRtn: errCode);

            if (not f_isApiError(errCode));
               return cTrue;
            endif;

         on-error;
         endmon;

         if (%trim(i_cmd) = '');
           appendToJobLog('Command validation error: Command is missing');
         else;
           appendToJobLog(i_cmd);
         endif;

         return cFalse;

      /end-free
     P                 e
      *
      * =============================================================
      *  Execute a CL command.
      * =============================================================
     P executeCmd...
     P                 b
     D                 pi                         like(bool_t)
     D  i_monErr                           value  like(bool_t)
     D  i_cmd                              value  like(cmdLong_t)
     D  o_errMsgId                                like(msgId_t) options(*nopass)
      *
     D p_errMsgId      c                   3
      *
      *  Fields for getMsgInf()
     D msgID           s                   like(msgID_t) inz
     D msgDta          s                   like(msg_t.data) inz
     D msgFile         s                   like(msg_t.file) inz
     D msgLib          s                   like(msg_t.lib) inz
      *
      * Definitionen fr Ausgangsprogramm
     D cmdLongFixLength...
     D                 s                   like(cmdLongFixLen_t)
     D cmdLongLength   s             15P 5
     D exitPgmName     s             21A   varying
      *
     D exitPgm         pr                  extpgm(exitPgmName)
     D  cmd                                like(cmdLongFixLen_t)
     D                                     options(*varsize)
     D  length                       15P 5 options(*nopass: *omit)
      *
      *  Definitionen fr QCAPCMD
     D optCtrl         ds                  likeds(cpop0100_t) inz
     D retCmd          s                   like(cmdLongFixLen_t) inz
     D retCmdLenAvl    s             10i 0 inz(%len(retCmd))
     D retCmdLenRtn    s             10i 0 inz
     D errCode         ds                  likeds(errCode_t) inz
      *
      *  ... Fehler im Erstellungsbefehl gefunden.
      /COPY QSTRPREPRC,PRZ0015
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      /free

         clear errCode;

         if (g_pgmCmdExc <> '*NONE');
            exitPgmName = %trim(g_libPgmCmdExc) + '/' + %trim(g_pgmCmdExc);
            cmdLongFixLength = i_cmd;
            cmdLongLength = %len(cmdLongFixLength);
            exitPgm(cmdLongFixLength: cmdLongLength);
            i_cmd = %trimR(%subst(cmdLongFixLength: 1: %int(cmdLongLength)));
         endif;

         // Execute command
         monitor;

            clear optCtrl;
            optCtrl.typeCmdPrc = cQCAPCMD_PRC_EXC_CMDLINE;
            optCtrl.DBCS_data = cQCAPCMD_DBCS_HANDLE;
            optCtrl.prmtAction = cQCAPCMD_PROMPT_NEVER;
            optCtrl.cmdStrSyntax = cQCAPCMD_SYNTAX_SYSTEM;
            optCtrl.msgRtvKey = '';
            optCtrl.res_01 = *ALLx'00';

            errCode = f_newApiErrCode(cFalse);
            QCAPCMD(i_cmd: %len(i_cmd): optCtrl: %size(optCtrl): 'CPOP0100'
                    : retCmd: retCmdLenAvl: retCmdLenRtn: errCode);

            return cTrue;

         on-error;

            appendToJobLog(i_cmd);

            getMsgInf('STRPREPRC': 'STRPREPRC2': 'executeCmd'
                      : errCode.excID: msgID: msgDta: msgFile: msgLib);

            if (not g_option.isEventf);
               clear PRZ0015;
               PRZ00151 = i_cmd;
               sendMsg(f_newMsg('PRZ0015': PRZ0015: cTYPE_DIAG));
               sendMsg(f_newMsg(msgID: msgDta: cTYPE_DIAG: msgFile: msgLib));
            endif;

            if (i_monErr);
               if (%parms() >= p_errMsgId and %addr(o_errMsgId) <> *null);
                  o_errMsgId = msgID;
               endif;
               return cFalse;
            else;
               endAbnormal();
            endif;
         endmon;

      /end-free
     P                 e
      *
      *===============================================================*
      *  Appends a message to the job log.
      *===============================================================*
     P appendToJobLog...
     P                 b
     D                 pi
     D  i_message                          value  like(cmdLong_t)
      *
     D startPos        S             10U 0 inz(1)
     D prefix          S             11A   inz
     D line            S             60A   inz
      *
      *  Nachrichten
      *  ... &1.
      /COPY QSTRPREPRC,PRZ0029
      /free

         if (i_message = '');
            i_message = '*MISSING';
         endif;

         clear PRZ0029;
         prefix = 'STRPREPRC: ';
         dow (startPos > 0);
            line = f_wordWrap(i_message: %len(line): startPos);
            clear PRZ0029;
            PRZ00291 = prefix + line;
            sendMsg(f_newMsg('PRZ0029': PRZ0029: cTYPE_DIAG));
            prefix = '';
         enddo;

      /end-free
     P                 E
      *
      * =============================================================
      *  Ermitteln Nachrichteninformationen
      * =============================================================
     P getMsgInf...
     P                 b
     D                 pi
     D  i_pgm                              value  like(pgm_t)
     D  i_module                           value  like(module_t)
     D  i_proc                             value  like(proc_t)
     D  i_msgId                            value  like(msgID_t)
     D  o_msgID                                   like(msgID_t)
     D  o_msgDta                                  like(msg_t.data)
     D  o_msgFile                                 like(msg_t.file)
     D  o_msgLib                                  like(msg_t.lib)
      *
     D RCVM0200        ds                  likeds(rcvm0200_t)
      *
     D lenMsgInf       s             10i 0 inz(%size(RCVM0200))
     D stackEntry      s             64a   inz
     D stackCounter    s             10i 0 inz(0)
     D msgType         s             10a   inz
     D msgKey          s              4a   inz
     D wait            s             10i 0 inz(0)
     D msgAction       s             10a   inz('*SAME')
     D lenStackEntry   s             10i 0 inz(%size(stackEntry))
     D stackQual       ds
     D  stackQualMod                 10a   inz('*NONE')
     D  stackQualPgm                 10a   inz('*NONE')
      *
     D errCode         ds                  likeds(errCode_t) inz
      *
     D firstMsg        s                   like(RCVM0200) inz
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      /free

         stackEntry = i_proc;
         stackQualPgm = i_pgm;
         stackQualMod = i_module;
         msgType = '*LAST';
         msgKey = '';
         firstMsg = '';

         dou (rcvm0200.msgId = i_msgId);

            clear RCVM0200;
            errCode = f_newApiErrCode(cTrue);

            QMHRCVPM(RCVM0200: lenMsgInf: 'RCVM0200': stackEntry: stackCounter
                     : msgType: msgKey: wait: msgAction: errCode
                     : lenStackEntry: stackQual);

            if (f_isApiError(errCode));
               leave;
            endif;

            if (rcvm0200.bytAvl = 0);
               RCVM0200 = firstMsg;
               leave;
            endif;

            if (firstMsg = '');
               firstMsg = RCVM0200;
            endif;

            msgType = '*PRV';
            msgKey  = rcvm0200.msgKey;
         enddo;

         if (f_isApiError(errCode));
            o_msgID   = '';
            o_msgDta  = '';
            o_msgFile = '';
            o_msgLib  = '';
         else;
            o_msgID   = rcvm0200.msgId;
            o_msgDta  = %subst(rcvm0200.varLenData: 1: rcvm0200.lenRplDtaRet);
            o_msgFile = rcvm0200.msgF;
            o_msgLib = rcvm0200.msgFLibRet;
         endif;

      /end-free
     P                 e
      *
      * =============================================================
      *  Formatieren CL Befehl
      * =============================================================
     P formatCmd...
     P                 b
     D                 pi                         like(cmdLong_t)
     D  i_cmd                              value  like(cmdLong_t)
      *
      *  Nachrichten
      *  ... Befehlszeichenfolge ist zu lang.
      /COPY QSTRPREPRC,PRZ0007
      *  ... Fehler im Erstellungsbefehl gefunden.
      /COPY QSTRPREPRC,PRZ0015
      *
      *  Definitionen fr QCAPCMD
     D cmd             s                   like(i_cmd)
     D optCtrl         ds                  likeds(cpop0100_t) inz
     D retCmd          s                   like(cmdLongFixLen_t) inz
     D retCmdLenAvl    s             10i 0 inz(%len(retCmd))
     D retCmdLenRtn    s             10i 0 inz
     D errCode         ds                  likeds(errCode_t) inz
      *
     D msg             ds                  likeds(msg_t) inz
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      /free

            if (i_cmd = '');
               return i_cmd;
            endif;

            cmd = i_cmd;

            clear optCtrl;
            optCtrl.typeCmdPrc = cQCAPCMD_PRC_CHK_CMDLINE;
            optCtrl.DBCS_data = cQCAPCMD_DBCS_HANDLE;
            optCtrl.prmtAction = cQCAPCMD_PROMPT_NEVER;
            optCtrl.cmdStrSyntax = cQCAPCMD_SYNTAX_SYSTEM;
            optCtrl.msgRtvKey = '';
            optCtrl.res_01 = *ALLx'00';

            errCode = f_newApiErrCode(cTrue);

            QCAPCMD(cmd: %len(cmd): optCtrl: %size(optCtrl): 'CPOP0100'
                    : retCmd: retCmdLenAvl: retCmdLenRtn: errCode);

         // Prfen API-Fehler ...
         if (f_isApiError(errCode));
            msg = f_cvtApiErrCodeToMsg(errCode);
            msg.type = cTYPE_DIAG;
            sendMsg(msg);
            clear PRZ0015;
            PRZ00151 = i_cmd;
            sendMsg(f_newMsg('PRZ0015': PRZ0015: cTYPE_DIAG));
            endAbnormal();
         endif;

         // Prfen Lnge der Befehlszeichenkette ...
         if (retCmdLenRtn > retCmdLenAvl);
            clear PRZ0007;
            PRZ00071 = retCmdLenAvl;
            sendMsg(f_newMsg('PRZ0007': PRZ0007: cTYPE_DIAG));
            endAbnormal();
         endif;

         return retCmd;

      /end-free
     P                 e
      *
      * =============================================================
      *  Beenden Programm abnormal
      * =============================================================
     P endAbnormal...
     P                 b                   export
     D                 pi
     D  i_qEventf                          const  likeds(qObj_t)
     D                                     options(*nopass)
      *
     D p_qEventf       c                   1
      *
     D qEventf         ds                  likeds(i_qEventf)
     D lineNumber      s             10i 0
      *
      *  Nachrichten
      *  ... Verarbeitung in Zeile &1 abgebrochen.
      /COPY QSTRPREPRC,PRZ0002
      /free

         if (%parms() >= p_qEventf and %addr(i_qEventf) <> *null);
            qEventf = i_qEventf;
         else;
            clear qEventf;
         endif;

         if (g_option.isEventf);
            writeJobLogToEventf(qEventf: cTrue);
         endif;

         if (SourceStreamFile_isOpen());
            lineNumber = SourceStreamFile_getLineNbr();
            SourceStreamFile_close();
         else;
            lineNumber = SourceFile_getLineNbr();
            SourceFile_close();
         endif;

         if (%open(STRPRE1));
            close STRPRE1;
         endif;

         IncludeFile_close();

         clear PRZ0002;
         // PRZ00021 = f1_line_number;
         PRZ00021 = lineNumber;
         sendMsg(f_newMsg('PRZ0002': PRZ0002: cTYPE_ESCAPE));

      /end-free
     P                 e
      *
      * =============================================================
      *  Beenden Programm normal
      * =============================================================
     P endOK...
     P                 b
     D                 pi
     D  i_qEventf                          const  likeds(qObj_t)
     D                                     options(*nopass)
      *
     D p_qEventf       c                   1
      *
     D qEventf         ds                  likeds(i_qEventf)
      *
      *  Nachrichten
      *  ... EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konnte nicht geffnet
      /COPY QSTRPREPRC,PRZ0025
      /free

         if (%parms() >= p_qEventf and %addr(i_qEventf) <> *null);
            qEventf = i_qEventf;
         else;
            clear qEventf;
         endif;

         if (g_option.isEventf);
            writeJobLogToEventf(qEventf: cFalse);
         endif;

      /end-free
     P                 e
      *
      * =============================================================
      *  Write job log entries to the event file.
      *
      *  i_qEventf - Event file created by the object creation
      *              command. If the object name was overridden by
      *              a STRPREPRC >>PARM<< tag, the events ctreated by
      *              the object creation command must be copied to
      *              the event file created by STRPREPRC.
      * =============================================================
     P writeJobLogToEventf...
     P                 b
     D                 pi
     D  i_qEventf                          const  likeds(qObj_t)
     D  i_isAbnEnd                     n   const
      *
     D isEmpty         s               n
     D doAppend        s               n
     D doAppendJobLog  s               n
      *  ... EVFEVENT Datei in Bibliothek &1 oder das Job Protokoll konnte nicht geffnet
      /COPY QSTRPREPRC,PRZ0025
      /free

         monitor;

            if (i_qEventf.name <> '' and i_qEventf.lib <> '');
               if (i_qEventf.name <> g_eventf.mbr or
                   i_qEventf.lib <> g_eventf.lib);
                  if (not isEmptyEventFile(i_qEventf.lib: i_qEventf.name));
                        copyEventFile(i_qEventf.lib: i_qEventf.name
                                      : g_eventf.lib: g_eventf.mbr);
                  endif;
               endif;
            endif;

            isEmpty = isEmptyEventFile(g_eventf.lib: g_eventf.mbr);

            select; // g_prePostCmdsMode
            when (g_prePostCmdsMode = MODE_PRECMDS);
               doAppendJobLog = i_isAbnEnd;
            when (g_prePostCmdsMode = MODE_EXECUTE);
               doAppendJobLog = isEmpty and
                                (i_isAbnEnd or g_option.doAppendJobLog);
            when (g_prePostCmdsMode = MODE_POSTCMDS);
               doAppendJobLog = i_isAbnEnd;
            other;
               doAppendJobLog = cFalse;
            endsl;

            if (doAppendJobLog);
               doAppend = not isEmpty;
               g_eventf.isOpen = openEventFile(
                                    g_eventf.mbr: g_eventf.lib: doAppend);
               if (g_eventf.isOpen);
                  if (SourceStreamFile_isOpen());
                     writeEventFile(
                        SourceStreamFile_getPath()
                        : '': ''
                        : SourceStreamFile_getLineNbr(): i_isAbnEnd);
                  else;
                     writeEventFile(
                        g_srcFile.name: g_srcFile.lib: g_srcFile.mbr
                        : SourceFile_getLineNbr(): i_isAbnEnd);
                  endif;
               endif;
            endif;

            // Update *LDA with event file name.
            updateLDA(g_eventf.lib: g_eventf.mbr);

         on-error;
            g_eventf.isOpen = cFalse;
            clear PRZ0025;
            PRZ00251 = g_eventf.lib;
            sendMsg(f_newMsg('PRZ0025': PRZ0025: cTYPE_DIAG));
         endmon;

         // Allways try to close the event file.

         monitor;

            if (g_eventf.isOpen);
               closeEventFile();
               g_eventf.isOpen = cFalse;
            endif;

         on-error;
            // Ignore close errors.
         endmon;

      /end-free
     P                 e
      *
      *===============================================================*
      *  Replace variables
      *===============================================================*
     P replaceVar...
     P                 b
     D                 pi
     D  i_var                        10a   value
     D  i_value                            value  like(cmdLong_t)
     D  io_string                                 like(cmdLong_t)
      *
     D x               s                   like(int4_t)
      /free

         dou (x = 0);
            if (x > 0);
               io_string = %replace(%trim(i_value)
                                    : io_string
                                    : x
                                    : %len(%trim(i_var)));
            endif;
            x = %scan(%trim(i_var): io_string);
         enddo;

      /end-free
     P                 E
      *
** CTDATA g_crtCmdsDta
CRTBNDCL    PGM         Create Bound CL Program
CRTBNDRPG   PGM         Create Bound RPG Program
CRTCBLMOD   MODULE      Create COBOL Module
CRTCLMOD    MODULE      Create CL Module
CRTCLD      CLD         Create C Locale Description
CRTCMOD     MODULE      Create C Module
CRTCMD      CMD         Create Command
CRTCPPMOD   MODULE      Create C++ Module
CRTDSPF     FILE        Create Display File
CRTMNU      MENU        Create Menu
CRTPNLGRP   PNLGRP      Create Panel Group
CRTPRTF     FILE        Create Printer File
CRTQMQRY    QMQRY       Create Query Management Query
CRTRPGMOD   MODULE      Create RPG Module
CRTSQLCBL   PGM         Create SQL COBOL Program
CRTSQLCBLI  OBJ         Create SQL ILE COBOL Object
CRTSQLCI    OBJ         Create SQL ILE C object
CRTSQLCPPI  OBJ         Create SQL ILE C++ Object
CRTSQLRPG   PGM         Create SQL RPG Program
CRTSQLRPGI  OBJ         Create SQL ILE RPG Object
CRTTBL      TBL         Create Table
XCRTSQLOBJ  SQLOBJ      Create SQL-Object
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC3  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC3"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Init                        "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC3                                         *
      *  Beschreibung  : Start Pre-Processor - Init                         *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 21.11.2000                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  18.05.2015  Th.Raddatz    Converted to /free.                      *
      *                                                                     *
      *  26.04.2020  Th.Raddatz    Added 'INCLUDE' tag.                     *
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
     H NOMAIN
      /COPY QSTRPREPRC,H_SPEC
      *
      * -------------------------------------------------------------
      *  Verwendete Dateien
      * -------------------------------------------------------------
     FSTRPRE1   UF A E             DISK    usropn
     F                                     extfile(g_strpre1.name)
     F                                     extmbr(g_strpre1.member)
     F                                     infds(f1)
     FSTRPRE2   UF A E             DISK    usropn
     F                                     extfile(g_strpre2.name)
     F                                     extmbr(g_strpre2.member)
     F                                     infds(f2)
      *
     D g_strpre1       ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
     D g_strpre2       ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
     D f1              DS                  qualified
     D  status                11     15S 0
     D  file                  83     92A
     D  lib                   93    102A
     D  rcdLen               125    126I 0
     D  mbr                  129    138A
     D  numRcd               156    159I 0
     D  nbrOfKey             387    388I 0
     D  rcdNbr               397    400I 0
      *
     D f2              DS                  likeds(f1)
      *
      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR3
      *
      * -------------------------------------------------------------
      *  Globale Variablen
      * -------------------------------------------------------------
     D ctrlEntry       S             60A   dim(25) ctdata perrcd(1)
     D msgIDs          S             83A   dim(25) ctdata perrcd(1)
      *
      /copy QSTRPREPRC,SDS
      *
      * =============================================================
      *  Initialisieren Pre-Prozessor
      * =============================================================
     P initialize...
     P                 B                   export
     D                 PI
      *
     D x               S             10I 0 inz
      /free

         g_strpre1.name = %trim(sds.pgmLib) + '/' + 'STRPRE1';
         g_strpre1.member = '*FIRST';

         open STRPRE1;

         if (f1.numRcd <> %elem(ctrlEntry));

            setll 1 FSTRPRE1;
            dow (%found(STRPRE1));
               read FSTRPRE1;
               if (%eof(STRPRE1));
                  leave;
               endif;
               delete FSTRPRE1;
            enddo;

            for x = 1 to %elem(ctrlEntry);
               MODE    = %subst(ctrlEntry(x):  1: 30);
               NEWMODE = %subst(ctrlEntry(x): 31: 30);
               write FSTRPRE1;
            endfor;
         endif;

         close STRPRE1;

         g_strpre2.name = %trim(sds.pgmLib) + '/' + 'STRPRE2';
         g_strpre2.member = '*FIRST';

         open STRPRE2;

         if (f2.numRcd = 0);

            setll 1 FSTRPRE2;
            dow (%found(STRPRE2));
               read FSTRPRE2;
               if (%eof(STRPRE2));
                  leave;
               endif;
               delete FSTRPRE2;
            enddo;

            for x = 1 to %elem(msgIDs);
               MSGFILE = %subst(msgIDs(x):  1: 10);
               MSGLIB  = %subst(msgIDs(x): 12: 10);
               MSGID   = %subst(msgIDs(x): 23:  7);
               FMT     = %dec(%subst(msgIDs(x): 31: 2): 2: 0);
               TEXT    = %subst(msgIDs(x): 34: 50);
               write FSTRPRE2;
            endfor;
         endif;

         close STRPRE2;

      /end-free
     P                 E
      *
** CTDATA(ctrlEntry)
*SCAN                         >>PRE-COMPILER<<
>>COMPILE<<                   >>END-COMPILE<<
>>COMPILE<<                   >>PARM<<
>>COMPILE<<                   >>INCLUDE<<
>>IMPORTANT<<                 >>END-IMPORTANT<<
>>IMPORTANT<<                 >>PARM<<
>>IMPORTANT<<                 >>INCLUDE<<
>>LINK<<                      >>END-LINK<<
>>LINK<<                      >>PARM<<
>>LINK<<                      >>INCLUDE<<
>>PRE-COMPILER<<              *EXIT
>>PRE-COMPILER<<              >>CMD<<
>>PRE-COMPILER<<              >>INCLUDE<<
>>PRE-COMPILER<<              >>COMPILE<<
>>PRE-COMPILER<<              >>IMPORTANT<<
>>PRE-COMPILER<<              >>CRTCMD<<
>>PRE-COMPILER<<              >>EXECUTE<<
>>PRE-COMPILER<<              >>LINK<<
>>PRE-COMPILER<<              >>WIDTH<<
>>PRE-COMPILER<<              >>CURLIB<<
>>PRE-COMPILER<<              >>LIBL<<
>>PRE-COMPILER<<              >>MONMSG<<
>>CMD<<                       >>MONMSG<<
>>MONMSG<<                    >>END-MONMSG<<
>>MONMSG<<                    >>MSGID<<
** CTDATA(msgIDs)                12345678901234567890123456789012345678901234567890
QCPFMSG    *LIBL      CPD5CDB 04 The signature of an export block has been trun ...     # 1
QCPFMSG    *LIBL      CPD5CDC 04 The signature of an export block has been padd ...     # 2
QCPFMSG    *LIBL      CPD5CDD 04 If LVLCHK(*NO) is specified on the Start Progr ...     # 3
QCPFMSG    *LIBL      CPD5CDE 04 A syntax error was detected in a signature spe ...     # 4
QCPFMSG    *LIBL      CPD5CDF 04 Signature '&8' was specified on the Start Prog ...     # 5
QCPFMSG    *LIBL      CPD5CD6 04 The wildcard specified, '&8', does not match a ...     # 6
QCPFMSG    *LIBL      CPD5CD7 04 The wildcard specified, '&8', matches &10 symb ...     # 7
QCPFMSG    *LIBL      CPD5CEA 04 An ENDPGMEXP command was expected to end an ex ...     # 8
QCPFMSG    *LIBL      CPD5CEB 04 An export block was not started before the END ...     # 9
QCPFMSG    *LIBL      CPD5CEC 04 An EXPORT binder language command exists outsi ...     #10
QCPFMSG    *LIBL      CPD5CED 04 The current export block of the binder languag ...     #11
QCPFMSG    *LIBL      CPD5CEE 04 No export block of the binder language source  ...     #12
QCPFMSG    *LIBL      CPD5CEF 04 The system has generated identical signatures  ...     #13
QCPFMSG    *LIBL      CPD5CE0 04 Symbol '&8' is specified more than once in a s ...     #14
QCPFMSG    *LIBL      CPD5CE1 04 More than one export block is declared to be t ...     #15
QCPFMSG    *LIBL      CPD5CE2 04 Two or more export blocks in the binder langua ...     #16
QCPFMSG    *LIBL      CPD5CE3 04 The current export block exports fewer symbols ...     #17
QCPFMSG    *LIBL      CPD5CE4 04 Level checking can be disabled only once in a  ...     #18
QCPFMSG    *LIBL      CPD5CE5 04 Symbol '&8' does not exist in the service prog ...     #19
QCPFMSG    *LIBL      CPD5CE6 04 Symbol '&8' is not allowed to be a service pro ...     #20
QCPFMSG    *LIBL      CPD5CE7 04 A syntax error has been found in the binder la ...     #21
QCPFMSG    *LIBL      CPD5CE8 04 If using the EXPORT command, specify a symbol  ...     #22
QCPFMSG    *LIBL      CPD5CE9 04 The end of the binder language source file was ...     #23
QCPFMSG    *LIBL      CPD5CF0 04 A previous export block of the binder language ...     #24
QCPFMSG    *LIBL      CPI433A -1 Unable to retrieve query options file.                 #25
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC4  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC4"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - Event File                  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC4                                         *
      *  Beschreibung  : Start Pre-Processor - Event File                   *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 15.05.2015                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  03.02.2017  Th.Raddatz    Changed, to append the version           *
      *                            information to the job log.              *
      *                                                                     *
      *  09.03.2019  Th.Raddatz    Changed, to open the event file for      *
      *                            modus 'new', when the event file is      *
      *                            empty.                                   *
      *                                                                     *
      *  22.12.2020  Th.Raddatz    Changed writing job log entries as ERROR *
      *                            entries, in case of compilation errors.  *
      *                                                                     *
      *  19.11.2021  Th.Raddatz    Moved prototype of updateLDA() to member *
      *                            PROTO_H.                                 *
      *                                                                     *
      *  16.03.2022  Th.Raddatz    Renamed PROTO_H to TYPES_H.              *
      *                                                                     *
      *  23.03.2022  Th.Raddatz    Changed writeEventFile() to accept an    *
      *                            IFS stream file at parameter i_srcFile.  *
      *                                                                     *
      *  26.03.2022  Th.Raddatz    Added stream file support.               *
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
      /COPY QSTRPREPRC,H_SPEC
     H NOMAIN BNDDIR('QC2LE')
      *
     FSTRPRE2   IF   E           K DISK    usropn
     F                                     extfile(g_strpre2.name)
     F                                     extmbr(g_strpre2.member)
     F                                     prefix(P2)
      *
     D g_strpre2       ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR4
      *
      /copy QSTRPREPRC,SDS
      *
      *  Returns cTrue for an ignored message ID, else cFalse.
     D isIgnoredMsgID...
     D                 pr              n
     D                                     extproc('isIgnoredMsgID')
     D  i_jobLogEntry                      const likeds(JobLog_jobLogEntry_t)
      *
      *  Returns the statement number of the line that has the error.
     D getLineNumber...
     D                 pr            20i 0
     D                                     extproc('getLineNumber')
     D  i_jobLogEntry                      const likeds(JobLog_jobLogEntry_t)
      *
      *  Macro to prepare the _NUM_Descr_T, used in the cpynv and edit functions.
     D NUM_Descr_T...
     D                 PR            10I 0
     D  i_type                        3I 0 const
     D  i_length                      3I 0 const
     D  i_fractional                  3I 0 const
      *
      *  Copy Numeric Value (CPYNV)
     D cpynv...
     D                 PR              *          extproc('cpynv')
     D  i_rcvDesc                          value  like(NUM_Descr_T )
     D  i_pRcvVar                      *   value
     D  i_srcDesc                          value  like(NUM_Descr_T )
     D  i_pSrcVar                      *   value
      *
      *  These values must be specified on the Scalar Type for CPYNV,
      *  CVTEFN, and EDIT instructions.                              QSYSINC/MIH.MICPTCOM
     D T_SIGNED        C                   x'00'
     D T_FLOAT         C                   x'01'
     D T_ZONED         C                   x'02'
     D T_PACKED        C                   x'03'
     D T_CHAR          C                   x'04'
     D T_ONLYNS        C                   x'06'
     D T_ONLYN         C                   x'07'
     D T_EITHER        C                   x'08'
     D T_OPEN          C                   x'09'
     D T_UNSIGNED      C                   x'0A'
      *
      * -------------------------------------------------------------
      *  External prototypes
      * -------------------------------------------------------------
      /COPY QSTRPREPRC,QUSRMBRD                   Retrieve Member Description (QUSRMBRD) API
      *
      * -------------------------------------------------------------
      *  Globale Referenzfelder
      * -------------------------------------------------------------
      *
      * -------------------------------------------------------------
      *  Globale Konstanten
      * -------------------------------------------------------------
      /DEFINE COPYRIGHT_DSPEC
      /COPY QSTRPREPRC,COPYRIGHT
      *
     D SOURCE_ID       c                   1
     D JOBLOG_ID       c                   999
      *
      * -------------------------------------------------------------
      *  Globale Variablen
      * -------------------------------------------------------------
     D g_status        ds                  qualified
     D  isEnabled                      n   inz(cFalse)
     D  haveEventFile                  n   inz(cFalse)
     D  haveJobLog                     n   inz(cFalse)
     D  openForAppend                  n   inz(cFalse)
     D  copyEvents                     n   inz(cFalse)
     D  msgKey                        4a   inz(*ALLx'FF')
      *
     D g_LDA           ds                  dtaara(*LDA) qualified
     D  library                      10a
     D  object                       10a
      *
      * -------------------------------------------------------------
      *  Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,TYPES_H                     Tool: STRPREPRC - Global Types and Constants
      /copy QSTRPREPRC,QMHRTVM                     Retrieve Message (QMHRTVM) API
      /copy QEVENTF,PEVENTF                        EVFEVENT API - Public Interface
      /copy QJOBLOG,PJOBLOG                        EVFEVENT API - Job Log
      *
      * =============================================================
      *  Enables this module.
      * =============================================================
     P enableEventFile...
     P                 b                   export
     D                 pi
      /free

         g_status.isEnabled = cTrue;

      /end-free
     P                 e
      *
      * =============================================================
      *  Checks whether the event file is empty.
      * =============================================================
     P isEmptyEventFile...
     P                 b                   export
     D                 pi              n
     D  i_lib                        10a   const
     D  i_obj                        10a   const
      *
     D qFile           ds                  likeds(qObj_t) inz
     D mbrd0200        ds                  likeds(mbrd0200_t) inz
     D msg             ds                  likeds(msg_t) inz
      /free

         monitor;

            if (not f_exist('EVFEVENT': i_lib: '*FILE': i_obj));
               return cTrue;
            endif;

            qFile.name = 'EVFEVENT';
            qFile.lib = i_lib;
            QUSRMBRD(mbrd0200: %size(mbrd0200): 'MBRD0200': qFile: i_obj: '0');

            return mbrd0200.numTotRcds = 0;

         on-error;
            msg = f_rcvPgmMsgObj(cMsg_Escape);
            f_sndPgmMsg(msg: cMsg_Prv);
         endmon;

      /end-free
     P                 e
      *
      * =============================================================
      *  Clears an event file.
      * =============================================================
     P clearEventFile...
     P                 b                   export
     D                 pi
     D  i_obj                        10a   const
     D  i_lib                        10a   const
      /free

         if (not g_status.isEnabled);
            return;
         endif;

         Eventf_clear(i_lib: i_obj);

      /end-free
     P                 e
      *
      * =============================================================
      *  Prepares for writing the event file.
      * =============================================================
     P prepareEventFile...
     P                 b                   export
     D                 pi

     D jobLogEntry     ds                  likeds(JobLog_jobLogEntry_t) inz
      /free

         if (not g_status.isEnabled);
            return;
         endif;

         if (JobLog_getNewest('*': jobLogEntry));
            g_status.haveJobLog = cTrue;
            g_status.msgKey = jobLogEntry.msgKey;
         else;
            g_status.haveJobLog = cFalse;
            g_status.msgKey = *ALLx'FF';
         endif;

      /end-free
     P                 e
      *
      * =============================================================
      *  Opens the event file.
      * =============================================================
     P openEventFile...
     P                 b                   export
     D                 pi              n
     D  i_obj                        10a   const
     D  i_lib                        10a   const
     D  i_append                       n   const

     D rtnLib          s                   like(i_lib)
      /free

         if (not g_status.isEnabled);
            return cFalse;
         endif;

         g_status.openForAppend = i_append;

         if (g_status.openForAppend);
            Eventf_openAppend(i_lib: i_obj: rtnLib);
            if (rtnLib = '');
               return cFalse;
            endif;
         else;
            Eventf_open(i_lib: i_obj: rtnLib);
            if (rtnLib = '');
               return cFalse;
            endif;
            Eventf_writeProcessor();
         endif;

         g_status.haveEventFile = cTrue;

         return cTrue;

      /end-free
     P                 e
      *
      * =============================================================
      *  Update the *LDA with the name of the event file.
      * =============================================================
     P updateLDA...
     P                 b                   export
     D                 pi
     D  i_lib                        10a   const
     D  i_obj                        10a   const
      /free

         monitor;
            in g_LDA;
            if (i_lib <> '' and i_obj <> '');
               g_LDA.library = i_lib;
               g_LDA.object = i_obj;
            else;
               g_LDA.library = '';
               g_LDA.object = '';
            endif;
            out g_LDA;
         on-error;
         endmon;

      /end-free
     P                 e
      *
      * =============================================================
      *  Copies the job log messages to the event file.
      * =============================================================
     P writeEventFile...
     P                 b                   export
     D                 pi
     D  i_srcFile                          const  like(path_t)
     D  i_srcLib                     10a   const
     D  i_srcMbr                     10a   const
     D  i_lineNumber                 10i 0 const
     D  i_isAbnEnd                     n   const

     D path            s                   like(evf_path_t)

     D hJobLog         s                   like(JobLog_handle_t) inz
     D jobLogEntry     ds                  likeds(JobLog_jobLogEntry_t) inz
     D isFirstMsg      s               n   inz(cTrue)
     D lineNumber      s                   like(i_lineNumber)
     D sourceId        s                   like(evf_source_id_t)
      *
      *  Nachrichten
      *  ... &1.
      /copy QSTRPREPRC,PRZ0029
      /free

         if (not g_status.isEnabled);
            return;
         endif;

        if (not g_status.haveEventFile);
           return;
        endif;

        if (not g_status.haveJobLog);
           return;
        endif;

        if (not g_status.openForAppend);
           if (i_srcLib <> '' and i_srcMbr <> '');
              path = f_cvtQSYSObjNameToPath(
                        i_srcFile: i_srcLib: i_srcMbr:'*FILE');
           else;
              path = i_srcFile; // i_srcFile is an IFS stream file
           endif;
           sourceId = SOURCE_ID;
           Eventf_writeFileID(
              sourceId: path: EVF_NAME_TYPE_PATH);
        else;
           sourceId = JOBLOG_ID;
           Eventf_writeFileID(
              sourceId: '*JOBLOG': EVF_NAME_TYPE_PATH: EVF_TEMPORARY_SOURCE);
        endif;

        // Append version information to job log
        clear PRZ0029;
        PRZ00291 = 'STRPREPRC v' + STRPREPRC_VERSION + ' - ' + STRPREPRC_DATE;
        f_sndPgmMsg(f_newMsg('PRZ0029': PRZ0029: cMsg_Diag));

        hJobLog = JobLog_open(*omit: JOBLOG_OPTION_MSG +
                                     JOBLOG_OPTION_REPLACE_VARS +
                                     JOBLOG_OPTION_SENDER
                                   : JOBLOG_NEXT
                                   : g_status.msgKey);

        dow (JobLog_getEntry(hJobLog: jobLogEntry));

           if (isFirstMsg);
              isFirstMsg = cFalse;
              iter;
           endif;

           if (isIgnoredMsgID(jobLogEntry));
              iter;
           endif;

           if (sourceId = SOURCE_ID);
              lineNumber = getLineNumber(jobLogEntry);
              if (lineNumber = -1);
                 lineNumber = i_lineNumber;
              endif;
           else;
              lineNumber = 0;
           endif;

           if (not i_isAbnEnd);
              if (jobLogEntry.msgSeverity >= EVF_MSG_SEVERITY_ERROR);
                 jobLogEntry.msgSeverity = EVF_MSG_SEVERITY_WARNING;
              endif;
           endif;

           if (sourceId = SOURCE_ID);
              Eventf_writeError(sourceId
                                : lineNumber
                                : jobLogEntry.msgID
                                : jobLogEntry.msgSeverity
                                : jobLogEntry.msgText);
           else;
              if (i_isAbnEnd);
                 Eventf_writeError(sourceId
                                   : lineNumber
                                   : jobLogEntry.msgID
                                   : jobLogEntry.msgSeverity
                                   : jobLogEntry.msgText);
              else;
                 Eventf_writeError(sourceId
                                   : lineNumber
                                   : jobLogEntry.msgID
                                   : jobLogEntry.msgSeverity
                                   : jobLogEntry.msgText
                                   : EVF_SEVERITY_WARNING
                                   : EVF_ANNOTATION_BOTTOM);
              endif;
           endif;
        enddo;

        JobLog_close(hJobLog);

        Eventf_writeFileEnd(sourceId: 0);

      /end-free
     P                 e
      *
      * =============================================================
      *  Closes the event file.
      * =============================================================
     P closeEventFile...
     P                 b                   export
     D                 pi
      /free

         if (not g_status.isEnabled);
            return;
         endif;

        if (%open(STRPRE2));
           close STRPRE2;
        endif;

        if (g_status.haveEventFile);
           Eventf_close();
           g_status.haveEventFile = cFalse;
        endif;

      /end-free
     P                 e
      *
      *===============================================================*
      *  Copy event file.
      *===============================================================*
     P copyEventFile...
     P                 b                   export
     D                 pi
     D  i_fromLib                    10a   const
     D  i_fromMbr                    10a   const
     D  i_toLib                      10a   const
     D  i_toMbr                      10a   const
      /free

        Eventf_open(i_toLib: i_toMbr);
        Eventf_copyFrom(i_fromLib: i_fromMbr);
        Eventf_close();

      /end-free
     P                 e
      *
      * =============================================================
      *  Returns cTrue for an ignored message ID, else cFalse.
      * =============================================================
     P isIgnoredMsgID...
     P                 b
     D                 pi              n
     D  i_jobLogEntry                      const likeds(JobLog_jobLogEntry_t)
      *
     D key             ds                  likerec(FSTRPRE2: *KEY)
      /free

         if (not %open(STRPRE2));
            g_strpre2.name = %trim(sds.pgmLib) + '/' + 'STRPRE2';
            g_strpre2.member = '*FIRST';
            open STRPRE2;
         endif;

         key.P2MSGFILE = i_jobLogEntry.msgFile;
         key.P2MSGLIB = i_jobLogEntry.msgFLibUsed;
         key.P2MSGID = i_jobLogEntry.msgID;
         chain %kds(key) FSTRPRE2;

         if (not %found());
            key.P2MSGLIB = i_jobLogEntry.msgFLibSpcfd;
            chain %kds(key) FSTRPRE2;
         endif;

         if (%found() and P2FMT = -1);
            return cTrue;
         endif;

         return cFalse;

      /end-free
     P                 e
      *
      * =============================================================
      *  Returns the statement number of the line that has the error.
      * =============================================================
     P getLineNumber...
     P                 b
     D                 pi            20i 0
     D  i_jobLogEntry                      const likeds(JobLog_jobLogEntry_t)
      *
     D key             ds                  likerec(FSTRPRE2: *KEY)
      *
     D qMsgF           ds                  likeds(qObj_t) inz
     D errCode         ds                  likeds(errCode_t) inz
     D rtvm0300_buffer...
     D                 s           8192a
     D rtvm0300        ds                  likeds(rtvm0300_t)
     D                                     based(pRtvm0300)
     D varFmt          ds                  likeds(qmhrtvm_substVarFmt_t)
     D                                     based(pVarFmt)
     D x               s             10i 0
     D offset          s             10i 0
     D length          s             10i 0
      *
     D tmpVal          s            128a
     D rtnVal          s             20i 0
      /free

         if (not %open(STRPRE2));
            open STRPRE2;
         endif;

         key.P2MSGFILE = i_jobLogEntry.msgFile;
         key.P2MSGLIB = i_jobLogEntry.msgFLibUsed;
         key.P2MSGID = i_jobLogEntry.msgID;
         chain %kds(key) FSTRPRE2;

         if (not %found());
            key.P2MSGLIB = i_jobLogEntry.msgFLibSpcfd;
            chain %kds(key) FSTRPRE2;
         endif;

         if (not %found() or P2FMT <= 0);
            return -1;
         endif;

         pRtvm0300 = %addr(rtvm0300_buffer);
         qMsgF.name = i_jobLogEntry.msgFile;
         qMsgF.lib = i_jobLogEntry.msgFLibUsed;
         errCode = f_newApiErrCode(cTrue);
         QMHRTVM(rtvm0300: %size(rtvm0300): 'RTVM0300'
                 : i_jobLogEntry.msgID: qMsgF: '': 0: '*NO': '*NO': errCode);

         if (f_isApiError(errCode));
            return -1;
         endif;

         if (rtvm0300.bytRet <= 0);
            return -1;
         endif;

         if (rtvm0300.lenVarFmtR <= 0);
            return -1;
         endif;

         if (rtvm0300.numVarFmt < P2FMT);
            return -1;
         endif;

         for x = 1 to P2FMT;
            if (x = 1);
               pVarFmt = %addr(rtvm0300) + rtvm0300.ofsVarFmt;
            else;
               offset += varFmt.length;
               pVarFmt += rtvm0300.lenVarFmtE;
               length = varFmt.length;
            endif;
         endfor;

         rtnVal = -1;
         tmpVal = %subst(i_jobLogEntry.rplcData: offset + 1: length);

         select;
         when (varFmt.type = '*BIN');
            cpynv(NUM_Descr_T(T_UNSIGNED: 8: 0)
                  : %addr(rtnVal)
                  : NUM_Descr_T(T_SIGNED: varFmt.length: varFmt.decPos)
                  : %addr(tmpVal));

         when (varFmt.type = '*UBIN');
            cpynv(NUM_Descr_T(T_UNSIGNED: 8: 0)
                  : %addr(rtnVal)
                  : NUM_Descr_T(T_UNSIGNED: varFmt.length: varFmt.decPos)
                  : %addr(tmpVal));

         when (varFmt.type = '*DEC');
            cpynv(NUM_Descr_T(T_UNSIGNED: 8: 0)
                  : %addr(rtnVal)
                  : NUM_Descr_T(T_PACKED: varFmt.length: varFmt.decPos)
                  : %addr(tmpVal));

         endsl;

         return rtnVal;

      /end-free
     P                 e
      *
      * =============================================================
      *  NUM_Descr_T
      *
      *  The following macro is used to prepare the numeric descriptor
      *  (_NUM_Descr_T), used in the cpynv and edit functions. Can also
      *  be used to set the type and length fields of _DPA_Template_T.
      *  The valid values for the parameters are:
      *     type         length             fractional
      *     -----------  -----------------  -------------------------
      *     _T_Signed    2 or 4             0
      *     _T_Float     4 or 8             0
      *     _T_Zoned     1 <= length <= 31  0 <= fractional <= length
      *     _T_Packed    1 <= length <= 31  0 <= fractional <= length
      *     _T_Unsigned  2 or 4             0
      * =============================================================
     P NUM_Descr_T...
     P                 b
     D                 pi            10i 0
     D  i_type                        3i 0 const
     D  i_length                      3i 0 const
     D  i_fractional                  3i 0 const
      *
     D                 DS
     D NUM_Descr                     10i 0 inz
     D  NUM_Descr_24                  3i 0 overlay(NUM_Descr: 1)
     D  NUM_Descr_16                  3i 0 overlay(NUM_Descr: *NEXT)
     D  NUM_Descr_8                   3i 0 overlay(NUM_Descr: *NEXT)
     D  NUM_Descr_0                   3i 0 overlay(NUM_Descr: *NEXT)
      /free

         NUM_Descr_0  = 0;
         NUM_Descr_8  = i_length;
         NUM_Descr_16 = i_fractional;
         NUM_Descr_24 = i_type;

         return NUM_Descr;

      /end-free
     P                 e
      *
]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC5  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC5"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - QSYS Files                  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC5                                         *
      *  Beschreibung  : Start Pre-Processor - QSYS Files                   *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 15.03.2022                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  21.03.2022  Th.Raddatz    Added Member_exists().                   *
      *                                                                     *
      *  26.03.2022  Th.Raddatz    Added stream file support.               *
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
     H NOMAIN BNDDIR('QC2LE')
      /COPY QSTRPREPRC,H_SPEC
      /COPY QSTRPREPRC,COPYRIGHT
      * =================================================================== *
     FSRCFILE_t IF   F  256        DISK    template block(*no)
      *
      * -------------------------------------------------------------
      *  Verwendete Dateien
      * -------------------------------------------------------------
     FSRCFILE                              likefile(SRCFILE_t)
     F                                     extfile(g_useSrcFile.name)
     F                                     extmbr(g_useSrcFile.member)
     F                                     infds(f1)
     F                                     usropn
      *
     FINCLUDE                              likefile(SRCFILE_t)
     F*                                    extfile(g_include.name)
     F*                                    extmbr(g_include.member)
     F                                     extfile(g_useSrcFile.name)
     F                                     extmbr(g_useSrcFile.member)
     F                                     infds(f2)
     F                                     usropn
      *
     D g_useSrcFile    ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
     D f1_srcDtaLen    s             10i 0
      *
     D f1_line_number  s             10i 0 inz(-1)
      *
     D f1              ds                  likeds(fileStatus_t)
      *
     D f2_line_number  s             10i 0 inz(-1)
      *
     D f2              ds                  likeds(fileStatus_t)
      *
      * -------------------------------------------------------------
      *  Type Templates
      * -------------------------------------------------------------
     D fileStatus_t    ds                  qualified template
     D  status                11     15S 0
     D  file                  83     92A
     D  lib                   93    102A
     D  rcdLen               125    126B 0
     D  mbr                  129    138A
     D  nbrOfKey             387    388B 0
     D  rcdNbr               397    400B 0
      *
      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR5
      *
      * -------------------------------------------------------------
      *  Importierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR2
      /copy QBASICS1,PBASICS1
      /copy QSTRPREPRC,TYPES_H
      /copy QSTRPREPRC,QMHRCVPM
      /copy QSTRPREPRC,QMHRMVPM
      *
      * -------------------------------------------------------------
      *  Globale Variablen
      * -------------------------------------------------------------

      * =============================================================
      *  Opens an given source file.
      * =============================================================
     P SourceFile_open...
     P                 b                   export
     D                 pi
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

         QSYSSourceFile_open(SRCFILE: i_lib: i_file: i_mbr);

         f1_line_number = 0;

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the source file.
      * =============================================================
     P SourceFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

         return %open(SRCFILE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the source file.
      * =============================================================
     P SourceFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0
      /free

         if (%open(SRCFILE));
            return f1_line_number;
         else;
            return -1;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the source file.
      * =============================================================
     P SourceFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D dtaLen          s             10i 0
      /free

         dtaLen = QSYSSourceFile_getDtaLength(f1);

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name of the source file.
      * =============================================================
     P SourceFile_getLibrary...
     P                 b                   export
     D                 pi            10a

     D library         s             10a
      /free

         library = QSYSSourceFile_getLibrary(f1);

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the source file.
      * =============================================================
     P SourceFile_getFile...
     P                 b                   export
     D                 pi            10a

     D file            s             10a
      /free

         file = QSYSSourceFile_getFile(f1);

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name of the source file.
      * =============================================================
     P SourceFile_getMember...
     P                 b                   export
     D                 pi            10a

     D member          s             10a
      /free

         member = QSYSSourceFile_getMember(f1);

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the source input file.
      * =============================================================
     P SourceFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if QSYSSourceFile_readLine(SRCFILE: io_srcDta);
            f1_line_number = f1_line_number + 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reads the pervious line from the source input file.
      * =============================================================
     P SourceFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readPrvLine(SRCFILE: io_srcDta));
            f1_line_number = f1_line_number - 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Closes the source file.
      * =============================================================
     P SourceFile_close...
     P                 b                   export
     D                 pi
      /free

         QSYSSourceFile_close(SRCFILE);

      /end-free
     P                 E

      * =============================================================
      *  Opens an given include file.
      * =============================================================
     P IncludeFile_open...
     P                 b                   export
     D                 pi
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

         QSYSSourceFile_open(INCLUDE: i_lib: i_file: i_mbr);

         f2_line_number = 0;

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the include file.
      * =============================================================
     P IncludeFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

         return %open(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the include file.
      * =============================================================
     P IncludeFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0
      /free

         if (%open(INCLUDE));
            return f2_line_number;
         else;
            return -1;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the include file.
      * =============================================================
     P IncludeFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D dtaLen          s             10i 0
      /free

         dtaLen = QSYSSourceFile_getDtaLength(f2);

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name of the include file.
      * =============================================================
     P IncludeFile_getLibrary...
     P                 b                   export
     D                 pi            10a

     D library         s             10a
      /free

         library = QSYSSourceFile_getLibrary(f1);

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the include file.
      * =============================================================
     P IncludeFile_getFile...
     P                 b                   export
     D                 pi            10a

     D file            s             10a
      /free

         file = QSYSSourceFile_getFile(f1);

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name of the include file.
      * =============================================================
     P IncludeFile_getMember...
     P                 b                   export
     D                 pi            10a

     D member          s             10a
      /free

         member = QSYSSourceFile_getMember(f1);

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the include file.
      * =============================================================
     P IncludeFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readLine(INCLUDE: io_srcDta));
            f2_line_number = f2_line_number + 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line from the include file.
      * =============================================================
     P IncludeFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readPrvLine(INCLUDE: io_srcDta));
            f2_line_number = f2_line_number - 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Closes the include file.
      * =============================================================
     P IncludeFile_close...
     P                 b                   export
     D                 pi
      /free

         QSYSSourceFile_close(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Opens a given QSYS file.
      * =============================================================
     P QSYSSourceFile_open...
     P                 b
     D                 pi
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

      *  ... Die Datensatzlnge der Eingabedatei ist zu lang.
      /COPY QSTRPREPRC,PRZ0011
      *  ... Fehler beim ffnen der Quellendatei &2/&1, Teildatei &3.
      /COPY QSTRPREPRC,PRZ0012
      /free

         // Does not work, because CHKOBJ does not resolve members
         // as 'open' does.
         // Member_exists(i_file: i_lib: i_mbr);

         g_useSrcFile.name = %trim(i_lib) + '/' + %trim(i_file);
         g_useSrcFile.member = %trim(i_mbr);

         open(E) i_qsysFile;
         if (%error());
            clear PRZ0012;
            PRZ00121 = i_file;
            PRZ00122 = i_lib;
            PRZ00123 = i_mbr;
            sendMsg(f_newMsg('PRZ0012': PRZ0012: cTYPE_DIAG));
            endAbnormal();
         endif;

         removeFileOpenMessage();

         f1_srcDtaLen =
               f1.rcdLen -
               (%size(ds_srcFile_t.srcSeq) + %size(ds_srcFile_t.srcDat));

         // Prfen der Datensatzlnge
         if (f1.rcdLen > MAX_RCD_LEN);
            clear PRZ0011;
            PRZ00111 = f1.rcdLen;
            PRZ00112 = MAX_RCD_LEN;
            PRZ00113 = f1.lib;
            PRZ00114 = f1.file;
            sendMsg(f_newMsg('PRZ0011': PRZ0011: cTYPE_DIAG));
            endAbnormal();
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of a QSYS source file.
      * =============================================================
     P QSYSSourceFile_getDtaLength...
     P                 b
     D                 pi            10i 0
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D dtaLen          s             10i 0
      /free

         dtaLen =
               i_fileStatus.rcdLen -
               (%size(ds_srcFile_t.srcSeq) + %size(ds_srcFile_t.srcDat));

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getLibrary...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D library         s             10a
      /free

         library = i_fileStatus.lib;

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getFile...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D file            s             10a
      /free

         file = i_fileStatus.file;

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getMember...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D member          s             10a
      /free

         member = i_fileStatus.mbr;

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads a line of a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_readLine...
     P                 b
     D                 pi              n
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D ds_srcFile      ds                  likeds(ds_srcFile_t) inz
      /free

         read i_qsysFile ds_srcFile;
         if (%eof());
            io_srcDta = '';
            return cFalse;
         endif;

         io_srcDta = %subst(ds_srcFile.srcDta: 1: f1_srcDtaLen);

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line of a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_readPrvLine...
     P                 b
     D                 pi              n
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D ds_srcFile      ds                  likeds(ds_srcFile_t) inz
      /free

         readp i_qsysFile ds_srcFile;
         if (%eof());
            io_srcDta = '';
            return cFalse;
         endif;

         io_srcDta = %subst(ds_srcFile.srcDta: 1: f1_srcDtaLen);

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Closes a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_close...
     P                 b
     D                 pi
     D  i_qsysFile                                likefile(SRCFILE_t)
      /free

         if (not %open(i_qsysFile));
            return;
         endif;

         close i_qsysFile;

      /end-free
     P                 E

      *===============================================================*
      *  Remove file open message:
      *  CPF4011 - Buffer length longer than record for member
      *===============================================================*
     P removeFileOpenMessage...
     P                 b
     D                 pi
      *
     D rcvm0100        ds                  likeds(rcvm0100_t)
     D errCode         ds                  likeds(errCode_t)
      /free

       errCode = f_newApiErrCode(cTrue); // ignore errors

       QMHRCVPM(rcvm0100: %size(rcvm0100): 'RCVM0100': '*': 1
                : '*ANY': '': 0: '*SAME': errCode);

       if (not f_isApiError(errCode) and rcvm0100.msgID = 'CPF4011');
          QMHRMVPM('*' : 1: rcvm0100.msgKey: '*BYKEY': errCode);
       endif;


      /end-free
     P                 E

      *===============================================================*
      *  Check existence of a source member.
      *===============================================================*
     P Member_exists...
     P                 b
     D                 pi
     D  i_file                       10a   const
     D  i_lib                        10a   const
     D  i_mbr                        10a   const
      *
     D rc              s             10i 0
      *
      *  system -- Execute a Command
      *     Return value       Meaning
      *     ----------------   --------------------------------------
      *     0                  the command is successful
      *     -1                 for a NULL pointer
      *     1                  the command fails
     d system          pr            10i 0 extproc('system')
     d  i_clCommand                    *   value options(*string)
      *
      *  Nachrichten
      *  ... Bibliothek &1 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0035
      *  ... Datei &1 in Bibliothek &2 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0036
      *  ... Teildatei &3 von Datei &1 in Bibliothek &2 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0037
      /free

         if (%subst(i_lib: 1: 1) <> '*');
            rc = system('CHKOBJ OBJ(' + %trim(i_lib) + ') OBJTYPE(*LIB)');
            if (rc <> 0);
               clear PRZ0035;
               PRZ00351 = i_lib;
               sendMsg(f_newMsg('PRZ0035': PRZ0035: cTYPE_ESCAPE));
            endif;
         endif;

         rc = system('CHKOBJ OBJ(' + %trim(i_lib) + '/' +
                                     %trim(i_file) + ') OBJTYPE(*FILE)');
         if (rc <> 0);
            clear PRZ0036;
            PRZ00361 = i_file;
            PRZ00362 = i_lib;
            sendMsg(f_newMsg('PRZ0036': PRZ0036: cTYPE_ESCAPE));
         endif;

         rc = system('CHKOBJ OBJ(' + %trim(i_lib) + '/' +
                                     %trim(i_file) + ') OBJTYPE(*FILE) ' +
                                     'MBR(' + %trim(i_mbr) + ')');
         if (rc <> 0);
            clear PRZ0037;
            PRZ00371 = i_file;
            PRZ00372 = i_lib;
            PRZ00373 = i_mbr;
            sendMsg(f_newMsg('PRZ0037': PRZ0037: cTYPE_ESCAPE));
         endif;

      /end-free
     P                 E

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC5  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC5"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - QSYS Files                  "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC5                                         *
      *  Beschreibung  : Start Pre-Processor - QSYS Files                   *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 15.03.2022                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  21.03.2022  Th.Raddatz    Added Member_exists().                   *
      *                                                                     *
      *  26.03.2022  Th.Raddatz    Added stream file support.               *
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
     H NOMAIN BNDDIR('QC2LE')
      /COPY QSTRPREPRC,H_SPEC
      /COPY QSTRPREPRC,COPYRIGHT
      * =================================================================== *
     FSRCFILE_t IF   F  256        DISK    template block(*no)
      *
      * -------------------------------------------------------------
      *  Verwendete Dateien
      * -------------------------------------------------------------
     FSRCFILE                              likefile(SRCFILE_t)
     F                                     extfile(g_useSrcFile.name)
     F                                     extmbr(g_useSrcFile.member)
     F                                     infds(f1)
     F                                     usropn
      *
     FINCLUDE                              likefile(SRCFILE_t)
     F*                                    extfile(g_include.name)
     F*                                    extmbr(g_include.member)
     F                                     extfile(g_useSrcFile.name)
     F                                     extmbr(g_useSrcFile.member)
     F                                     infds(f2)
     F                                     usropn
      *
     D g_useSrcFile    ds                  qualified inz
     D  name                         21a   varying
     D  member                       10a   varying
      *
     D f1_srcDtaLen    s             10i 0
      *
     D f1_line_number  s             10i 0 inz(-1)
      *
     D f1              ds                  likeds(fileStatus_t)
      *
     D f2_line_number  s             10i 0 inz(-1)
      *
     D f2              ds                  likeds(fileStatus_t)
      *
      * -------------------------------------------------------------
      *  Type Templates
      * -------------------------------------------------------------
     D fileStatus_t    ds                  qualified template
     D  status                11     15S 0
     D  file                  83     92A
     D  lib                   93    102A
     D  rcdLen               125    126B 0
     D  mbr                  129    138A
     D  nbrOfKey             387    388B 0
     D  rcdNbr               397    400B 0
      *
      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR5
      *
      * -------------------------------------------------------------
      *  Importierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR2
      /copy QBASICS1,PBASICS1
      /copy QSTRPREPRC,TYPES_H
      /copy QSTRPREPRC,QMHRCVPM
      /copy QSTRPREPRC,QMHRMVPM
      *
      * -------------------------------------------------------------
      *  Globale Variablen
      * -------------------------------------------------------------

      * =============================================================
      *  Opens an given source file.
      * =============================================================
     P SourceFile_open...
     P                 b                   export
     D                 pi
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

         QSYSSourceFile_open(SRCFILE: i_lib: i_file: i_mbr);

         f1_line_number = 0;

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the source file.
      * =============================================================
     P SourceFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

         return %open(SRCFILE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the source file.
      * =============================================================
     P SourceFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0
      /free

         if (%open(SRCFILE));
            return f1_line_number;
         else;
            return -1;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the source file.
      * =============================================================
     P SourceFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D dtaLen          s             10i 0
      /free

         dtaLen = QSYSSourceFile_getDtaLength(f1);

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name of the source file.
      * =============================================================
     P SourceFile_getLibrary...
     P                 b                   export
     D                 pi            10a

     D library         s             10a
      /free

         library = QSYSSourceFile_getLibrary(f1);

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the source file.
      * =============================================================
     P SourceFile_getFile...
     P                 b                   export
     D                 pi            10a

     D file            s             10a
      /free

         file = QSYSSourceFile_getFile(f1);

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name of the source file.
      * =============================================================
     P SourceFile_getMember...
     P                 b                   export
     D                 pi            10a

     D member          s             10a
      /free

         member = QSYSSourceFile_getMember(f1);

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the source input file.
      * =============================================================
     P SourceFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if QSYSSourceFile_readLine(SRCFILE: io_srcDta);
            f1_line_number = f1_line_number + 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reads the pervious line from the source input file.
      * =============================================================
     P SourceFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readPrvLine(SRCFILE: io_srcDta));
            f1_line_number = f1_line_number - 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Closes the source file.
      * =============================================================
     P SourceFile_close...
     P                 b                   export
     D                 pi
      /free

         QSYSSourceFile_close(SRCFILE);

      /end-free
     P                 E

      * =============================================================
      *  Opens an given include file.
      * =============================================================
     P IncludeFile_open...
     P                 b                   export
     D                 pi
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

         QSYSSourceFile_open(INCLUDE: i_lib: i_file: i_mbr);

         f2_line_number = 0;

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the include file.
      * =============================================================
     P IncludeFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

         return %open(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the include file.
      * =============================================================
     P IncludeFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0
      /free

         if (%open(INCLUDE));
            return f2_line_number;
         else;
            return -1;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the include file.
      * =============================================================
     P IncludeFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D dtaLen          s             10i 0
      /free

         dtaLen = QSYSSourceFile_getDtaLength(f2);

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name of the include file.
      * =============================================================
     P IncludeFile_getLibrary...
     P                 b                   export
     D                 pi            10a

     D library         s             10a
      /free

         library = QSYSSourceFile_getLibrary(f1);

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the include file.
      * =============================================================
     P IncludeFile_getFile...
     P                 b                   export
     D                 pi            10a

     D file            s             10a
      /free

         file = QSYSSourceFile_getFile(f1);

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name of the include file.
      * =============================================================
     P IncludeFile_getMember...
     P                 b                   export
     D                 pi            10a

     D member          s             10a
      /free

         member = QSYSSourceFile_getMember(f1);

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the include file.
      * =============================================================
     P IncludeFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readLine(INCLUDE: io_srcDta));
            f2_line_number = f2_line_number + 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line from the include file.
      * =============================================================
     P IncludeFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

         if (QSYSSourceFile_readPrvLine(INCLUDE: io_srcDta));
            f2_line_number = f2_line_number - 1;
            return cTrue;
         else;
            return cFalse;
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Closes the include file.
      * =============================================================
     P IncludeFile_close...
     P                 b                   export
     D                 pi
      /free

         QSYSSourceFile_close(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Opens a given QSYS file.
      * =============================================================
     P QSYSSourceFile_open...
     P                 b
     D                 pi
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  i_lib                              const  like(lib_t)
     D  i_file                             const  like(file_t)
     D  i_mbr                              const  like(mbr_t)
      /free

      *  ... Die Datensatzlnge der Eingabedatei ist zu lang.
      /COPY QSTRPREPRC,PRZ0011
      *  ... Fehler beim ffnen der Quellendatei &2/&1, Teildatei &3.
      /COPY QSTRPREPRC,PRZ0012
      /free

         // Does not work, because CHKOBJ does not resolve members
         // as 'open' does.
         // Member_exists(i_file: i_lib: i_mbr);

         g_useSrcFile.name = %trim(i_lib) + '/' + %trim(i_file);
         g_useSrcFile.member = %trim(i_mbr);

         open(E) i_qsysFile;
         if (%error());
            clear PRZ0012;
            PRZ00121 = i_file;
            PRZ00122 = i_lib;
            PRZ00123 = i_mbr;
            sendMsg(f_newMsg('PRZ0012': PRZ0012: cTYPE_DIAG));
            endAbnormal();
         endif;

         removeFileOpenMessage();

         f1_srcDtaLen =
               f1.rcdLen -
               (%size(ds_srcFile_t.srcSeq) + %size(ds_srcFile_t.srcDat));

         // Prfen der Datensatzlnge
         if (f1.rcdLen > MAX_RCD_LEN);
            clear PRZ0011;
            PRZ00111 = f1.rcdLen;
            PRZ00112 = MAX_RCD_LEN;
            PRZ00113 = f1.lib;
            PRZ00114 = f1.file;
            sendMsg(f_newMsg('PRZ0011': PRZ0011: cTYPE_DIAG));
            endAbnormal();
         endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of a QSYS source file.
      * =============================================================
     P QSYSSourceFile_getDtaLength...
     P                 b
     D                 pi            10i 0
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D dtaLen          s             10i 0
      /free

         dtaLen =
               i_fileStatus.rcdLen -
               (%size(ds_srcFile_t.srcSeq) + %size(ds_srcFile_t.srcDat));

         return dtaLen;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getLibrary...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D library         s             10a
      /free

         library = i_fileStatus.lib;

         return library;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getFile...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D file            s             10a
      /free

         file = i_fileStatus.file;

         return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the member name if a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_getMember...
     P                 b
     D                 pi            10a
     D  i_fileStatus                       const  likeds(fileStatus_t)

     D member          s             10a
      /free

         member = i_fileStatus.mbr;

         return member;

      /end-free
     P                 E

      * =============================================================
      *  Reads a line of a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_readLine...
     P                 b
     D                 pi              n
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D ds_srcFile      ds                  likeds(ds_srcFile_t) inz
      /free

         read i_qsysFile ds_srcFile;
         if (%eof());
            io_srcDta = '';
            return cFalse;
         endif;

         io_srcDta = %subst(ds_srcFile.srcDta: 1: f1_srcDtaLen);

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line of a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_readPrvLine...
     P                 b
     D                 pi              n
     D  i_qsysFile                                likefile(SRCFILE_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      *
     D ds_srcFile      ds                  likeds(ds_srcFile_t) inz
      /free

         readp i_qsysFile ds_srcFile;
         if (%eof());
            io_srcDta = '';
            return cFalse;
         endif;

         io_srcDta = %subst(ds_srcFile.srcDta: 1: f1_srcDtaLen);

         return cTrue;

      /end-free
     P                 E

      * =============================================================
      *  Closes a given QSYS source file.
      * =============================================================
     P QSYSSourceFile_close...
     P                 b
     D                 pi
     D  i_qsysFile                                likefile(SRCFILE_t)
      /free

         if (not %open(i_qsysFile));
            return;
         endif;

         close i_qsysFile;

      /end-free
     P                 E

      *===============================================================*
      *  Remove file open message:
      *  CPF4011 - Buffer length longer than record for member
      *===============================================================*
     P removeFileOpenMessage...
     P                 b
     D                 pi
      *
     D rcvm0100        ds                  likeds(rcvm0100_t)
     D errCode         ds                  likeds(errCode_t)
      /free

       errCode = f_newApiErrCode(cTrue); // ignore errors

       QMHRCVPM(rcvm0100: %size(rcvm0100): 'RCVM0100': '*': 1
                : '*ANY': '': 0: '*SAME': errCode);

       if (not f_isApiError(errCode) and rcvm0100.msgID = 'CPF4011');
          QMHRMVPM('*' : 1: rcvm0100.msgKey: '*BYKEY': errCode);
       endif;


      /end-free
     P                 E

      *===============================================================*
      *  Check existence of a source member.
      *===============================================================*
     P Member_exists...
     P                 b
     D                 pi
     D  i_file                       10a   const
     D  i_lib                        10a   const
     D  i_mbr                        10a   const
      *
     D rc              s             10i 0
      *
      *  system -- Execute a Command
      *     Return value       Meaning
      *     ----------------   --------------------------------------
      *     0                  the command is successful
      *     -1                 for a NULL pointer
      *     1                  the command fails
     d system          pr            10i 0 extproc('system')
     d  i_clCommand                    *   value options(*string)
      *
      *  Nachrichten
      *  ... Bibliothek &1 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0035
      *  ... Datei &1 in Bibliothek &2 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0036
      *  ... Teildatei &3 von Datei &1 in Bibliothek &2 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0037
      /free

         if (%subst(i_lib: 1: 1) <> '*');
            rc = system('CHKOBJ OBJ(' + %trim(i_lib) + ') OBJTYPE(*LIB)');
            if (rc <> 0);
               clear PRZ0035;
               PRZ00351 = i_lib;
               sendMsg(f_newMsg('PRZ0035': PRZ0035: cTYPE_ESCAPE));
            endif;
         endif;

         rc = system('CHKOBJ OBJ(' + %trim(i_lib) + '/' +
                                     %trim(i_file) + ') OBJTYPE(*FILE)');
         if (rc <> 0);
            clear PRZ0036;
            PRZ00361 = i_file;
            PRZ00362 = i_lib;
            sendMsg(f_newMsg('PRZ0036': PRZ0036: cTYPE_ESCAPE));
         endif;

         rc = system('CHKOBJ OBJ(' + %trim(i_lib) + '/' +
                                     %trim(i_file) + ') OBJTYPE(*FILE) ' +
                                     'MBR(' + %trim(i_mbr) + ')');
         if (rc <> 0);
            clear PRZ0037;
            PRZ00371 = i_file;
            PRZ00372 = i_lib;
            PRZ00373 = i_mbr;
            sendMsg(f_newMsg('PRZ0037': PRZ0037: cTYPE_ESCAPE));
         endif;

      /end-free
     P                 E

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRC6  type RPGLE - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRC6"
mbrtype =  "RPGLE     "
mbrtext =  "Start Pre-Processor - IFS Files                   "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
      * =================================================================== *
      *                                                                     *
      *  Kurzdokumentation :                                                *
      *                                                                     *
      *  Bereich . . . : STRPREPRC                                          *
      *  Objekt  . . . : STRPREPRC5                                         *
      *  Beschreibung  : Start Pre-Processor - IFS Files                    *
      *  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      *
      *  Datum . . . . : 16.03.2022                                         *
      *                                                                     *
      * =================================================================== *
      *                                                                     *
      *  This software is free software, you can redistribute it and/or     *
      *  modify it under the terms of the GNU General Public License (GPL)  *
      *  as published by the Free Software Foundation.                      *
      *                                                                     *
      *  See GNU General Public License for details.                        *
      *          http://www.opensource.org                                  *
      *          http://www.opensource.org/licenses/gpl-license.html        *
      *                                                                     *
      *=====================================================================*
      *  History:                                                           *
      *                                                                     *
      *  Datum       Name          nderung                                 *
      *  ----------  ------------  ---------------------------------------  *
      *  26.03.2022  Th.Raddatz    Added stream file support.               *
      *                                                                     *
      * =================================================================== *
      * >>PRE-COMPILER<<                                                    *
      *   >>CRTCMD<< CRTRPGMOD    MODULE(&LI/&OB) +                         *
      *                           SRCFILE(&SL/&SF) SRCMBR(&SM);             *
      *   >>IMPORTANT<<                                                     *
      *     >>PARM<< TRUNCNBR(*NO);                                         *
      *     >>PARM<< DBGVIEW(*LIST);                                        *
      *     >>PARM<< OPTION(*EVENTF);                                       *
      *   >>END-IMPORTANT<<                                                 *
      *   >>EXECUTE<<                                                       *
      * >>END-PRE-COMPILER<<                                                *
      * =================================================================== *
     H NOMAIN BNDDIR('QC2LE')
      /COPY QSTRPREPRC,H_SPEC
      /COPY QSTRPREPRC,COPYRIGHT
      * =================================================================== *
     D SRCFILE         ds                  likeds(hStmf_t) inz(*likeds)
     D INCLUDE         ds                  likeds(hStmf_t) inz(*likeds)

      * -------------------------------------------------------------
      *  Exportierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR6

      * -------------------------------------------------------------
      *  Importierte Prototypen
      * -------------------------------------------------------------
      /copy QSTRPREPRC,PSTRPREPR2
      /copy QBASICS1,PBASICS1
      /copy QSTRPREPRC,TYPES_H

      * -------------------------------------------------------------
      *  Type Templates
      * -------------------------------------------------------------
     D hStmf_t         ds                  qualified template
     D  fd                                 like(fd_t) inz(-1)
     D  isFound                        n   inz(cFalse)
     D  readOffset                   10i 0
     D  currLine                           likeds(line_t) inz
     D  buffSize                     10i 0 inz(0)
     D  buffPos                      10i 0 inz(0)
     D  readDirection                10a   varying inz
     D  folder                             like(path_t) inz
     D  stmf                               like(path_t) inz
     D  buffer                     4096a   inz
     D  prvLines                           likeds(lines_t) inz

      // required for 7.1, because '%elem(io_hStmf.prvLines.line)'
      // does not work. (available since 7.3)
     D NUM_LINES       c                   250

     D lines_t         ds                  qualified template
     D  i                            10i 0
     D  count                        10i 0 inz
     D  line                               likeds(line_t) dim(NUM_LINES) inz

     D line_t          ds                  qualified template
     D  lineNbr                      10i 0 inz
     D**startPos                     10i 0 inz
     D  length                       10i 0 inz
     D  data                               like(srcDta_t)

      *  Exported only for iRPGUnit unit tests.
      *  Must match size of hStmt.buffer.
     D BUFFER_SIZE     s             10i 0 inz(4096) export
      * -------------------------------------------------------------
      *  Global Fields and Constants
      * -------------------------------------------------------------
     D CR              c                   x'0D'
     D LF              c                   x'25'

     D RD_UNDEFINED    c                   '*N'
     D RD_NEXT         c                   'NEXT'
     D RD_PREVIOUS     c                   'PREV'

      * =============================================================
      *  Opens an given source file.
      * =============================================================
     P SourceStreamFile_open...
     P                 b                   export
     D                 pi
     D  i_stmf                             const  like(path_t)
      /free

       SRCFILE = IFSSourceStreamFile_open(i_stmf);

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the source file.
      * =============================================================
     P SourceStreamFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

       return IFSSourceStreamFile_isOpen(SRCFILE);


      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the source file.
      * =============================================================
     P SourceStreamFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0

     D lineNbr         s             10i 0
      /free

       lineNbr = IFSSourceStreamFile_getLineNbr(SRCFILE);

       return lineNbr;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the source file.
      * =============================================================
     P SourceStreamFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D lineLength      s             10i 0
      /free

       lineLength = IFSSourceStreamFile_getDtaLength(SRCFILE);

       return lineLength;

      /end-free
     P                 E

      * =============================================================
      *  Returns the folder name of the source file.
      * =============================================================
     P SourceStreamFile_getFolder...
     P                 b                   export
     D                 pi                  like(path_t)

     D folder          s                   like(path_t)
      /free

       folder = IFSSourceStreamFile_getFolder(SRCFILE);

       return folder;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the source file.
      * =============================================================
     P SourceStreamFile_getFile...
     P                 b                   export
     D                 pi                  like(path_t)

     D file            s                   like(path_t)
      /free

       file = IFSSourceStreamFile_getFile(SRCFILE);

       return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the path (folder + file name) of the source file.
      * =============================================================
     P SourceStreamFile_getPath...
     P                 b                   export
     D                 pi                  like(path_t)

     D path            s                   like(path_t)
      /free

       path = IFSSourceStreamFile_getPath(SRCFILE);

       return path;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the source input file.
      * =============================================================
     P SourceStreamFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

       return IFSSourceStreamFile_readLine(SRCFILE: io_srcDta);

      /end-free
     P                 E

      * =============================================================
      *  Reads the pervious line from the source input file.
      * =============================================================
     P SourceStreamFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

       return IFSSourceStreamFile_readPrvLine(SRCFILE: io_srcDta);

      /end-free
     P                 E

      * =============================================================
      *  Closes the source file.
      * =============================================================
     P SourceStreamFile_close...
     P                 b                   export
     D                 pi
      /free

       IFSSourceStreamFile_close(SRCFILE);

      /end-free
     P                 E

      * =============================================================
      *  Opens an given include file.
      * =============================================================
     P IncludeStreamFile_open...
     P                 b                   export
     D                 pi
     D  i_stmf                             const  like(path_t)
      /free

       INCLUDE = IFSSourceStreamFile_open(i_stmf);

      /end-free
     P                 E

      * =============================================================
      *  Returns the open status of the include file.
      * =============================================================
     P IncludeStreamFile_isOpen...
     P                 b                   export
     D                 pi              n
      /free

       return IFSSourceStreamFile_isOpen(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of the include file.
      *  Special values:
      *   -1   stream file not open
      *    0   end of file
      * =============================================================
     P IncludeStreamFile_getLineNbr...
     P                 b                   export
     D                 pi            10i 0
      /free

       return IFSSourceStreamFile_getLineNbr(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of the include file.
      * =============================================================
     P IncludeStreamFile_getDtaLength...
     P                 b                   export
     D                 pi            10i 0

     D lineLength      s             10i 0
      /free

       lineLength = IFSSourceStreamFile_getDtaLength(INCLUDE);

       return lineLength;

      /end-free
     P                 E

      * =============================================================
      *  Returns the folder name of the include file.
      * =============================================================
     P IncludeStreamFile_getFolder...
     P                 b                   export
     D                 pi                  like(path_t)

     D folder          s                   like(path_t)
      /free

       folder = IFSSourceStreamFile_getFolder(INCLUDE);

       return folder;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of the include file.
      * =============================================================
     P IncludeStreamFile_getFile...
     P                 b                   export
     D                 pi                  like(path_t)

     D file            s                   like(path_t)
      /free

       file = IFSSourceStreamFile_getFile(INCLUDE);

       return file;

      /end-free
     P                 E

      * =============================================================
      *  Returns the path (folder + file name) of the include file.
      * =============================================================
     P IncludeStreamFile_getPath...
     P                 b                   export
     D                 pi                  like(path_t)

     D path            s                   like(path_t)
      /free

       path = IFSSourceStreamFile_getPath(INCLUDE);

       return path;

      /end-free
     P                 E

      * =============================================================
      *  Reads the next line from the include file.
      * =============================================================
     P IncludeStreamFile_readLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

       return IFSSourceStreamFile_readLine(INCLUDE: io_srcDta);

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line from the include file.
      * =============================================================
     P IncludeStreamFile_readPrvLine...
     P                 b                   export
     D                 pi              n
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)
      /free

       return IFSSourceStreamFile_readPrvLine(INCLUDE: io_srcDta);

      /end-free
     P                 E

      * =============================================================
      *  Closes the include file.
      * =============================================================
     P IncludeStreamFile_close...
     P                 b                   export
     D                 pi
      /free

       IFSSourceStreamFile_close(INCLUDE);

      /end-free
     P                 E

      * =============================================================
      *  Opens a given QSYS file.
      * =============================================================
     P IFSSourceStreamFile_open...
     P                 b
     D                 pi                         likeds(hStmf_t)
     D  i_stmf                             const  like(path_t) options(*trim)

     D hStmf           ds                  likeds(hStmf_t) inz
     D fd              s                   like(fd_t)
     D errorNbr        s             10i 0
     D errorText       s                   like(cErrorText_t)
      /free

      *  ... Datei &1 kann nicht geffnet werden.
      /COPY QSTRPREPRC,PRZ0041
      /free

       reset hStmf;
       hStmf.fd = cERROR;

       fd = open(i_stmf: O_RDONLY + O_TEXTDATA + O_CCSID: 0: 0);

       if (fd < 0);
         errorNbr = C_getError(errorText);
         clear PRZ0041;
         PRZ00411 = i_stmf;
         PRZ00412 = %char(errorNbr);
         PRZ00413 = errorText;
         sendMsg(f_newMsg('PRZ0041': PRZ0041: cTYPE_DIAG));
         endAbnormal();
       endif;

       hStmf.fd = fd;
       hStmf.readDirection = RD_UNDEFINED;
       hStmf.folder = Path_getFolder(i_stmf);
       hStmf.stmf = Path_getFile(i_stmf);

       return hStmf;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of a IFS source file.
      * =============================================================
     P IFSSourceStreamFile_isOpen...
     P                 b
     D                 pi              n
     D  i_hStmf                            const  likeds(hStmf_t)
      /free

       if (i_hStmf.fd = cERROR);
         return cFalse;
       else;
         return cTrue;
       endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the current line number of a IFS source file.
      * =============================================================
     P IFSSourceStreamFile_getLineNbr...
     P                 b
     D                 pi            10i 0
     D  i_hStmf                            const  likeds(hStmf_t)

     D lineNbr         s             10i 0
      /free

       if (not IFSSourceStreamFile_isOpen(i_hStmf));
         return -1;
       endif;

       if (not i_hStmf.isFound);
         return 0;
       endif;

       select;
       when (i_hStmf.readDirection = RD_NEXT);
         lineNbr = i_hStmf.currLine.lineNbr;
       when (i_hStmf.readDirection = RD_PREVIOUS);
         return i_hStmf.prvLines.line(i_hStmf.prvLines.i).lineNbr;
       other;
         // read direction is undefined
         return 0;
       endsl;

       return lineNbr;

      /end-free
     P                 E

      * =============================================================
      *  Returns the length of the data field of a IFS source file.
      * =============================================================
     P IFSSourceStreamFile_getDtaLength...
     P                 b
     D                 pi            10i 0
     D  i_hStmf                            const  likeds(hStmf_t)
      /free

       if (not i_hStmf.isFound);
         return 0;
       endif;

       select;
       when (i_hStmf.readDirection = RD_NEXT);
         return i_hStmf.currLine.length;
       when (i_hStmf.readDirection = RD_PREVIOUS);
         return i_hStmf.prvLines.line(i_hStmf.prvLines.i).length;
       other;
         // read direction is undefined
         return 0;
       endsl;

      /end-free
     P                 E

      * =============================================================
      *  Returns the library name of a given IFS source file.
      * =============================================================
     P IFSSourceStreamFile_getFolder...
     P                 b
     D                 pi                  like(path_t)
     D  i_hStmf                            const  likeds(hStmf_t)
      /free

       return i_hStmf.folder;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of a given IFS source file.
      * =============================================================
     P IFSSourceStreamFile_getFile...
     P                 b
     D                 pi                  like(path_t)
     D  i_hStmf                            const  likeds(hStmf_t)
     D
      /free

       return i_hStmf.stmf;

      /end-free
     P                 E

      * =============================================================
      *  Returns the path (folder + file name) of a given IFS source file.
      * =============================================================
     P IFSSourceStreamFile_getPath...
     P                 b
     D                 pi                  like(path_t)
     D  i_hStmf                            const  likeds(hStmf_t)
     D
      /free

       if (f_endsWith('/': i_hStmf.folder));
         return i_hStmf.folder + i_hStmf.stmf;
       else;
         return i_hStmf.folder + '/' + i_hStmf.stmf;
       endif;

      /end-free
     P                 E


      * =============================================================
      *  Reads a line of a given IFS source file.
      *  Linefeed rules:
      *    LF   - line feed
      *    CR   - line feed
      *    CRLF - line feed
      *    LFCR - two line feeds (second one is an empty line)
      *  This line feed rules are the rules used by Notepad++.
      * =============================================================
     P IFSSourceStreamFile_readLine...
     P                 b
     D                 pi              n
     D  io_hStmf                                  likeds(hStmf_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

     D bytes           s             10i 0
     D char            s              1a
     D isFound         s               n

      // line must match the size of ds_srcFile_t.srcDta
     D line            s            244a   varying
     D linefeed        s              1a   varying
     D prvCurrLine     ds                  likeds(line_t)
     D i               s             10i 0

      //  ... MSG: Die Datensatzlnge der IFS Datei ist zu lang.
      /COPY QSTRPREPRC,PRZ0042
      /free

       io_srcDta = '';
       isFound = cFalse;

       if (io_hStmf.readDirection <> RD_NEXT);
         io_hStmf.readDirection = RD_NEXT;
       endif;

       line = '';
       linefeed = '';

       prvCurrLine = io_hStmf.currLine;

       if (io_hStmf.prvLines.i > 0);

         io_hStmf.prvLines.i -= 1;

         if (io_hStmf.prvLines.i > 0);
           io_srcDta = io_hStmf.prvLines.line(io_hStmf.prvLines.i).data;
         else;
           io_srcDta = io_hStmf.currLine.data;
         endif;

         isFound = cTrue;

         return isFound;
       endif;

       dow '1';

         if (io_hStmf.buffPos > io_hStmf.buffSize);
           // buffer exhausted, clear buffer
           io_hStmf.buffSize = 0;
           io_hStmf.buffPos = 0;
         endif;

         // load buffer, if empty
         if (io_hStmf.buffSize = 0);
           bytes = read(io_hStmf.fd: %addr(io_hStmf.buffer): BUFFER_SIZE);
           if (bytes > 0);
             io_hStmf.buffSize = bytes;
             io_hStmf.buffPos = 1;
           else;
             // EOF, clear buffer
             io_hStmf.buffSize = 0;
             io_hStmf.buffPos = 0;
           endif;
         endif;

         if (io_hStmf.buffSize = 0);
           leave;
         endif;

         isFound = cTrue;

         char = %subst(io_hStmf.buffer: io_hStmf.buffPos: 1);

         if (char = CR or char = LF);
           // consume up to 2 linefeed characters:
           // LF, CR, CRlf and LFCR
           select;
           when (%len(linefeed) = 0);
             linefeed = linefeed + char;
             io_hStmf.buffPos += 1; // consume character
             io_hStmf.readOffset += 1;
             if (char = LF);
               leave; // return line due to the first LF character
             endif;
           when (%len(linefeed) = 1 and char <> linefeed);
             linefeed = linefeed + char;
             io_hStmf.buffPos += 1; // consume character
             io_hStmf.readOffset += 1;
             leave; // return line due to a 2-byte CRLF line ending
           other;
             leave; // return line due more than 2 linefeeds characters in a row
           endsl;
         else;
           if (linefeed <> '');
             leave; // return line due to a 1-char CR linefeed
           else;
             line = line + char;
             io_hStmf.buffPos += 1; // consume character
             io_hStmf.readOffset += 1;
           endif;
         endif;

       enddo;

       if (isFound);

         // Check record length
         if (%len(line) > MAX_RCD_LEN);
            clear PRZ0042;
            PRZ00421 = %len(line);
            PRZ00422 = MAX_RCD_LEN;
            PRZ00423 = IFSSourceStreamFile_getFolder(io_hStmf);
            PRZ00424 = IFSSourceStreamFile_getFile(io_hStmf);
            sendMsg(f_newMsg('PRZ0042': PRZ0042: cTYPE_DIAG));
            endAbnormal();
         endif;

         if (io_hStmf.currLine.lineNbr > 0);
           for i = io_hStmf.prvLines.count downto 2;
             io_hStmf.prvLines.line(i) = io_hStmf.prvLines.line(i - 1);
           endfor;

           if (io_hStmf.prvLines.count < NUM_LINES);
             io_hStmf.prvLines.count += 1;
           endif;

           io_hStmf.prvLines.line(1) = prvCurrLine;
         endif;

         // io_hStmf.currLine.startPos = io_hStmf.readOffset
         //                              - %len(line) - %len(lineFeed) + 1;
         io_hStmf.currLine.lineNbr += 1;
         io_hStmf.currLine.length = %len(line);
         io_hStmf.currLine.data = line;
       endif;

       io_hStmf.isFound = isFound;
       io_srcDta = line;

       return isFound;

      /end-free
     P                 E

      * =============================================================
      *  Reads the previous line of a given IFS source file.
      * =============================================================
     P IFSSourceStreamFile_readPrvLine...
     P                 b
     D                 pi              n
     D  io_hStmf                                  likeds(hStmf_t)
     D  io_srcDta                                 like(ds_srcFile_t.srcDta)

     D isFound         s               n
      /free

       io_srcDta = '';
       isFound = cFalse;

       if (io_hStmf.readDirection <> RD_PREVIOUS);
         io_hStmf.readDirection = RD_PREVIOUS;
       endif;

       if (io_hStmf.prvLines.i <= io_hStmf.prvLines.count);

         io_hStmf.prvLines.i += 1;

         if (io_hStmf.prvLines.i <= io_hStmf.prvLines.count);
           io_srcDta = io_hStmf.prvLines.line(io_hStmf.prvLines.i).data;
           isFound = cTrue;
         endif;

       endif;

       io_hStmf.isFound = isFound;

       return isFound;

      /end-free
     P                 E

      * =============================================================
      *  Closes a given IFS source file.
      * =============================================================
     P IFSSourceStreamFile_close...
     P                 b
     D                 pi
     D  io_hStmf                                  likeds(hStmf_t)

     D hStmf           ds                  likeds(io_hStmf)
      /free

       if (not IFSSourceStreamFile_isOpen(io_hStmf));
         return;
       endif;

       callp close(io_hStmf.fd);

       reset hStmf;
       hStmf.fd = cERROR;
       hStmf.readDirection = RD_UNDEFINED;

       io_hStmf = hStmf;

      /end-free
     P                 E

      * =============================================================
      *  Returns the folder name of a given path.
      * =============================================================
     P Path_getFolder...
     P                 b                   export
     D                 pi                  like(path_t)
     D  i_path                             const like(path_t) options(*trim)

     D folder          s                   like(path_t)
     D x               s             10i 0
     D y               s             10i 0
     D length          s             10i 0
      /free

       if (isDirectory(i_path));
         // ... then it does not contain a file name
         folder = i_path;
       else;
         // ... else search for the last delimiter of the path
         for x = 1 to %len(i_path);
           y = %scan(%subst(i_path: x: 1): cDELIMITER);
           if (y > 0);
             length = x;
           endif;
         endfor;
         if (length > 0);
           folder = %subst(i_path: 1: length);
         endif;
       endif;

       folder = f_replace('\': '/': folder);

       return folder;

      /end-free
     P                 E

      * =============================================================
      *  Returns the file name of a given path.
      * =============================================================
     P Path_getFile...
     P                 b                   export
     D                 pi                  like(path_t)
     D  i_path                             const  like(path_t) options(*trim)

     D fileName        s                   like(path_t)

     D pToken          s               *   inz
     D token           s                   like(fileName)  inz
      /free

       if (isDirectory(i_path));
         // ... then it does not contain a file name
         fileName = '';
       else;
         // ... else search for the last token of the path
         pToken = strtok(i_path: cDELIMITER);
         dow (pToken <> *NULL);
           token  = %str(pToken);
           pToken = strtok(*NULL: cDELIMITER);
         enddo;

         fileName = token;
       endif;

       fileName = f_replace('\': '/': fileName);

       return fileName;

      /end-free
     P                 E

      * =============================================================
      *  Returns cTrue, of a given path is a folder.
      * =============================================================
     P isDirectory...
     P                 b
     D                 pi              n
     D  i_path                             const  like(path_t)
      /free

       if (f_endsWith(cSLASH: i_path) or f_endsWith(cBACKSLASH: i_path));
         return cTrue;
       else;
         return cFalse;
       endif;

      /end-free
     P                 E

      * =============================================================
      *  Returns the last C error.
      * =============================================================
     P C_getError...
     P                 b
     D                 pi            10i 0
     D  o_errorText                               like(cErrorText_t)
     D                                            options(*nopass)

     D errorNbr        s             10i 0 based(pErrorNbr)
     D pErrorText      s               *
     D errorText       s            128a

      *  erno--Set Pointer to Runtime Error Code
     D errno           PR              *                     extproc('__errno')

      *  strerror -- Set Pointer to Runtime Error Message
     D strerror        PR              *                     extproc('strerror')
     D  errno                        10I 0 value
      /free

       pErrorNbr = errno();
       if (errorNbr <> 0);
         pErrorText = strerror(errorNbr);
         if (pErrorText <> *null);
           errorText = %str(pErrorText);
         endif;
       endif;

       if (%parms() >= %parmnum(o_errorText));
         o_errorText = errorText;
       endif;

       return errorNbr;

      /end-free
     P                 E

      *===============================================================*
      *  Check existence of a stream file.
      *===============================================================*
     P StreamFile_exists...
     P                 b                   export
     D                 pi
     D  i_stmf                             const  like(path_t) options(*trim)
      *
     D rc              s             10i 0
      *
     D st_stat         ds                  likeds(st_stat_t)
      *
      *  Nachrichten
      *  ... Bibliothek &1 nicht gefunden.
      /COPY QSTRPREPRC,PRZ0043
      /free

         rc = stat(i_stmf: %addr(st_stat));
         if (rc <> 0);
            clear PRZ0043;
            PRZ00431 = i_stmf;
            sendMsg(f_newMsg('PRZ0043': PRZ0043: cTYPE_ESCAPE));
         endif;

      /end-free
     P                 E

]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRCG  type CMD - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRCG"
mbrtype =  "CMD       "
mbrtext =  "Start Pre-Processor - Ger                         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /* =================================================================== */
     /*                                                                     */
     /*  Kurzdokumentation :                                                */
     /*                                                                     */
     /*  Bereich . . . : STRPREPRC                                          */
     /*  Objekt  . . . : STRPREPRC                                          */
     /*  Beschreibung  : Start Pre-Processor - Ger                          */
     /*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      */
     /*  Datum . . . . : 21.11.2000                                         */
     /*                                                                     */
     /* =================================================================== */
     /*                                                                     */
     /*  This software is free software, you can redistribute it and/or     */
     /*  modify it under the terms of the GNU General Public License (GPL)  */
     /*  as published by the Free Software Foundation.                      */
     /*                                                                     */
     /*  See GNU General Public License for details.                        */
     /*          http://www.opensource.org                                  */
     /*          http://www.opensource.org/licenses/gpl-license.html        */
     /*                                                                     */
     /* =================================================================== */
     /*  History:                                                           */
     /*                                                                     */
     /*  Datum       Name          nderung                                 */
     /*  ----------  ------------  ---------------------------------------  */
     /*  23.01.2007  Th.Raddatz    Added parameter TAGSREQ(...) to command. */
     /*  09.04.2015  Hildebrandt   Added parameter EXICMDEXC to command.    */
     /*  16.05.2015  Th.Raddatz    Added parameter EVENTF to command.       */
     /*  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        */
     /*                            command.                                 */
     /*  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     */
     /*                            2048 to 8192.                            */
     /*  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC */
     /*                            run the XCRTSQLOBJ command of CMOne      */
     /*                            for source members without a STRPREPRC   */
     /*                            header.                                  */
     /*  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   */
     /*                            command.                                 */
     /*  07.08.2019  Th.Raddatz    Added parameter EXECOPT.                 */
     /*  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     */
     /*                            to support IFS stream files.             */
     /*                                                                     */
     /* =================================================================== */
     /* >>PRE-COMPILER<<                                                    */
     /*   >>CRTCMD<< CRTCMD       CMD(&LI/STRPREPRC) +                      */
     /*                           SRCFILE(&SL/&SF) SRCMBR(&SM);             */
     /*   >>IMPORTANT<<                                                     */
     /*     >>PARM<< PGM(*LIBL/STRPREPRC);                                  */
     /*     >>PARM<< HLPPNLGRP(*LIBL/STRPREPRCP);                           */
     /*     >>PARM<< HLPID(STRPREPRC);                                      */
     /*     >>PARM<< MSGF(*LIBL/STRPREPRC);                                 */
     /*     >>PARM<< PRDLIB(&LI);                                           */
     /*   >>END-IMPORTANT<<                                                 */
     /*   >>EXECUTE<<                                                       */
     /* >>END-PRE-COMPILER<<                                                */
     /* =================================================================== */

             CMD        PROMPT('Pre-Prozessor starten')

             PARM       KWD(USESRCFILE) TYPE(QUAL1)        +
                        MIN(0)                             +
                        PROMPT('Quellendatei')

             PARM       KWD(USESRCMBR ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          PROMPT('Teildatei')

             PARM       KWD(USESRCSTMF) TYPE(*CHAR)        +
                          LEN(4096)                        +
                          VARY(*YES *INT2)                 +
                          MIN(0)                           +
                          PROMPT('Quellendatenstromdatei')

             PARM       KWD(CMD       ) TYPE(*CMDSTR)      +
                          LEN(8192)                        +
                          MIN(0)                           +
                          PROMPT('Auszufhrender Befehl')

             PARM       KWD(OPTION    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          MAX(2)                           +
                          RSTD(*YES)                       +
                          VALUES(*EVENTF                   +
                                 *NOEVENTF                 +
                                 *ADDJOBLOG                +
                                 *NOJOBLOG)                +
                          PROMPT('Ereignisdatei Auswahlmgl.')

             PARM       KWD(CHGOBJD   ) TYPE(*CHAR  )      +
                          LEN(4)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          RSTD(*YES)                       +
                          VALUES(*NO *YES)                 +
                          PROMPT('ndern Objektbeschreibung')

             PARM       KWD(OBJTYPE   ) TYPE(*CHAR  )      +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*PGM)                        +
                          RSTD(*YES)                       +
                          VALUES(                          +
                              *BNDDIR                      +
                              *DTAARA                      +
                              *DTAQ                        +
                              *FILE                        +
                              *JOBD                        +
                              *MSGF                        +
                              *MSGQ                        +
                              *OUTQ                        +
                              *PGM                         +
                              *SRVPGM                      +
                              *TBL                         +
                                )                          +
                          PMTCTL(PMTCTL1)                  +
                          PROMPT('Objekttyp')

             PARM       KWD(OBJSRCFILE)         +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Objekt-Quellendatei')

             PARM       KWD(OBJSRCLIB)          +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Objekt-Quellenbibliothek')

             PARM       KWD(OBJSRCMBR)          +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Objekt-Quellenteildatei')

             PARM       KWD(LIB       ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Bibliothek      (&LI)')

             PARM       KWD(OBJ       ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Objekt          (&OB)')

             PARM       KWD(TYPECODE  ) TYPE(*CHAR)        +
                          LEN(6)                           +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Type Code       (&TY)')

             PARM       KWD(SRCLIB    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Quellenbibl.    (&SL)')

             PARM       KWD(SRCFILE   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Quellendatei    (&SF)')

             PARM       KWD(SRCMBR    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Quell.Teildatei (&SM)')

             PARM       KWD(TESTLIB   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Testbibliothek  (&TL)')

             PARM       KWD(TESTOBJ   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Testobjekt      (&TO)')

             PARM       KWD(TGTRLS    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Zielrelease     (&TR)')

             PARM       KWD(FRMSRCLIB ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Von-Quellenbibl.(&FL)')

             PARM       KWD(FRMSRCFILE) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Von-Quellendatei(&FF)')

             PARM       KWD(FRMSRCMBR ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Von-Quell.Teild.(&FM)')

             PARM       KWD(USER0     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U0)')

             PARM       KWD(USER1     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U1)')

             PARM       KWD(USER2     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U2)')

             PARM       KWD(USER3     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U3)')

             PARM       KWD(USER4     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U4)')

             PARM       KWD(USER5     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U5)')

             PARM       KWD(USER6     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U6)')

             PARM       KWD(USER7     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U7)')

             PARM       KWD(USER8     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U8)')

             PARM       KWD(USER9     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Parameter       (&U9)')

             PARM       KWD(STMF      ) TYPE(*CHAR)        +
                          LEN(4096)                        +
                          VARY(*YES *INT2)                 +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Wert fr Datenstromd.  (&STMF)')

             PARM       KWD(USRDEFVAR ) TYPE(USRDEFVAR)    +
                          MIN(0)                           +
                          MAX(20)                          +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Benutzerdefinierte Variablen')

             PARM       KWD(LIBL      ) TYPE(LIBL)         +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Bibliotheksliste')

             PARM       KWD(USELIBL   ) TYPE(*LGL)         +
                          LEN(1)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          SPCVAL((*NO  '0')                +
                                 (*YES '1'))               +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Verwende Bibl.-Liste implizit')

             PARM       KWD(TAGSREQ   ) TYPE(*LGL)         +
                          LEN(1)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          SPCVAL((*NO  '0')                +
                                 (*YES '1'))               +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Pre-Proz. Marken erforderlich')

             PARM       KWD(MSGF      ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          CONSTANT(STRPREPRC)

             PARM       KWD(EXICMDEXC ) TYPE(QEXICMDEXC)   +
                          DFT(*NONE)                       +
                          SNGVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Exit Program Command Execution')

             PARM       KWD(EXECOPT   ) TYPE(*CHAR)        +
                          DFT(*ALL)                        +
                          SNGVAL(*ALL)                     +
                          LEN(10)                          +
                          MIN(0)                           +
                          MAX(3)                           +
                          RSTD(*YES)                       +
                          VALUES(*ALL                      +
                                 *PRECMDS                  +
                                 *CRTCMD                   +
                                 *POSTCMDS)                +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Befehlsausfhrungsoptionen')

 USRDEFVAR:  ELEM         TYPE(*CHAR)                      +
                          MIN(1)                           +
                          LEN(10)                          +
                          EXPR(*YES)                       +
                          PROMPT('Name')

             ELEM         TYPE(*CHAR)                      +
                          MIN(1)                           +
                          LEN(100)                         +
                          EXPR(*YES)                       +
                          PROMPT('Value')

 LIBL:       ELEM         TYPE(*CHAR)                      +
                          MIN(0)                           +
                          LEN(10)                          +
                          DFT(*CRTDFT)                     +
                          SPCVAL((*SAME) (*CRTDFT))        +
                          PROMPT('Aktuelle Bibliothek (&CL)')

             ELEM         TYPE(*CHAR)                      +
                          MIN(0)                           +
                          MAX(250)                         +
                          LEN(10)                          +
                          DFT(*NONE)                       +
                          SNGVAL((*NONE))                  +
                          PROMPT('Bibliotheksliste (&LL)')

 QEXICMDEXC: QUAL       TYPE(*NAME)                        +
                          LEN(10)
             QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          SPCVAL((*LIBL) (*CURLIB))        +
                          PROMPT('Bibliothek')

 QUAL1:      QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          MIN(1)
             QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          MIN(1)                           +
                          PROMPT('Bibliothek')

 PMTCTL1:    PMTCTL     CTL(CHGOBJD) COND((*EQ '*YES'))

 /* ------------------------- */
 /* Prfen der Abhngigkeiten */
 /* ------------------------- */

 /* ... Angeben Quellendatenstromdatei  */
 /*     oder Quelledatei und -teildatei */
             DEP        CTL(&USESRCFILE *NE ' ') +
                          PARM((&USESRCSTMF *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCMBR *NE ' ') +
                          PARM((&USESRCSTMF *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCSTMF *NE ' ') +
                          PARM((&USESRCFILE *EQ ' ')  +
                               (&USESRCMBR  *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCFILE *EQ ' ') +
                          PARM((&USESRCSTMF *NE ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0039)

             DEP        CTL(&USESRCSTMF *EQ ' ') +
                          PARM((&USESRCFILE *NE ' ')  +
                               (&USESRCMBR  *NE ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0039)

 /* ... *DFT nicht zulssig fr         */
 /*     SRCLIB, SRCFILE und SRCMBR,     */
 /*     wenn USESRCSTMF angegeben ist   */
             DEP        CTL(&USESRCSTMF *NE ' ') +
                          PARM((&SRCLIB     *NE '*DFT')  +
                               (&SRCFILE    *NE '*DFT')  +
                               (&SRCMBR     *NE '*DFT')) +
                          NBRTRUE(*ALL) MSGID(PRZ0040)

 /* ... Ausgeben Ereignisdatei          */
 /*     ... Option = *EVENTF            */
             DEP        CTL(&OPTION *EQ '*EVENTF') +
                          PARM((&LIB *NE '*NONE')  +
                               (&OBJ *NE '*NONE')) +
                          NBRTRUE(*ALL) MSGID(PRZ0027)

 /* ... ndern Objektbeschreibung       */
 /*     ... Objekttyp                   */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJTYPE          +
                              *EQ '*PGM'))      +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0019)

             DEP        CTL(&CHGOBJD *EQ '*YES') +
                        PARM((&OBJTYPE           +
                              *NE ' '))          +
                        NBRTRUE(*ALL)            +
                        MSGID(PRZ0020)

 /*     ... Objekt-Quellendatei         */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCFILE       +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0016)

 /*     ... Objekt-Quellenbibliothek    */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCLIB        +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0017)

 /*     ... Objekt-Quellenteildatei     */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCMBR        +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0018)


]]>  </copysrc>
</mbr>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*STATUS   "><![CDATA[
Installing STRPREPRCE  type CMD - in progress.
]]>  </sendmsg>
<!-- START OF MEMBER  -->
<mbr
mbrname =  "STRPREPRCE"
mbrtype =  "CMD       "
mbrtext =  "Start Pre-Processor - Eng                         "
srcfile =  "QSTRPREPRC"
srclib  =  "selected  "
srclen  =  "00112"
srccssid=  "01141">
<copysrc><![CDATA[
     /* =================================================================== */
     /*                                                                     */
     /*  Kurzdokumentation :                                                */
     /*                                                                     */
     /*  Bereich . . . : STRPREPRC                                          */
     /*  Objekt  . . . : STRPREPRC                                          */
     /*  Beschreibung  : Start Pre-Processor - Eng                          */
     /*  Author  . . . : Thomas Raddatz   <thomas.raddatz@tools400.de>      */
     /*  Datum . . . . : 21.11.2000                                         */
     /*                                                                     */
     /* =================================================================== */
     /*                                                                     */
     /*  This software is free software, you can redistribute it and/or     */
     /*  modify it under the terms of the GNU General Public License (GPL)  */
     /*  as published by the Free Software Foundation.                      */
     /*                                                                     */
     /*  See GNU General Public License for details.                        */
     /*          http://www.opensource.org                                  */
     /*          http://www.opensource.org/licenses/gpl-license.html        */
     /*                                                                     */
     /* =================================================================== */
     /*  History:                                                           */
     /*                                                                     */
     /*  Datum       Name          nderung                                 */
     /*  ----------  ------------  ---------------------------------------  */
     /*  23.01.2007  Th.Raddatz    Added parameter TAGSREQ(...) to command. */
     /*  09.04.2015  Hildebrandt   Added parameter EXICMDEXC to command.    */
     /*  16.05.2015  Th.Raddatz    Added parameter EVENTF to command.       */
     /*  15.09.2017  Th.Raddatz    Added parameter LIBL to STRPREPRC        */
     /*                            command.                                 */
     /*  16.09.2017  Th.Raddatz    Changed length of parameter CMD from     */
     /*                            2048 to 8192.                            */
     /*  20.09.2017  Th.Raddatz    Added parameter USELIBL to let STRPREPRC */
     /*                            run the XCRTSQLOBJ command of CMOne      */
     /*                            for source members without a STRPREPRC   */
     /*                            header.                                  */
     /*  22.09.2017  Th.Raddatz    Added parameter USRDEFVAR to STRPREPRC   */
     /*                            command.                                 */
     /*  07.08.2019  Th.Raddatz    Added parameter EXECOPT.                 */
     /*  21.03.2022  Th.Raddatz    Added parameters USESRCSTMF and STMF     */
     /*                            to support IFS stream files.             */
     /*                                                                     */
     /* =================================================================== */
     /* >>PRE-COMPILER<<                                                    */
     /*   >>CRTCMD<< CRTCMD       CMD(&LI/STRPREPRC) +                      */
     /*                           SRCFILE(&SL/&SF) SRCMBR(&SM);             */
     /*   >>IMPORTANT<<                                                     */
     /*     >>PARM<< PGM(*LIBL/STRPREPRC);                                  */
     /*     >>PARM<< HLPPNLGRP(*LIBL/STRPREPRCP);                           */
     /*     >>PARM<< HLPID(STRPREPRC);                                      */
     /*     >>PARM<< MSGF(*LIBL/STRPREPRC);                                 */
     /*     >>PARM<< PRDLIB(&LI);                                           */
     /*   >>END-IMPORTANT<<                                                 */
     /*   >>EXECUTE<<                                                       */
     /* >>END-PRE-COMPILER<<                                                */
     /* =================================================================== */

             CMD        PROMPT('Start Pre-Processor')

             PARM       KWD(USESRCFILE) TYPE(QUAL1)        +
                        MIN(0)                             +
                        PROMPT('Source file')

             PARM       KWD(USESRCMBR ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          PROMPT('Source member')

             PARM       KWD(USESRCSTMF) TYPE(*CHAR)        +
                          LEN(4096)                        +
                          VARY(*YES *INT2)                 +
                          MIN(0)                           +
                          PROMPT('Source stream file')

             PARM       KWD(CMD       ) TYPE(*CMDSTR)      +
                          LEN(8192)                        +
                          MIN(0)                           +
                          PROMPT('Creation command')

             PARM       KWD(OPTION    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          MAX(2)                           +
                          RSTD(*YES)                       +
                          VALUES(*EVENTF                   +
                                 *NOEVENTF                 +
                                 *ADDJOBLOG                +
                                 *NOJOBLOG)                +
                          PROMPT('Event file options')

             PARM       KWD(CHGOBJD   ) TYPE(*CHAR  )      +
                          LEN(4)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          RSTD(*YES)                       +
                          VALUES(*NO *YES)                 +
                          PROMPT('Change object description')

             PARM       KWD(OBJTYPE   ) TYPE(*CHAR  )      +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*PGM)                        +
                          RSTD(*YES)                       +
                          VALUES(                          +
                              *BNDDIR                      +
                              *DTAARA                      +
                              *DTAQ                        +
                              *FILE                        +
                              *JOBD                        +
                              *MSGF                        +
                              *MSGQ                        +
                              *OUTQ                        +
                              *PGM                         +
                              *SRVPGM                      +
                              *TBL                         +
                                )                          +
                          PMTCTL(PMTCTL1)                  +
                          PROMPT('Object type')

             PARM       KWD(OBJSRCFILE)         +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Object-Source file')

             PARM       KWD(OBJSRCLIB)          +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Object-Source library')

             PARM       KWD(OBJSRCMBR)          +
                        TYPE(*NAME)             +
                        LEN(10)                 +
                        MIN(0)                  +
                        DFT(*SAME)              +
                        SPCVAL(                 +
                          (*SAME      )         +
                          (*DFT       )         +
                          (*BLANK ' ' ))        +
                        PMTCTL(PMTCTL1)         +
                        PROMPT('Object-Source member')

             PARM       KWD(LIB       ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for library        (&LI)')

             PARM       KWD(OBJ       ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for object         (&OB)')

             PARM       KWD(TYPECODE  ) TYPE(*CHAR)        +
                          LEN(6)                           +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for type cde       (&TY)')

             PARM       KWD(SRCLIB    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for source library (&SL)')

             PARM       KWD(SRCFILE   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for source file    (&SF)')

             PARM       KWD(SRCMBR    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for source member  (&SM)')

             PARM       KWD(TESTLIB   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for test library   (&TL)')

             PARM       KWD(TESTOBJ   ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for test object    (&TO)')

             PARM       KWD(TGTRLS    ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for target release (&TR)')

             PARM       KWD(FRMSRCLIB ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for from src.lib.  (&FL)')

             PARM       KWD(FRMSRCFILE) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for from src. file (&FF)')

             PARM       KWD(FRMSRCMBR ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for from src. mbr. (&FM)')

             PARM       KWD(USER0     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U0)')

             PARM       KWD(USER1     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U1)')

             PARM       KWD(USER2     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U2)')

             PARM       KWD(USER3     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U3)')

             PARM       KWD(USER4     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U4)')

             PARM       KWD(USER5     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U5)')

             PARM       KWD(USER6     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U6)')

             PARM       KWD(USER7     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U7)')

             PARM       KWD(USER8     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U8)')

             PARM       KWD(USER9     ) TYPE(*CHAR)        +
                          LEN(50)                          +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for user-def. par. (&U9)')

             PARM       KWD(STMF      ) TYPE(*CHAR)        +
                          LEN(4096)                        +
                          VARY(*YES *INT2)                 +
                          MIN(0)                           +
                          DFT(*NONE)                       +
                          SPCVAL((*NONE) (*DFT))           +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Value for stream file  (&STMF)')

             PARM       KWD(USRDEFVAR ) TYPE(USRDEFVAR)    +
                          MIN(0)                           +
                          MAX(20)                          +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('User defined variables')

             PARM       KWD(LIBL      ) TYPE(LIBL)         +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Library list')

             PARM       KWD(USELIBL   ) TYPE(*LGL)         +
                          LEN(1)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          SPCVAL((*NO  '0')                +
                                 (*YES '1'))               +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Use library list implicitly')

             PARM       KWD(TAGSREQ   ) TYPE(*LGL)         +
                          LEN(1)                           +
                          MIN(0)                           +
                          DFT(*NO)                         +
                          SPCVAL((*NO  '0')                +
                                 (*YES '1'))               +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Pre-Comp. tags required')

             PARM       KWD(MSGF      ) TYPE(*CHAR)        +
                          LEN(10)                          +
                          CONSTANT(STRPREPRC)

             PARM       KWD(EXICMDEXC ) TYPE(QEXICMDEXC)   +
                          DFT(*NONE)                       +
                          SNGVAL((*NONE))                  +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Exit Program Command Execution')

             PARM       KWD(EXECOPT   ) TYPE(*CHAR)        +
                          DFT(*ALL)                        +
                          SNGVAL(*ALL)                     +
                          LEN(10)                          +
                          MIN(0)                           +
                          MAX(3)                           +
                          RSTD(*YES)                       +
                          VALUES(*ALL                      +
                                 *PRECMDS                  +
                                 *CRTCMD                   +
                                 *POSTCMDS)                +
                          PMTCTL(*PMTRQS)                  +
                          PROMPT('Execute commands options')

 USRDEFVAR:  ELEM         TYPE(*CHAR)                      +
                          MIN(1)                           +
                          LEN(10)                          +
                          EXPR(*YES)                       +
                          PROMPT('Name')

             ELEM         TYPE(*CHAR)                      +
                          MIN(1)                           +
                          LEN(100)                         +
                          EXPR(*YES)                       +
                          PROMPT('Value')

 LIBL:       ELEM         TYPE(*CHAR)                      +
                          MIN(0)                           +
                          LEN(10)                          +
                          DFT(*CRTDFT)                     +
                          SPCVAL((*SAME) (*CRTDFT))        +
                          PROMPT('Current library (&CL)')

             ELEM         TYPE(*CHAR)                      +
                          MIN(0)                           +
                          MAX(250)                         +
                          LEN(10)                          +
                          DFT(*NONE)                       +
                          SNGVAL((*NONE))                  +
                          PROMPT('Library list (&LL)')

 QEXICMDEXC: QUAL       TYPE(*NAME)                        +
                          LEN(10)
             QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          SPCVAL((*LIBL) (*CURLIB))        +
                          PROMPT('Library')

 QUAL1:      QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          MIN(1)
             QUAL       TYPE(*NAME)                        +
                          LEN(10)                          +
                          MIN(1)                           +
                          PROMPT('Library')

 PMTCTL1:    PMTCTL     CTL(CHGOBJD) COND((*EQ '*YES'))

 /* ------------------------- */
 /* Check dependencies        */
 /* ------------------------- */

 /* ... Specifying IFS stream file      */
 /*     or QSYS source file and member  */
             DEP        CTL(&USESRCFILE *NE ' ') +
                          PARM((&USESRCSTMF *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCMBR *NE ' ') +
                          PARM((&USESRCSTMF *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCSTMF *NE ' ') +
                          PARM((&USESRCFILE *EQ ' ')  +
                               (&USESRCMBR  *EQ ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0038)

             DEP        CTL(&USESRCFILE *EQ ' ') +
                          PARM((&USESRCSTMF *NE ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0039)

             DEP        CTL(&USESRCSTMF *EQ ' ') +
                          PARM((&USESRCFILE *NE ' ')  +
                               (&USESRCMBR  *NE ' ')) +
                          NBRTRUE(*ALL) MSGID(PRZ0039)

 /* ... *DFT nicht zulssig fr         */
 /*     SRCLIB, SRCFILE und SRCMBR,     */
 /*     wenn USESRCSTMF angegeben ist   */
             DEP        CTL(&USESRCSTMF *NE ' ') +
                          PARM((&SRCLIB     *NE '*DFT')  +
                               (&SRCFILE    *NE '*DFT')  +
                               (&SRCMBR     *NE '*DFT')) +
                          NBRTRUE(*ALL) MSGID(PRZ0040)

 /* ... Create Event File         */
 /*     ... Option = *EVENTF      */
             DEP        CTL(&OPTION *EQ '*EVENTF') +
                          PARM((&LIB *NE '*NONE')  +
                               (&OBJ *NE '*NONE')) +
                          NBRTRUE(*ALL) MSGID(PRZ0027)

 /* ... Change object description */
 /*     ... Object type           */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJTYPE          +
                              *EQ '*PGM'))      +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0019)

             DEP        CTL(&CHGOBJD *EQ '*YES') +
                        PARM((&OBJTYPE           +
                              *NE ' '))          +
                        NBRTRUE(*ALL)            +
                        MSGID(PRZ0020)

 /*     ... Object-Source file    */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCFILE       +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0016)

 /*     ... Object-Source library    */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCLIB        +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0017)

 /*     ... Object-Source member     */
             DEP        CTL(&CHGOBJD *EQ '*NO') +
                        PARM((&OBJSRCMBR        +
                              *EQ '*SAME'))     +
                        NBRTRUE(*ALL)           +
                        MSGID(PRZ0018)

]]>  </copysrc>
</mbr>
<qcmdexc condition="*NONE" release="*CURRENT" dltsplf="A_INSTALL"><![CDATA[
CRTBNDCL PGM(&tolib/A_INSTALL) SRCFILE(&tolib/QSTRPREPRC) SRCMBR(*PGM) DFTACTGRP(*NO) ACTGRP(*NEW) D
BGVIEW(*LIST)
]]>  </qcmdexc>
<qcmdexc condition="*NONE" release="*CURRENT" dltsplf="*NONE"><![CDATA[
CALL PGM(&tolib/A_INSTALL) PARM('&TGTRLS' '&SRCFILE' '&tolib' '&LANG' '&TAGSREQ')
]]>  </qcmdexc>
<qcmdexc condition="*NONE" release="*CURRENT" dltsplf="*NONE"><![CDATA[
DLTPGM PGM(&tolib/A_INSTALL)
]]>  </qcmdexc>
<sendmsg  sendmsgid="CPF9897" sendmsgtype = "*COMP     "><![CDATA[
Application STRPREPRC successfully installed.
]]>  </sendmsg>
</upload>
